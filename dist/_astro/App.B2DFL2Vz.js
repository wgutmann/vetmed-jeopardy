import{r as G,R as po}from"./index.B52nOzfP.js";var _t={exports:{}},Ce={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var mo=G,ho=Symbol.for("react.element"),go=Symbol.for("react.fragment"),yo=Object.prototype.hasOwnProperty,To=mo.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Eo={key:!0,ref:!0,__self:!0,__source:!0};function It(n,e,t){var o,r={},l=null,a=null;t!==void 0&&(l=""+t),e.key!==void 0&&(l=""+e.key),e.ref!==void 0&&(a=e.ref);for(o in e)yo.call(e,o)&&!Eo.hasOwnProperty(o)&&(r[o]=e[o]);if(n&&n.defaultProps)for(o in e=n.defaultProps,e)r[o]===void 0&&(r[o]=e[o]);return{$$typeof:ho,type:n,key:l,ref:a,props:r,_owner:To.current}}Ce.Fragment=go;Ce.jsx=It;Ce.jsxs=It;_t.exports=Ce;var g=_t.exports,ne=(n=>(n.IDLE="IDLE",n.LOADING="LOADING",n.PLAYING="PLAYING",n.GAME_OVER="GAME_OVER",n))(ne||{});/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let Co,_o;function Io(){return{geminiUrl:Co,vertexUrl:_o}}function vo(n,e,t,o){var r,l;if(!n?.baseUrl){const a=Io();return e?(r=a.vertexUrl)!==null&&r!==void 0?r:t:(l=a.geminiUrl)!==null&&l!==void 0?l:o}return n.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class X{}function E(n,e){const t=/\{([^}]+)\}/g;return n.replace(t,(o,r)=>{if(Object.prototype.hasOwnProperty.call(e,r)){const l=e[r];return l!=null?String(l):""}else throw new Error(`Key '${r}' not found in valueMap.`)})}function s(n,e,t){for(let l=0;l<e.length-1;l++){const a=e[l];if(a.endsWith("[]")){const u=a.slice(0,-2);if(!(u in n))if(Array.isArray(t))n[u]=Array.from({length:t.length},()=>({}));else throw new Error(`Value must be a list given an array path ${a}`);if(Array.isArray(n[u])){const c=n[u];if(Array.isArray(t))for(let d=0;d<c.length;d++){const f=c[d];s(f,e.slice(l+1),t[d])}else for(const d of c)s(d,e.slice(l+1),t)}return}else if(a.endsWith("[0]")){const u=a.slice(0,-3);u in n||(n[u]=[{}]);const c=n[u];s(c[0],e.slice(l+1),t);return}(!n[a]||typeof n[a]!="object")&&(n[a]={}),n=n[a]}const o=e[e.length-1],r=n[o];if(r!==void 0){if(!t||typeof t=="object"&&Object.keys(t).length===0||t===r)return;if(typeof r=="object"&&typeof t=="object"&&r!==null&&t!==null)Object.assign(r,t);else throw new Error(`Cannot set value for an existing key. Key: ${o}`)}else o==="_self"&&typeof t=="object"&&t!==null&&!Array.isArray(t)?Object.assign(n,t):n[o]=t}function i(n,e,t=void 0){try{if(e.length===1&&e[0]==="_self")return n;for(let o=0;o<e.length;o++){if(typeof n!="object"||n===null)return t;const r=e[o];if(r.endsWith("[]")){const l=r.slice(0,-2);if(l in n){const a=n[l];return Array.isArray(a)?a.map(u=>i(u,e.slice(o+1),t)):t}else return t}else n=n[r]}return n}catch(o){if(o instanceof TypeError)return t;throw o}}function So(n,e){for(const[t,o]of Object.entries(e)){const r=t.split("."),l=o.split("."),a=new Set;let u=-1;for(let c=0;c<r.length;c++)if(r[c]==="*"){u=c;break}if(u!==-1&&l.length>u)for(let c=u;c<l.length;c++){const d=l[c];d!=="*"&&!d.endsWith("[]")&&!d.endsWith("[0]")&&a.add(d)}xe(n,r,l,0,a)}}function xe(n,e,t,o,r){if(o>=e.length||typeof n!="object"||n===null)return;const l=e[o];if(l.endsWith("[]")){const a=l.slice(0,-2),u=n;if(a in u&&Array.isArray(u[a]))for(const c of u[a])xe(c,e,t,o+1,r)}else if(l==="*"){if(typeof n=="object"&&n!==null&&!Array.isArray(n)){const a=n,u=Object.keys(a).filter(d=>!d.startsWith("_")&&!r.has(d)),c={};for(const d of u)c[d]=a[d];for(const[d,f]of Object.entries(c)){const p=[];for(const m of t.slice(o))m==="*"?p.push(d):p.push(m);s(a,p,f)}for(const d of u)delete a[d]}}else{const a=n;l in a&&xe(a[l],e,t,o+1,r)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Fe(n){if(typeof n!="string")throw new Error("fromImageBytes must be a string");return n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Ao(n){const e={},t=i(n,["operationName"]);t!=null&&s(e,["operationName"],t);const o=i(n,["resourceName"]);return o!=null&&s(e,["_url","resourceName"],o),e}function Ro(n){const e={},t=i(n,["name"]);t!=null&&s(e,["name"],t);const o=i(n,["metadata"]);o!=null&&s(e,["metadata"],o);const r=i(n,["done"]);r!=null&&s(e,["done"],r);const l=i(n,["error"]);l!=null&&s(e,["error"],l);const a=i(n,["response","generateVideoResponse"]);return a!=null&&s(e,["response"],No(a)),e}function xo(n){const e={},t=i(n,["name"]);t!=null&&s(e,["name"],t);const o=i(n,["metadata"]);o!=null&&s(e,["metadata"],o);const r=i(n,["done"]);r!=null&&s(e,["done"],r);const l=i(n,["error"]);l!=null&&s(e,["error"],l);const a=i(n,["response"]);return a!=null&&s(e,["response"],Po(a)),e}function No(n){const e={},t=i(n,["generatedSamples"]);if(t!=null){let l=t;Array.isArray(l)&&(l=l.map(a=>wo(a))),s(e,["generatedVideos"],l)}const o=i(n,["raiMediaFilteredCount"]);o!=null&&s(e,["raiMediaFilteredCount"],o);const r=i(n,["raiMediaFilteredReasons"]);return r!=null&&s(e,["raiMediaFilteredReasons"],r),e}function Po(n){const e={},t=i(n,["videos"]);if(t!=null){let l=t;Array.isArray(l)&&(l=l.map(a=>Mo(a))),s(e,["generatedVideos"],l)}const o=i(n,["raiMediaFilteredCount"]);o!=null&&s(e,["raiMediaFilteredCount"],o);const r=i(n,["raiMediaFilteredReasons"]);return r!=null&&s(e,["raiMediaFilteredReasons"],r),e}function wo(n){const e={},t=i(n,["video"]);return t!=null&&s(e,["video"],Go(t)),e}function Mo(n){const e={},t=i(n,["_self"]);return t!=null&&s(e,["video"],Vo(t)),e}function Do(n){const e={},t=i(n,["operationName"]);return t!=null&&s(e,["_url","operationName"],t),e}function Uo(n){const e={},t=i(n,["operationName"]);return t!=null&&s(e,["_url","operationName"],t),e}function ko(n){const e={},t=i(n,["name"]);t!=null&&s(e,["name"],t);const o=i(n,["metadata"]);o!=null&&s(e,["metadata"],o);const r=i(n,["done"]);r!=null&&s(e,["done"],r);const l=i(n,["error"]);l!=null&&s(e,["error"],l);const a=i(n,["response"]);return a!=null&&s(e,["response"],Lo(a)),e}function Lo(n){const e={},t=i(n,["sdkHttpResponse"]);t!=null&&s(e,["sdkHttpResponse"],t);const o=i(n,["parent"]);o!=null&&s(e,["parent"],o);const r=i(n,["documentName"]);return r!=null&&s(e,["documentName"],r),e}function vt(n){const e={},t=i(n,["name"]);t!=null&&s(e,["name"],t);const o=i(n,["metadata"]);o!=null&&s(e,["metadata"],o);const r=i(n,["done"]);r!=null&&s(e,["done"],r);const l=i(n,["error"]);l!=null&&s(e,["error"],l);const a=i(n,["response"]);return a!=null&&s(e,["response"],Fo(a)),e}function Fo(n){const e={},t=i(n,["sdkHttpResponse"]);t!=null&&s(e,["sdkHttpResponse"],t);const o=i(n,["parent"]);o!=null&&s(e,["parent"],o);const r=i(n,["documentName"]);return r!=null&&s(e,["documentName"],r),e}function Go(n){const e={},t=i(n,["uri"]);t!=null&&s(e,["uri"],t);const o=i(n,["encodedVideo"]);o!=null&&s(e,["videoBytes"],Fe(o));const r=i(n,["encoding"]);return r!=null&&s(e,["mimeType"],r),e}function Vo(n){const e={},t=i(n,["gcsUri"]);t!=null&&s(e,["uri"],t);const o=i(n,["bytesBase64Encoded"]);o!=null&&s(e,["videoBytes"],Fe(o));const r=i(n,["mimeType"]);return r!=null&&s(e,["mimeType"],r),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Ke;(function(n){n.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",n.OUTCOME_OK="OUTCOME_OK",n.OUTCOME_FAILED="OUTCOME_FAILED",n.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(Ke||(Ke={}));var ze;(function(n){n.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",n.PYTHON="PYTHON"})(ze||(ze={}));var Oe;(function(n){n.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",n.SILENT="SILENT",n.WHEN_IDLE="WHEN_IDLE",n.INTERRUPT="INTERRUPT"})(Oe||(Oe={}));var H;(function(n){n.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",n.STRING="STRING",n.NUMBER="NUMBER",n.INTEGER="INTEGER",n.BOOLEAN="BOOLEAN",n.ARRAY="ARRAY",n.OBJECT="OBJECT",n.NULL="NULL"})(H||(H={}));var Ze;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.MODE_DYNAMIC="MODE_DYNAMIC"})(Ze||(Ze={}));var Xe;(function(n){n.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",n.SIMPLE_SEARCH="SIMPLE_SEARCH",n.ELASTIC_SEARCH="ELASTIC_SEARCH"})(Xe||(Xe={}));var Qe;(function(n){n.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",n.NO_AUTH="NO_AUTH",n.API_KEY_AUTH="API_KEY_AUTH",n.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",n.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",n.OAUTH="OAUTH",n.OIDC_AUTH="OIDC_AUTH"})(Qe||(Qe={}));var je;(function(n){n.HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",n.HTTP_IN_QUERY="HTTP_IN_QUERY",n.HTTP_IN_HEADER="HTTP_IN_HEADER",n.HTTP_IN_PATH="HTTP_IN_PATH",n.HTTP_IN_BODY="HTTP_IN_BODY",n.HTTP_IN_COOKIE="HTTP_IN_COOKIE"})(je||(je={}));var en;(function(n){n.PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",n.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",n.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",n.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH"})(en||(en={}));var nn;(function(n){n.THINKING_LEVEL_UNSPECIFIED="THINKING_LEVEL_UNSPECIFIED",n.LOW="LOW",n.HIGH="HIGH"})(nn||(nn={}));var tn;(function(n){n.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",n.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",n.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",n.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",n.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",n.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",n.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",n.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",n.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",n.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",n.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(tn||(tn={}));var on;(function(n){n.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",n.SEVERITY="SEVERITY",n.PROBABILITY="PROBABILITY"})(on||(on={}));var sn;(function(n){n.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE",n.OFF="OFF"})(sn||(sn={}));var rn;(function(n){n.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",n.STOP="STOP",n.MAX_TOKENS="MAX_TOKENS",n.SAFETY="SAFETY",n.RECITATION="RECITATION",n.LANGUAGE="LANGUAGE",n.OTHER="OTHER",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT",n.SPII="SPII",n.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",n.IMAGE_SAFETY="IMAGE_SAFETY",n.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",n.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",n.NO_IMAGE="NO_IMAGE"})(rn||(rn={}));var ln;(function(n){n.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",n.NEGLIGIBLE="NEGLIGIBLE",n.LOW="LOW",n.MEDIUM="MEDIUM",n.HIGH="HIGH"})(ln||(ln={}));var an;(function(n){n.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",n.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",n.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",n.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",n.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(an||(an={}));var un;(function(n){n.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",n.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",n.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",n.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",n.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(un||(un={}));var dn;(function(n){n.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",n.SAFETY="SAFETY",n.OTHER="OTHER",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT",n.IMAGE_SAFETY="IMAGE_SAFETY",n.MODEL_ARMOR="MODEL_ARMOR",n.JAILBREAK="JAILBREAK"})(dn||(dn={}));var cn;(function(n){n.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",n.ON_DEMAND="ON_DEMAND",n.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(cn||(cn={}));var ge;(function(n){n.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",n.TEXT="TEXT",n.IMAGE="IMAGE",n.AUDIO="AUDIO"})(ge||(ge={}));var fn;(function(n){n.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",n.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",n.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",n.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(fn||(fn={}));var pn;(function(n){n.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",n.TUNING_MODE_FULL="TUNING_MODE_FULL",n.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(pn||(pn={}));var mn;(function(n){n.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",n.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",n.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",n.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",n.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",n.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",n.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(mn||(mn={}));var Ne;(function(n){n.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",n.JOB_STATE_QUEUED="JOB_STATE_QUEUED",n.JOB_STATE_PENDING="JOB_STATE_PENDING",n.JOB_STATE_RUNNING="JOB_STATE_RUNNING",n.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",n.JOB_STATE_FAILED="JOB_STATE_FAILED",n.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",n.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",n.JOB_STATE_PAUSED="JOB_STATE_PAUSED",n.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",n.JOB_STATE_UPDATING="JOB_STATE_UPDATING",n.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(Ne||(Ne={}));var hn;(function(n){n.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",n.TUNING_TASK_I2V="TUNING_TASK_I2V",n.TUNING_TASK_T2V="TUNING_TASK_T2V",n.TUNING_TASK_R2V="TUNING_TASK_R2V"})(hn||(hn={}));var gn;(function(n){n.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",n.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",n.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",n.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(gn||(gn={}));var yn;(function(n){n.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",n.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",n.BALANCED="BALANCED",n.PRIORITIZE_COST="PRIORITIZE_COST"})(yn||(yn={}));var Tn;(function(n){n.UNSPECIFIED="UNSPECIFIED",n.BLOCKING="BLOCKING",n.NON_BLOCKING="NON_BLOCKING"})(Tn||(Tn={}));var En;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.MODE_DYNAMIC="MODE_DYNAMIC"})(En||(En={}));var Cn;(function(n){n.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",n.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(Cn||(Cn={}));var _n;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.AUTO="AUTO",n.ANY="ANY",n.NONE="NONE",n.VALIDATED="VALIDATED"})(_n||(_n={}));var In;(function(n){n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE"})(In||(In={}));var vn;(function(n){n.DONT_ALLOW="DONT_ALLOW",n.ALLOW_ADULT="ALLOW_ADULT",n.ALLOW_ALL="ALLOW_ALL"})(vn||(vn={}));var Sn;(function(n){n.auto="auto",n.en="en",n.ja="ja",n.ko="ko",n.hi="hi",n.zh="zh",n.pt="pt",n.es="es"})(Sn||(Sn={}));var An;(function(n){n.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",n.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",n.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",n.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",n.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(An||(An={}));var Rn;(function(n){n.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",n.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",n.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",n.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(Rn||(Rn={}));var xn;(function(n){n.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",n.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",n.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",n.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(xn||(xn={}));var Nn;(function(n){n.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",n.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",n.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",n.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",n.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",n.EDIT_MODE_STYLE="EDIT_MODE_STYLE",n.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",n.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(Nn||(Nn={}));var Pn;(function(n){n.FOREGROUND="FOREGROUND",n.BACKGROUND="BACKGROUND",n.PROMPT="PROMPT",n.SEMANTIC="SEMANTIC",n.INTERACTIVE="INTERACTIVE"})(Pn||(Pn={}));var wn;(function(n){n.ASSET="ASSET",n.STYLE="STYLE"})(wn||(wn={}));var Mn;(function(n){n.INSERT="INSERT",n.REMOVE="REMOVE",n.REMOVE_STATIC="REMOVE_STATIC",n.OUTPAINT="OUTPAINT"})(Mn||(Mn={}));var Dn;(function(n){n.OPTIMIZED="OPTIMIZED",n.LOSSLESS="LOSSLESS"})(Dn||(Dn={}));var Un;(function(n){n.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",n.PREFERENCE_TUNING="PREFERENCE_TUNING"})(Un||(Un={}));var kn;(function(n){n.STATE_UNSPECIFIED="STATE_UNSPECIFIED",n.STATE_PENDING="STATE_PENDING",n.STATE_ACTIVE="STATE_ACTIVE",n.STATE_FAILED="STATE_FAILED"})(kn||(kn={}));var Ln;(function(n){n.STATE_UNSPECIFIED="STATE_UNSPECIFIED",n.PROCESSING="PROCESSING",n.ACTIVE="ACTIVE",n.FAILED="FAILED"})(Ln||(Ln={}));var Fn;(function(n){n.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",n.UPLOADED="UPLOADED",n.GENERATED="GENERATED"})(Fn||(Fn={}));var Gn;(function(n){n.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",n.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",n.RESPONSE_REJECTED="RESPONSE_REJECTED",n.NEED_MORE_INPUT="NEED_MORE_INPUT"})(Gn||(Gn={}));var Vn;(function(n){n.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",n.TEXT="TEXT",n.IMAGE="IMAGE",n.VIDEO="VIDEO",n.AUDIO="AUDIO",n.DOCUMENT="DOCUMENT"})(Vn||(Vn={}));var qn;(function(n){n.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",n.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",n.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(qn||(qn={}));var bn;(function(n){n.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",n.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",n.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(bn||(bn={}));var Hn;(function(n){n.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",n.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",n.NO_INTERRUPTION="NO_INTERRUPTION"})(Hn||(Hn={}));var Bn;(function(n){n.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",n.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",n.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(Bn||(Bn={}));var Jn;(function(n){n.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",n.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",n.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",n.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",n.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",n.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",n.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",n.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",n.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",n.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",n.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",n.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",n.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(Jn||(Jn={}));var $n;(function(n){n.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",n.QUALITY="QUALITY",n.DIVERSITY="DIVERSITY",n.VOCALIZATION="VOCALIZATION"})($n||($n={}));var se;(function(n){n.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",n.PLAY="PLAY",n.PAUSE="PAUSE",n.STOP="STOP",n.RESET_CONTEXT="RESET_CONTEXT"})(se||(se={}));class Pe{constructor(e){const t={};for(const o of e.headers.entries())t[o[0]]=o[1];this.headers=t,this.responseInternal=e}json(){return this.responseInternal.json()}}class fe{get text(){var e,t,o,r,l,a,u,c;if(((r=(o=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||o===void 0?void 0:o.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let d="",f=!1;const p=[];for(const m of(c=(u=(a=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||a===void 0?void 0:a.content)===null||u===void 0?void 0:u.parts)!==null&&c!==void 0?c:[]){for(const[h,y]of Object.entries(m))h!=="text"&&h!=="thought"&&h!=="thoughtSignature"&&(y!==null||y!==void 0)&&p.push(h);if(typeof m.text=="string"){if(typeof m.thought=="boolean"&&m.thought)continue;f=!0,d+=m.text}}return p.length>0&&console.warn(`there are non-text parts ${p} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),f?d:void 0}get data(){var e,t,o,r,l,a,u,c;if(((r=(o=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||o===void 0?void 0:o.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let d="";const f=[];for(const p of(c=(u=(a=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||a===void 0?void 0:a.content)===null||u===void 0?void 0:u.parts)!==null&&c!==void 0?c:[]){for(const[m,h]of Object.entries(p))m!=="inlineData"&&(h!==null||h!==void 0)&&f.push(m);p.inlineData&&typeof p.inlineData.data=="string"&&(d+=atob(p.inlineData.data))}return f.length>0&&console.warn(`there are non-data parts ${f} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),d.length>0?btoa(d):void 0}get functionCalls(){var e,t,o,r,l,a,u,c;if(((r=(o=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||o===void 0?void 0:o.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const d=(c=(u=(a=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||a===void 0?void 0:a.content)===null||u===void 0?void 0:u.parts)===null||c===void 0?void 0:c.filter(f=>f.functionCall).map(f=>f.functionCall).filter(f=>f!==void 0);if(d?.length!==0)return d}get executableCode(){var e,t,o,r,l,a,u,c,d;if(((r=(o=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||o===void 0?void 0:o.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const f=(c=(u=(a=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||a===void 0?void 0:a.content)===null||u===void 0?void 0:u.parts)===null||c===void 0?void 0:c.filter(p=>p.executableCode).map(p=>p.executableCode).filter(p=>p!==void 0);if(f?.length!==0)return(d=f?.[0])===null||d===void 0?void 0:d.code}get codeExecutionResult(){var e,t,o,r,l,a,u,c,d;if(((r=(o=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||o===void 0?void 0:o.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const f=(c=(u=(a=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||a===void 0?void 0:a.content)===null||u===void 0?void 0:u.parts)===null||c===void 0?void 0:c.filter(p=>p.codeExecutionResult).map(p=>p.codeExecutionResult).filter(p=>p!==void 0);if(f?.length!==0)return(d=f?.[0])===null||d===void 0?void 0:d.output}}class Yn{}class Wn{}class qo{}class bo{}class Ho{}class Bo{}class Kn{}class zn{}class On{}class Jo{}class ye{_fromAPIResponse({apiResponse:e,_isVertexAI:t}){const o=new ye;let r;const l=e;return t?r=xo(l):r=Ro(l),Object.assign(o,r),o}}class Zn{}class Xn{}class Qn{}class $o{}class Yo{}class Wo{}class Ge{_fromAPIResponse({apiResponse:e,_isVertexAI:t}){const o=new Ge,l=ko(e);return Object.assign(o,l),o}}class Ko{}class zo{}class Oo{}class jn{}class Zo{get text(){var e,t,o;let r="",l=!1;const a=[];for(const u of(o=(t=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||t===void 0?void 0:t.parts)!==null&&o!==void 0?o:[]){for(const[c,d]of Object.entries(u))c!=="text"&&c!=="thought"&&d!==null&&a.push(c);if(typeof u.text=="string"){if(typeof u.thought=="boolean"&&u.thought)continue;l=!0,r+=u.text}}return a.length>0&&console.warn(`there are non-text parts ${a} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),l?r:void 0}get data(){var e,t,o;let r="";const l=[];for(const a of(o=(t=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||t===void 0?void 0:t.parts)!==null&&o!==void 0?o:[]){for(const[u,c]of Object.entries(a))u!=="inlineData"&&c!==null&&l.push(u);a.inlineData&&typeof a.inlineData.data=="string"&&(r+=atob(a.inlineData.data))}return l.length>0&&console.warn(`there are non-data parts ${l} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),r.length>0?btoa(r):void 0}}class Xo{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}class Ve{_fromAPIResponse({apiResponse:e,_isVertexAI:t}){const o=new Ve,l=vt(e);return Object.assign(o,l),o}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function D(n,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(e.includes("..")||e.includes("?")||e.includes("&"))throw new Error("invalid model parameter");if(n.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const t=e.split("/",2);return`publishers/${t[0]}/models/${t[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function St(n,e){const t=D(n,e);return t?t.startsWith("publishers/")&&n.isVertexAI()?`projects/${n.getProject()}/locations/${n.getLocation()}/${t}`:t.startsWith("models/")&&n.isVertexAI()?`projects/${n.getProject()}/locations/${n.getLocation()}/publishers/google/${t}`:t:""}function At(n){return Array.isArray(n)?n.map(e=>Te(e)):[Te(n)]}function Te(n){if(typeof n=="object"&&n!==null)return n;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof n}`)}function Rt(n){const e=Te(n);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function xt(n){const e=Te(n);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function et(n){if(n==null)throw new Error("PartUnion is required");if(typeof n=="object")return n;if(typeof n=="string")return{text:n};throw new Error(`Unsupported part type: ${typeof n}`)}function Nt(n){if(n==null||Array.isArray(n)&&n.length===0)throw new Error("PartListUnion is required");return Array.isArray(n)?n.map(e=>et(e)):[et(n)]}function we(n){return n!=null&&typeof n=="object"&&"parts"in n&&Array.isArray(n.parts)}function nt(n){return n!=null&&typeof n=="object"&&"functionCall"in n}function tt(n){return n!=null&&typeof n=="object"&&"functionResponse"in n}function J(n){if(n==null)throw new Error("ContentUnion is required");return we(n)?n:{role:"user",parts:Nt(n)}}function qe(n,e){if(!e)return[];if(n.isVertexAI()&&Array.isArray(e))return e.flatMap(t=>{const o=J(t);return o.parts&&o.parts.length>0&&o.parts[0].text!==void 0?[o.parts[0].text]:[]});if(n.isVertexAI()){const t=J(e);return t.parts&&t.parts.length>0&&t.parts[0].text!==void 0?[t.parts[0].text]:[]}return Array.isArray(e)?e.map(t=>J(t)):[J(e)]}function K(n){if(n==null||Array.isArray(n)&&n.length===0)throw new Error("contents are required");if(!Array.isArray(n)){if(nt(n)||tt(n))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[J(n)]}const e=[],t=[],o=we(n[0]);for(const r of n){const l=we(r);if(l!=o)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(l)e.push(r);else{if(nt(r)||tt(r))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");t.push(r)}}return o||e.push({role:"user",parts:Nt(t)}),e}function Qo(n,e){n.includes("null")&&(e.nullable=!0);const t=n.filter(o=>o!=="null");if(t.length===1)e.type=Object.values(H).includes(t[0].toUpperCase())?t[0].toUpperCase():H.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const o of t)e.anyOf.push({type:Object.values(H).includes(o.toUpperCase())?o.toUpperCase():H.TYPE_UNSPECIFIED})}}function re(n){const e={},t=["items"],o=["anyOf"],r=["properties"];if(n.type&&n.anyOf)throw new Error("type and anyOf cannot be both populated.");const l=n.anyOf;l!=null&&l.length==2&&(l[0].type==="null"?(e.nullable=!0,n=l[1]):l[1].type==="null"&&(e.nullable=!0,n=l[0])),n.type instanceof Array&&Qo(n.type,e);for(const[a,u]of Object.entries(n))if(u!=null)if(a=="type"){if(u==="null")throw new Error("type: null can not be the only possible type for the field.");if(u instanceof Array)continue;e.type=Object.values(H).includes(u.toUpperCase())?u.toUpperCase():H.TYPE_UNSPECIFIED}else if(t.includes(a))e[a]=re(u);else if(o.includes(a)){const c=[];for(const d of u){if(d.type=="null"){e.nullable=!0;continue}c.push(re(d))}e[a]=c}else if(r.includes(a)){const c={};for(const[d,f]of Object.entries(u))c[d]=re(f);e[a]=c}else{if(a==="additionalProperties")continue;e[a]=u}return e}function be(n){return re(n)}function He(n){if(typeof n=="object")return n;if(typeof n=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:n}}};throw new Error(`Unsupported speechConfig type: ${typeof n}`)}function Be(n){if("multiSpeakerVoiceConfig"in n)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return n}function ue(n){if(n.functionDeclarations)for(const e of n.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=re(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=re(e.response));return n}function de(n){if(n==null)throw new Error("tools is required");if(!Array.isArray(n))throw new Error("tools is required and must be an array of Tools");const e=[];for(const t of n)e.push(t);return e}function jo(n,e,t,o=1){const r=!e.startsWith(`${t}/`)&&e.split("/").length===o;return n.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${n.getProject()}/${e}`:e.startsWith(`${t}/`)?`projects/${n.getProject()}/locations/${n.getLocation()}/${e}`:r?`projects/${n.getProject()}/locations/${n.getLocation()}/${t}/${e}`:e:r?`${t}/${e}`:e}function Q(n,e){if(typeof e!="string")throw new Error("name must be a string");return jo(n,e,"cachedContents")}function Pt(n){switch(n){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return n}}function te(n){return Fe(n)}function ei(n){return n!=null&&typeof n=="object"&&"name"in n}function ni(n){return n!=null&&typeof n=="object"&&"video"in n}function ti(n){return n!=null&&typeof n=="object"&&"uri"in n}function wt(n){var e;let t;if(ei(n)&&(t=n.name),!(ti(n)&&(t=n.uri,t===void 0))&&!(ni(n)&&(t=(e=n.video)===null||e===void 0?void 0:e.uri,t===void 0))){if(typeof n=="string"&&(t=n),t===void 0)throw new Error("Could not extract file name from the provided input.");if(t.startsWith("https://")){const r=t.split("files/")[1].match(/[a-z0-9]+/);if(r===null)throw new Error(`Could not extract file name from URI ${t}`);t=r[0]}else t.startsWith("files/")&&(t=t.split("files/")[1]);return t}}function Mt(n,e){let t;return n.isVertexAI()?t=e?"publishers/google/models":"models":t=e?"models":"tunedModels",t}function Dt(n){for(const e of["models","tunedModels","publisherModels"])if(oi(n,e))return n[e];return[]}function oi(n,e){return n!==null&&typeof n=="object"&&e in n}function ii(n,e={}){const t=n,o={name:t.name,description:t.description,parametersJsonSchema:t.inputSchema};return t.outputSchema&&(o.responseJsonSchema=t.outputSchema),e.behavior&&(o.behavior=e.behavior),{functionDeclarations:[o]}}function si(n,e={}){const t=[],o=new Set;for(const r of n){const l=r.name;if(o.has(l))throw new Error(`Duplicate function name ${l} found in MCP tools. Please ensure function names are unique.`);o.add(l);const a=ii(r,e);a.functionDeclarations&&t.push(...a.functionDeclarations)}return{functionDeclarations:t}}function Ut(n,e){let t;if(typeof e=="string")if(n.isVertexAI())if(e.startsWith("gs://"))t={format:"jsonl",gcsUri:[e]};else if(e.startsWith("bq://"))t={format:"bigquery",bigqueryUri:e};else throw new Error(`Unsupported string source for Vertex AI: ${e}`);else if(e.startsWith("files/"))t={fileName:e};else throw new Error(`Unsupported string source for Gemini API: ${e}`);else if(Array.isArray(e)){if(n.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");t={inlinedRequests:e}}else t=e;const o=[t.gcsUri,t.bigqueryUri].filter(Boolean).length,r=[t.inlinedRequests,t.fileName].filter(Boolean).length;if(n.isVertexAI()){if(r>0||o!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(o>0||r!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return t}function ri(n){if(typeof n!="string")return n;const e=n;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function kt(n){if(typeof n!="object"||n===null)return{};const e=n,t=e.inlinedResponses;if(typeof t!="object"||t===null)return n;const r=t.inlinedResponses;if(!Array.isArray(r)||r.length===0)return n;let l=!1;for(const a of r){if(typeof a!="object"||a===null)continue;const c=a.response;if(typeof c!="object"||c===null)continue;if(c.embedding!==void 0){l=!0;break}}return l&&(e.inlinedEmbedContentResponses=e.inlinedResponses,delete e.inlinedResponses),n}function ce(n,e){const t=e;if(!n.isVertexAI()){if(/batches\/[^/]+$/.test(t))return t.split("/").pop();throw new Error(`Invalid batch job name: ${t}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(t))return t.split("/").pop();if(/^\d+$/.test(t))return t;throw new Error(`Invalid batch job name: ${t}.`)}function Lt(n){const e=n;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function li(n){const e={},t=i(n,["responsesFile"]);t!=null&&s(e,["fileName"],t);const o=i(n,["inlinedResponses","inlinedResponses"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(a=>Hi(a))),s(e,["inlinedResponses"],l)}const r=i(n,["inlinedEmbedContentResponses","inlinedResponses"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(a=>a)),s(e,["inlinedEmbedContentResponses"],l)}return e}function ai(n){const e={},t=i(n,["predictionsFormat"]);t!=null&&s(e,["format"],t);const o=i(n,["gcsDestination","outputUriPrefix"]);o!=null&&s(e,["gcsUri"],o);const r=i(n,["bigqueryDestination","outputUri"]);return r!=null&&s(e,["bigqueryUri"],r),e}function ui(n){const e={},t=i(n,["format"]);t!=null&&s(e,["predictionsFormat"],t);const o=i(n,["gcsUri"]);o!=null&&s(e,["gcsDestination","outputUriPrefix"],o);const r=i(n,["bigqueryUri"]);if(r!=null&&s(e,["bigqueryDestination","outputUri"],r),i(n,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(i(n,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(i(n,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return e}function me(n){const e={},t=i(n,["name"]);t!=null&&s(e,["name"],t);const o=i(n,["metadata","displayName"]);o!=null&&s(e,["displayName"],o);const r=i(n,["metadata","state"]);r!=null&&s(e,["state"],Lt(r));const l=i(n,["metadata","createTime"]);l!=null&&s(e,["createTime"],l);const a=i(n,["metadata","endTime"]);a!=null&&s(e,["endTime"],a);const u=i(n,["metadata","updateTime"]);u!=null&&s(e,["updateTime"],u);const c=i(n,["metadata","model"]);c!=null&&s(e,["model"],c);const d=i(n,["metadata","output"]);return d!=null&&s(e,["dest"],li(kt(d))),e}function Me(n){const e={},t=i(n,["name"]);t!=null&&s(e,["name"],t);const o=i(n,["displayName"]);o!=null&&s(e,["displayName"],o);const r=i(n,["state"]);r!=null&&s(e,["state"],Lt(r));const l=i(n,["error"]);l!=null&&s(e,["error"],l);const a=i(n,["createTime"]);a!=null&&s(e,["createTime"],a);const u=i(n,["startTime"]);u!=null&&s(e,["startTime"],u);const c=i(n,["endTime"]);c!=null&&s(e,["endTime"],c);const d=i(n,["updateTime"]);d!=null&&s(e,["updateTime"],d);const f=i(n,["model"]);f!=null&&s(e,["model"],f);const p=i(n,["inputConfig"]);p!=null&&s(e,["src"],di(p));const m=i(n,["outputConfig"]);m!=null&&s(e,["dest"],ai(kt(m)));const h=i(n,["completionStats"]);return h!=null&&s(e,["completionStats"],h),e}function di(n){const e={},t=i(n,["instancesFormat"]);t!=null&&s(e,["format"],t);const o=i(n,["gcsSource","uris"]);o!=null&&s(e,["gcsUri"],o);const r=i(n,["bigquerySource","inputUri"]);return r!=null&&s(e,["bigqueryUri"],r),e}function ci(n,e){const t={};if(i(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(i(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(i(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const o=i(e,["fileName"]);o!=null&&s(t,["fileName"],o);const r=i(e,["inlinedRequests"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(a=>bi(n,a))),s(t,["requests","requests"],l)}return t}function fi(n){const e={},t=i(n,["format"]);t!=null&&s(e,["instancesFormat"],t);const o=i(n,["gcsUri"]);o!=null&&s(e,["gcsSource","uris"],o);const r=i(n,["bigqueryUri"]);if(r!=null&&s(e,["bigquerySource","inputUri"],r),i(n,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(i(n,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function pi(n){const e={},t=i(n,["data"]);if(t!=null&&s(e,["data"],t),i(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=i(n,["mimeType"]);return o!=null&&s(e,["mimeType"],o),e}function mi(n,e){const t={},o=i(e,["name"]);return o!=null&&s(t,["_url","name"],ce(n,o)),t}function hi(n,e){const t={},o=i(e,["name"]);return o!=null&&s(t,["_url","name"],ce(n,o)),t}function gi(n){const e={},t=i(n,["content"]);t!=null&&s(e,["content"],t);const o=i(n,["citationMetadata"]);o!=null&&s(e,["citationMetadata"],yi(o));const r=i(n,["tokenCount"]);r!=null&&s(e,["tokenCount"],r);const l=i(n,["finishReason"]);l!=null&&s(e,["finishReason"],l);const a=i(n,["avgLogprobs"]);a!=null&&s(e,["avgLogprobs"],a);const u=i(n,["groundingMetadata"]);u!=null&&s(e,["groundingMetadata"],u);const c=i(n,["index"]);c!=null&&s(e,["index"],c);const d=i(n,["logprobsResult"]);d!=null&&s(e,["logprobsResult"],d);const f=i(n,["safetyRatings"]);if(f!=null){let m=f;Array.isArray(m)&&(m=m.map(h=>h)),s(e,["safetyRatings"],m)}const p=i(n,["urlContextMetadata"]);return p!=null&&s(e,["urlContextMetadata"],p),e}function yi(n){const e={},t=i(n,["citationSources"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(r=>r)),s(e,["citations"],o)}return e}function Ft(n){const e={},t=i(n,["parts"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(l=>zi(l))),s(e,["parts"],r)}const o=i(n,["role"]);return o!=null&&s(e,["role"],o),e}function Ti(n,e){const t={},o=i(n,["displayName"]);if(e!==void 0&&o!=null&&s(e,["batch","displayName"],o),i(n,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return t}function Ei(n,e){const t={},o=i(n,["displayName"]);e!==void 0&&o!=null&&s(e,["displayName"],o);const r=i(n,["dest"]);return e!==void 0&&r!=null&&s(e,["outputConfig"],ui(ri(r))),t}function ot(n,e){const t={},o=i(e,["model"]);o!=null&&s(t,["_url","model"],D(n,o));const r=i(e,["src"]);r!=null&&s(t,["batch","inputConfig"],ci(n,Ut(n,r)));const l=i(e,["config"]);return l!=null&&Ti(l,t),t}function Ci(n,e){const t={},o=i(e,["model"]);o!=null&&s(t,["model"],D(n,o));const r=i(e,["src"]);r!=null&&s(t,["inputConfig"],fi(Ut(n,r)));const l=i(e,["config"]);return l!=null&&Ei(l,t),t}function _i(n,e){const t={},o=i(n,["displayName"]);return e!==void 0&&o!=null&&s(e,["batch","displayName"],o),t}function Ii(n,e){const t={},o=i(e,["model"]);o!=null&&s(t,["_url","model"],D(n,o));const r=i(e,["src"]);r!=null&&s(t,["batch","inputConfig"],Pi(n,r));const l=i(e,["config"]);return l!=null&&_i(l,t),t}function vi(n,e){const t={},o=i(e,["name"]);return o!=null&&s(t,["_url","name"],ce(n,o)),t}function Si(n,e){const t={},o=i(e,["name"]);return o!=null&&s(t,["_url","name"],ce(n,o)),t}function Ai(n){const e={},t=i(n,["sdkHttpResponse"]);t!=null&&s(e,["sdkHttpResponse"],t);const o=i(n,["name"]);o!=null&&s(e,["name"],o);const r=i(n,["done"]);r!=null&&s(e,["done"],r);const l=i(n,["error"]);return l!=null&&s(e,["error"],l),e}function Ri(n){const e={},t=i(n,["sdkHttpResponse"]);t!=null&&s(e,["sdkHttpResponse"],t);const o=i(n,["name"]);o!=null&&s(e,["name"],o);const r=i(n,["done"]);r!=null&&s(e,["done"],r);const l=i(n,["error"]);return l!=null&&s(e,["error"],l),e}function xi(n,e){const t={},o=i(e,["contents"]);if(o!=null){let l=qe(n,o);Array.isArray(l)&&(l=l.map(a=>a)),s(t,["requests[]","request","content"],l)}const r=i(e,["config"]);return r!=null&&(s(t,["_self"],Ni(r,t)),So(t,{"requests[].*":"requests[].request.*"})),t}function Ni(n,e){const t={},o=i(n,["taskType"]);e!==void 0&&o!=null&&s(e,["requests[]","taskType"],o);const r=i(n,["title"]);e!==void 0&&r!=null&&s(e,["requests[]","title"],r);const l=i(n,["outputDimensionality"]);if(e!==void 0&&l!=null&&s(e,["requests[]","outputDimensionality"],l),i(n,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(i(n,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return t}function Pi(n,e){const t={},o=i(e,["fileName"]);o!=null&&s(t,["file_name"],o);const r=i(e,["inlinedRequests"]);return r!=null&&s(t,["requests"],xi(n,r)),t}function wi(n){const e={};if(i(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=i(n,["fileUri"]);t!=null&&s(e,["fileUri"],t);const o=i(n,["mimeType"]);return o!=null&&s(e,["mimeType"],o),e}function Mi(n){const e={},t=i(n,["id"]);t!=null&&s(e,["id"],t);const o=i(n,["args"]);o!=null&&s(e,["args"],o);const r=i(n,["name"]);if(r!=null&&s(e,["name"],r),i(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(i(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function Di(n){const e={},t=i(n,["mode"]);t!=null&&s(e,["mode"],t);const o=i(n,["allowedFunctionNames"]);if(o!=null&&s(e,["allowedFunctionNames"],o),i(n,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function Ui(n,e,t){const o={},r=i(e,["systemInstruction"]);t!==void 0&&r!=null&&s(t,["systemInstruction"],Ft(J(r)));const l=i(e,["temperature"]);l!=null&&s(o,["temperature"],l);const a=i(e,["topP"]);a!=null&&s(o,["topP"],a);const u=i(e,["topK"]);u!=null&&s(o,["topK"],u);const c=i(e,["candidateCount"]);c!=null&&s(o,["candidateCount"],c);const d=i(e,["maxOutputTokens"]);d!=null&&s(o,["maxOutputTokens"],d);const f=i(e,["stopSequences"]);f!=null&&s(o,["stopSequences"],f);const p=i(e,["responseLogprobs"]);p!=null&&s(o,["responseLogprobs"],p);const m=i(e,["logprobs"]);m!=null&&s(o,["logprobs"],m);const h=i(e,["presencePenalty"]);h!=null&&s(o,["presencePenalty"],h);const y=i(e,["frequencyPenalty"]);y!=null&&s(o,["frequencyPenalty"],y);const T=i(e,["seed"]);T!=null&&s(o,["seed"],T);const I=i(e,["responseMimeType"]);I!=null&&s(o,["responseMimeType"],I);const S=i(e,["responseSchema"]);S!=null&&s(o,["responseSchema"],be(S));const _=i(e,["responseJsonSchema"]);if(_!=null&&s(o,["responseJsonSchema"],_),i(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(i(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const C=i(e,["safetySettings"]);if(t!==void 0&&C!=null){let L=C;Array.isArray(L)&&(L=L.map($=>Oi($))),s(t,["safetySettings"],L)}const A=i(e,["tools"]);if(t!==void 0&&A!=null){let L=de(A);Array.isArray(L)&&(L=L.map($=>Xi(ue($)))),s(t,["tools"],L)}const N=i(e,["toolConfig"]);if(t!==void 0&&N!=null&&s(t,["toolConfig"],Zi(N)),i(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const P=i(e,["cachedContent"]);t!==void 0&&P!=null&&s(t,["cachedContent"],Q(n,P));const w=i(e,["responseModalities"]);w!=null&&s(o,["responseModalities"],w);const b=i(e,["mediaResolution"]);b!=null&&s(o,["mediaResolution"],b);const R=i(e,["speechConfig"]);if(R!=null&&s(o,["speechConfig"],He(R)),i(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const U=i(e,["thinkingConfig"]);U!=null&&s(o,["thinkingConfig"],U);const q=i(e,["imageConfig"]);return q!=null&&s(o,["imageConfig"],qi(q)),o}function ki(n){const e={},t=i(n,["sdkHttpResponse"]);t!=null&&s(e,["sdkHttpResponse"],t);const o=i(n,["candidates"]);if(o!=null){let c=o;Array.isArray(c)&&(c=c.map(d=>gi(d))),s(e,["candidates"],c)}const r=i(n,["modelVersion"]);r!=null&&s(e,["modelVersion"],r);const l=i(n,["promptFeedback"]);l!=null&&s(e,["promptFeedback"],l);const a=i(n,["responseId"]);a!=null&&s(e,["responseId"],a);const u=i(n,["usageMetadata"]);return u!=null&&s(e,["usageMetadata"],u),e}function Li(n,e){const t={},o=i(e,["name"]);return o!=null&&s(t,["_url","name"],ce(n,o)),t}function Fi(n,e){const t={},o=i(e,["name"]);return o!=null&&s(t,["_url","name"],ce(n,o)),t}function Gi(n){const e={};if(i(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=i(n,["enableWidget"]);return t!=null&&s(e,["enableWidget"],t),e}function Vi(n){const e={};if(i(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(i(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=i(n,["timeRangeFilter"]);return t!=null&&s(e,["timeRangeFilter"],t),e}function qi(n){const e={},t=i(n,["aspectRatio"]);t!=null&&s(e,["aspectRatio"],t);const o=i(n,["imageSize"]);if(o!=null&&s(e,["imageSize"],o),i(n,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(i(n,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function bi(n,e){const t={},o=i(e,["model"]);o!=null&&s(t,["request","model"],D(n,o));const r=i(e,["contents"]);if(r!=null){let u=K(r);Array.isArray(u)&&(u=u.map(c=>Ft(c))),s(t,["request","contents"],u)}const l=i(e,["metadata"]);l!=null&&s(t,["metadata"],l);const a=i(e,["config"]);return a!=null&&s(t,["request","generationConfig"],Ui(n,a,i(t,["request"],{}))),t}function Hi(n){const e={},t=i(n,["response"]);t!=null&&s(e,["response"],ki(t));const o=i(n,["error"]);return o!=null&&s(e,["error"],o),e}function Bi(n,e){const t={},o=i(n,["pageSize"]);e!==void 0&&o!=null&&s(e,["_query","pageSize"],o);const r=i(n,["pageToken"]);if(e!==void 0&&r!=null&&s(e,["_query","pageToken"],r),i(n,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return t}function Ji(n,e){const t={},o=i(n,["pageSize"]);e!==void 0&&o!=null&&s(e,["_query","pageSize"],o);const r=i(n,["pageToken"]);e!==void 0&&r!=null&&s(e,["_query","pageToken"],r);const l=i(n,["filter"]);return e!==void 0&&l!=null&&s(e,["_query","filter"],l),t}function $i(n){const e={},t=i(n,["config"]);return t!=null&&Bi(t,e),e}function Yi(n){const e={},t=i(n,["config"]);return t!=null&&Ji(t,e),e}function Wi(n){const e={},t=i(n,["sdkHttpResponse"]);t!=null&&s(e,["sdkHttpResponse"],t);const o=i(n,["nextPageToken"]);o!=null&&s(e,["nextPageToken"],o);const r=i(n,["operations"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(a=>me(a))),s(e,["batchJobs"],l)}return e}function Ki(n){const e={},t=i(n,["sdkHttpResponse"]);t!=null&&s(e,["sdkHttpResponse"],t);const o=i(n,["nextPageToken"]);o!=null&&s(e,["nextPageToken"],o);const r=i(n,["batchPredictionJobs"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(a=>Me(a))),s(e,["batchJobs"],l)}return e}function zi(n){const e={},t=i(n,["mediaResolution"]);t!=null&&s(e,["mediaResolution"],t);const o=i(n,["codeExecutionResult"]);o!=null&&s(e,["codeExecutionResult"],o);const r=i(n,["executableCode"]);r!=null&&s(e,["executableCode"],r);const l=i(n,["fileData"]);l!=null&&s(e,["fileData"],wi(l));const a=i(n,["functionCall"]);a!=null&&s(e,["functionCall"],Mi(a));const u=i(n,["functionResponse"]);u!=null&&s(e,["functionResponse"],u);const c=i(n,["inlineData"]);c!=null&&s(e,["inlineData"],pi(c));const d=i(n,["text"]);d!=null&&s(e,["text"],d);const f=i(n,["thought"]);f!=null&&s(e,["thought"],f);const p=i(n,["thoughtSignature"]);p!=null&&s(e,["thoughtSignature"],p);const m=i(n,["videoMetadata"]);return m!=null&&s(e,["videoMetadata"],m),e}function Oi(n){const e={},t=i(n,["category"]);if(t!=null&&s(e,["category"],t),i(n,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const o=i(n,["threshold"]);return o!=null&&s(e,["threshold"],o),e}function Zi(n){const e={},t=i(n,["functionCallingConfig"]);t!=null&&s(e,["functionCallingConfig"],Di(t));const o=i(n,["retrievalConfig"]);return o!=null&&s(e,["retrievalConfig"],o),e}function Xi(n){const e={},t=i(n,["functionDeclarations"]);if(t!=null){let f=t;Array.isArray(f)&&(f=f.map(p=>p)),s(e,["functionDeclarations"],f)}if(i(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const o=i(n,["googleSearchRetrieval"]);o!=null&&s(e,["googleSearchRetrieval"],o);const r=i(n,["computerUse"]);r!=null&&s(e,["computerUse"],r);const l=i(n,["fileSearch"]);l!=null&&s(e,["fileSearch"],l);const a=i(n,["codeExecution"]);if(a!=null&&s(e,["codeExecution"],a),i(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const u=i(n,["googleMaps"]);u!=null&&s(e,["googleMaps"],Gi(u));const c=i(n,["googleSearch"]);c!=null&&s(e,["googleSearch"],Vi(c));const d=i(n,["urlContext"]);return d!=null&&s(e,["urlContext"],d),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Z;(function(n){n.PAGED_ITEM_BATCH_JOBS="batchJobs",n.PAGED_ITEM_MODELS="models",n.PAGED_ITEM_TUNING_JOBS="tuningJobs",n.PAGED_ITEM_FILES="files",n.PAGED_ITEM_CACHED_CONTENTS="cachedContents",n.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",n.PAGED_ITEM_DOCUMENTS="documents"})(Z||(Z={}));class oe{constructor(e,t,o,r){this.pageInternal=[],this.paramsInternal={},this.requestInternal=t,this.init(e,o,r)}init(e,t,o){var r,l;this.nameInternal=e,this.pageInternal=t[this.nameInternal]||[],this.sdkHttpResponseInternal=t?.sdkHttpResponse,this.idxInternal=0;let a={config:{}};!o||Object.keys(o).length===0?a={config:{}}:typeof o=="object"?a=Object.assign({},o):a=o,a.config&&(a.config.pageToken=t.nextPageToken),this.paramsInternal=a,this.pageInternalSize=(l=(r=a.config)===null||r===void 0?void 0:r.pageSize)!==null&&l!==void 0?l:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Qi extends X{constructor(e){super(),this.apiClient=e,this.create=async t=>(this.apiClient.isVertexAI()&&(t.config=this.formatDestination(t.src,t.config)),this.createInternal(t)),this.createEmbeddings=async t=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(t)},this.list=async(t={})=>new oe(Z.PAGED_ITEM_BATCH_JOBS,o=>this.listInternal(o),await this.listInternal(t),t)}createInlinedGenerateContentRequest(e){const t=ot(this.apiClient,e),o=t._url,r=E("{model}:batchGenerateContent",o),u=t.batch.inputConfig.requests,c=u.requests,d=[];for(const f of c){const p=Object.assign({},f);if(p.systemInstruction){const m=p.systemInstruction;delete p.systemInstruction;const h=p.request;h.systemInstruction=m,p.request=h}d.push(p)}return u.requests=d,delete t.config,delete t._url,delete t._query,{path:r,body:t}}getGcsUri(e){if(typeof e=="string")return e.startsWith("gs://")?e:void 0;if(!Array.isArray(e)&&e.gcsUri&&e.gcsUri.length>0)return e.gcsUri[0]}getBigqueryUri(e){if(typeof e=="string")return e.startsWith("bq://")?e:void 0;if(!Array.isArray(e))return e.bigqueryUri}formatDestination(e,t){const o=t?Object.assign({},t):{},r=Date.now().toString();if(o.displayName||(o.displayName=`genaiBatchJob_${r}`),o.dest===void 0){const l=this.getGcsUri(e),a=this.getBigqueryUri(e);if(l)l.endsWith(".jsonl")?o.dest=`${l.slice(0,-6)}/dest`:o.dest=`${l}_dest_${r}`;else if(a)o.dest=`${a}_dest_${r}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return o}async createInternal(e){var t,o,r,l;let a,u="",c={};if(this.apiClient.isVertexAI()){const d=Ci(this.apiClient,e);return u=E("batchPredictionJobs",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),a.then(f=>Me(f))}else{const d=ot(this.apiClient,e);return u=E("{model}:batchGenerateContent",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(f=>f.json()),a.then(f=>me(f))}}async createEmbeddingsInternal(e){var t,o;let r,l="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=Ii(this.apiClient,e);return l=E("{model}:asyncBatchEmbedContent",u._url),a=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json()),r.then(c=>me(c))}}async get(e){var t,o,r,l;let a,u="",c={};if(this.apiClient.isVertexAI()){const d=Fi(this.apiClient,e);return u=E("batchPredictionJobs/{name}",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),a.then(f=>Me(f))}else{const d=Li(this.apiClient,e);return u=E("batches/{name}",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(f=>f.json()),a.then(f=>me(f))}}async cancel(e){var t,o,r,l;let a="",u={};if(this.apiClient.isVertexAI()){const c=hi(this.apiClient,e);a=E("batchPredictionJobs/{name}:cancel",c._url),u=c._query,delete c._url,delete c._query,await this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal})}else{const c=mi(this.apiClient,e);a=E("batches/{name}:cancel",c._url),u=c._query,delete c._url,delete c._query,await this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal})}}async listInternal(e){var t,o,r,l;let a,u="",c={};if(this.apiClient.isVertexAI()){const d=Yi(e);return u=E("batchPredictionJobs",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:f.headers},m})),a.then(f=>{const p=Ki(f),m=new jn;return Object.assign(m,p),m})}else{const d=$i(e);return u=E("batches",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(f=>f.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:f.headers},m})),a.then(f=>{const p=Wi(f),m=new jn;return Object.assign(m,p),m})}}async delete(e){var t,o,r,l;let a,u="",c={};if(this.apiClient.isVertexAI()){const d=Si(this.apiClient,e);return u=E("batchPredictionJobs/{name}",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:f.headers},m})),a.then(f=>Ri(f))}else{const d=vi(this.apiClient,e);return u=E("batches/{name}",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(f=>f.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:f.headers},m})),a.then(f=>Ai(f))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function ji(n){const e={},t=i(n,["data"]);if(t!=null&&s(e,["data"],t),i(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=i(n,["mimeType"]);return o!=null&&s(e,["mimeType"],o),e}function it(n){const e={},t=i(n,["parts"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(l=>Is(l))),s(e,["parts"],r)}const o=i(n,["role"]);return o!=null&&s(e,["role"],o),e}function es(n,e){const t={},o=i(n,["ttl"]);e!==void 0&&o!=null&&s(e,["ttl"],o);const r=i(n,["expireTime"]);e!==void 0&&r!=null&&s(e,["expireTime"],r);const l=i(n,["displayName"]);e!==void 0&&l!=null&&s(e,["displayName"],l);const a=i(n,["contents"]);if(e!==void 0&&a!=null){let f=K(a);Array.isArray(f)&&(f=f.map(p=>it(p))),s(e,["contents"],f)}const u=i(n,["systemInstruction"]);e!==void 0&&u!=null&&s(e,["systemInstruction"],it(J(u)));const c=i(n,["tools"]);if(e!==void 0&&c!=null){let f=c;Array.isArray(f)&&(f=f.map(p=>Ss(p))),s(e,["tools"],f)}const d=i(n,["toolConfig"]);if(e!==void 0&&d!=null&&s(e,["toolConfig"],vs(d)),i(n,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return t}function ns(n,e){const t={},o=i(n,["ttl"]);e!==void 0&&o!=null&&s(e,["ttl"],o);const r=i(n,["expireTime"]);e!==void 0&&r!=null&&s(e,["expireTime"],r);const l=i(n,["displayName"]);e!==void 0&&l!=null&&s(e,["displayName"],l);const a=i(n,["contents"]);if(e!==void 0&&a!=null){let p=K(a);Array.isArray(p)&&(p=p.map(m=>m)),s(e,["contents"],p)}const u=i(n,["systemInstruction"]);e!==void 0&&u!=null&&s(e,["systemInstruction"],J(u));const c=i(n,["tools"]);if(e!==void 0&&c!=null){let p=c;Array.isArray(p)&&(p=p.map(m=>As(m))),s(e,["tools"],p)}const d=i(n,["toolConfig"]);e!==void 0&&d!=null&&s(e,["toolConfig"],d);const f=i(n,["kmsKeyName"]);return e!==void 0&&f!=null&&s(e,["encryption_spec","kmsKeyName"],f),t}function ts(n,e){const t={},o=i(e,["model"]);o!=null&&s(t,["model"],St(n,o));const r=i(e,["config"]);return r!=null&&es(r,t),t}function os(n,e){const t={},o=i(e,["model"]);o!=null&&s(t,["model"],St(n,o));const r=i(e,["config"]);return r!=null&&ns(r,t),t}function is(n,e){const t={},o=i(e,["name"]);return o!=null&&s(t,["_url","name"],Q(n,o)),t}function ss(n,e){const t={},o=i(e,["name"]);return o!=null&&s(t,["_url","name"],Q(n,o)),t}function rs(n){const e={},t=i(n,["sdkHttpResponse"]);return t!=null&&s(e,["sdkHttpResponse"],t),e}function ls(n){const e={},t=i(n,["sdkHttpResponse"]);return t!=null&&s(e,["sdkHttpResponse"],t),e}function as(n){const e={};if(i(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=i(n,["fileUri"]);t!=null&&s(e,["fileUri"],t);const o=i(n,["mimeType"]);return o!=null&&s(e,["mimeType"],o),e}function us(n){const e={},t=i(n,["id"]);t!=null&&s(e,["id"],t);const o=i(n,["args"]);o!=null&&s(e,["args"],o);const r=i(n,["name"]);if(r!=null&&s(e,["name"],r),i(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(i(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function ds(n){const e={},t=i(n,["mode"]);t!=null&&s(e,["mode"],t);const o=i(n,["allowedFunctionNames"]);if(o!=null&&s(e,["allowedFunctionNames"],o),i(n,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function cs(n){const e={};if(i(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const t=i(n,["description"]);t!=null&&s(e,["description"],t);const o=i(n,["name"]);o!=null&&s(e,["name"],o);const r=i(n,["parameters"]);r!=null&&s(e,["parameters"],r);const l=i(n,["parametersJsonSchema"]);l!=null&&s(e,["parametersJsonSchema"],l);const a=i(n,["response"]);a!=null&&s(e,["response"],a);const u=i(n,["responseJsonSchema"]);return u!=null&&s(e,["responseJsonSchema"],u),e}function fs(n,e){const t={},o=i(e,["name"]);return o!=null&&s(t,["_url","name"],Q(n,o)),t}function ps(n,e){const t={},o=i(e,["name"]);return o!=null&&s(t,["_url","name"],Q(n,o)),t}function ms(n){const e={};if(i(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=i(n,["enableWidget"]);return t!=null&&s(e,["enableWidget"],t),e}function hs(n){const e={};if(i(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(i(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=i(n,["timeRangeFilter"]);return t!=null&&s(e,["timeRangeFilter"],t),e}function gs(n,e){const t={},o=i(n,["pageSize"]);e!==void 0&&o!=null&&s(e,["_query","pageSize"],o);const r=i(n,["pageToken"]);return e!==void 0&&r!=null&&s(e,["_query","pageToken"],r),t}function ys(n,e){const t={},o=i(n,["pageSize"]);e!==void 0&&o!=null&&s(e,["_query","pageSize"],o);const r=i(n,["pageToken"]);return e!==void 0&&r!=null&&s(e,["_query","pageToken"],r),t}function Ts(n){const e={},t=i(n,["config"]);return t!=null&&gs(t,e),e}function Es(n){const e={},t=i(n,["config"]);return t!=null&&ys(t,e),e}function Cs(n){const e={},t=i(n,["sdkHttpResponse"]);t!=null&&s(e,["sdkHttpResponse"],t);const o=i(n,["nextPageToken"]);o!=null&&s(e,["nextPageToken"],o);const r=i(n,["cachedContents"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(a=>a)),s(e,["cachedContents"],l)}return e}function _s(n){const e={},t=i(n,["sdkHttpResponse"]);t!=null&&s(e,["sdkHttpResponse"],t);const o=i(n,["nextPageToken"]);o!=null&&s(e,["nextPageToken"],o);const r=i(n,["cachedContents"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(a=>a)),s(e,["cachedContents"],l)}return e}function Is(n){const e={},t=i(n,["mediaResolution"]);t!=null&&s(e,["mediaResolution"],t);const o=i(n,["codeExecutionResult"]);o!=null&&s(e,["codeExecutionResult"],o);const r=i(n,["executableCode"]);r!=null&&s(e,["executableCode"],r);const l=i(n,["fileData"]);l!=null&&s(e,["fileData"],as(l));const a=i(n,["functionCall"]);a!=null&&s(e,["functionCall"],us(a));const u=i(n,["functionResponse"]);u!=null&&s(e,["functionResponse"],u);const c=i(n,["inlineData"]);c!=null&&s(e,["inlineData"],ji(c));const d=i(n,["text"]);d!=null&&s(e,["text"],d);const f=i(n,["thought"]);f!=null&&s(e,["thought"],f);const p=i(n,["thoughtSignature"]);p!=null&&s(e,["thoughtSignature"],p);const m=i(n,["videoMetadata"]);return m!=null&&s(e,["videoMetadata"],m),e}function vs(n){const e={},t=i(n,["functionCallingConfig"]);t!=null&&s(e,["functionCallingConfig"],ds(t));const o=i(n,["retrievalConfig"]);return o!=null&&s(e,["retrievalConfig"],o),e}function Ss(n){const e={},t=i(n,["functionDeclarations"]);if(t!=null){let f=t;Array.isArray(f)&&(f=f.map(p=>p)),s(e,["functionDeclarations"],f)}if(i(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const o=i(n,["googleSearchRetrieval"]);o!=null&&s(e,["googleSearchRetrieval"],o);const r=i(n,["computerUse"]);r!=null&&s(e,["computerUse"],r);const l=i(n,["fileSearch"]);l!=null&&s(e,["fileSearch"],l);const a=i(n,["codeExecution"]);if(a!=null&&s(e,["codeExecution"],a),i(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const u=i(n,["googleMaps"]);u!=null&&s(e,["googleMaps"],ms(u));const c=i(n,["googleSearch"]);c!=null&&s(e,["googleSearch"],hs(c));const d=i(n,["urlContext"]);return d!=null&&s(e,["urlContext"],d),e}function As(n){const e={},t=i(n,["functionDeclarations"]);if(t!=null){let p=t;Array.isArray(p)&&(p=p.map(m=>cs(m))),s(e,["functionDeclarations"],p)}const o=i(n,["retrieval"]);o!=null&&s(e,["retrieval"],o);const r=i(n,["googleSearchRetrieval"]);r!=null&&s(e,["googleSearchRetrieval"],r);const l=i(n,["computerUse"]);if(l!=null&&s(e,["computerUse"],l),i(n,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const a=i(n,["codeExecution"]);a!=null&&s(e,["codeExecution"],a);const u=i(n,["enterpriseWebSearch"]);u!=null&&s(e,["enterpriseWebSearch"],u);const c=i(n,["googleMaps"]);c!=null&&s(e,["googleMaps"],c);const d=i(n,["googleSearch"]);d!=null&&s(e,["googleSearch"],d);const f=i(n,["urlContext"]);return f!=null&&s(e,["urlContext"],f),e}function Rs(n,e){const t={},o=i(n,["ttl"]);e!==void 0&&o!=null&&s(e,["ttl"],o);const r=i(n,["expireTime"]);return e!==void 0&&r!=null&&s(e,["expireTime"],r),t}function xs(n,e){const t={},o=i(n,["ttl"]);e!==void 0&&o!=null&&s(e,["ttl"],o);const r=i(n,["expireTime"]);return e!==void 0&&r!=null&&s(e,["expireTime"],r),t}function Ns(n,e){const t={},o=i(e,["name"]);o!=null&&s(t,["_url","name"],Q(n,o));const r=i(e,["config"]);return r!=null&&Rs(r,t),t}function Ps(n,e){const t={},o=i(e,["name"]);o!=null&&s(t,["_url","name"],Q(n,o));const r=i(e,["config"]);return r!=null&&xs(r,t),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class ws extends X{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new oe(Z.PAGED_ITEM_CACHED_CONTENTS,o=>this.listInternal(o),await this.listInternal(t),t)}async create(e){var t,o,r,l;let a,u="",c={};if(this.apiClient.isVertexAI()){const d=os(this.apiClient,e);return u=E("cachedContents",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),a.then(f=>f)}else{const d=ts(this.apiClient,e);return u=E("cachedContents",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(f=>f.json()),a.then(f=>f)}}async get(e){var t,o,r,l;let a,u="",c={};if(this.apiClient.isVertexAI()){const d=ps(this.apiClient,e);return u=E("{name}",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),a.then(f=>f)}else{const d=fs(this.apiClient,e);return u=E("{name}",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(f=>f.json()),a.then(f=>f)}}async delete(e){var t,o,r,l;let a,u="",c={};if(this.apiClient.isVertexAI()){const d=ss(this.apiClient,e);return u=E("{name}",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:f.headers},m})),a.then(f=>{const p=ls(f),m=new Xn;return Object.assign(m,p),m})}else{const d=is(this.apiClient,e);return u=E("{name}",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(f=>f.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:f.headers},m})),a.then(f=>{const p=rs(f),m=new Xn;return Object.assign(m,p),m})}}async update(e){var t,o,r,l;let a,u="",c={};if(this.apiClient.isVertexAI()){const d=Ps(this.apiClient,e);return u=E("{name}",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"PATCH",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),a.then(f=>f)}else{const d=Ns(this.apiClient,e);return u=E("{name}",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"PATCH",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(f=>f.json()),a.then(f=>f)}}async listInternal(e){var t,o,r,l;let a,u="",c={};if(this.apiClient.isVertexAI()){const d=Es(e);return u=E("cachedContents",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:f.headers},m})),a.then(f=>{const p=_s(f),m=new Qn;return Object.assign(m,p),m})}else{const d=Ts(e);return u=E("cachedContents",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(f=>f.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:f.headers},m})),a.then(f=>{const p=Cs(f),m=new Qn;return Object.assign(m,p),m})}}}function st(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],o=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&o>=n.length&&(n=void 0),{value:n&&n[o++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function F(n){return this instanceof F?(this.v=n,this):new F(n)}function le(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var o=t.apply(n,e||[]),r,l=[];return r=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),u("next"),u("throw"),u("return",a),r[Symbol.asyncIterator]=function(){return this},r;function a(h){return function(y){return Promise.resolve(y).then(h,p)}}function u(h,y){o[h]&&(r[h]=function(T){return new Promise(function(I,S){l.push([h,T,I,S])>1||c(h,T)})},y&&(r[h]=y(r[h])))}function c(h,y){try{d(o[h](y))}catch(T){m(l[0][3],T)}}function d(h){h.value instanceof F?Promise.resolve(h.value.v).then(f,p):m(l[0][2],h)}function f(h){c("next",h)}function p(h){c("throw",h)}function m(h,y){h(y),l.shift(),l.length&&c(l[0][0],l[0][1])}}function pe(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof st=="function"?st(n):n[Symbol.iterator](),t={},o("next"),o("throw"),o("return"),t[Symbol.asyncIterator]=function(){return this},t);function o(l){t[l]=n[l]&&function(a){return new Promise(function(u,c){a=n[l](a),r(u,c,a.done,a.value)})}}function r(l,a,u,c){Promise.resolve(c).then(function(d){l({value:d,done:u})},a)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Ms(n){var e;if(n.candidates==null||n.candidates.length===0)return!1;const t=(e=n.candidates[0])===null||e===void 0?void 0:e.content;return t===void 0?!1:Gt(t)}function Gt(n){if(n.parts===void 0||n.parts.length===0)return!1;for(const e of n.parts)if(e===void 0||Object.keys(e).length===0)return!1;return!0}function Ds(n){if(n.length!==0){for(const e of n)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function rt(n){if(n===void 0||n.length===0)return[];const e=[],t=n.length;let o=0;for(;o<t;)if(n[o].role==="user")e.push(n[o]),o++;else{const r=[];let l=!0;for(;o<t&&n[o].role==="model";)r.push(n[o]),l&&!Gt(n[o])&&(l=!1),o++;l?e.push(...r):e.pop()}return e}class Us{constructor(e,t){this.modelsModule=e,this.apiClient=t}create(e){return new ks(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class ks{constructor(e,t,o,r={},l=[]){this.apiClient=e,this.modelsModule=t,this.model=o,this.config=r,this.history=l,this.sendPromise=Promise.resolve(),Ds(l)}async sendMessage(e){var t;await this.sendPromise;const o=J(e.message),r=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(o),config:(t=e.config)!==null&&t!==void 0?t:this.config});return this.sendPromise=(async()=>{var l,a,u;const c=await r,d=(a=(l=c.candidates)===null||l===void 0?void 0:l[0])===null||a===void 0?void 0:a.content,f=c.automaticFunctionCallingHistory,p=this.getHistory(!0).length;let m=[];f!=null&&(m=(u=f.slice(p))!==null&&u!==void 0?u:[]);const h=d?[d]:[];this.recordHistory(o,h,m)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),r}async sendMessageStream(e){var t;await this.sendPromise;const o=J(e.message),r=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(o),config:(t=e.config)!==null&&t!==void 0?t:this.config});this.sendPromise=r.then(()=>{}).catch(()=>{});const l=await r;return this.processStreamResponse(l,o)}getHistory(e=!1){const t=e?rt(this.history):this.history;return structuredClone(t)}processStreamResponse(e,t){var o,r;return le(this,arguments,function*(){var a,u,c,d;const f=[];try{for(var p=!0,m=pe(e),h;h=yield F(m.next()),a=h.done,!a;p=!0){d=h.value,p=!1;const y=d;if(Ms(y)){const T=(r=(o=y.candidates)===null||o===void 0?void 0:o[0])===null||r===void 0?void 0:r.content;T!==void 0&&f.push(T)}yield yield F(y)}}catch(y){u={error:y}}finally{try{!p&&!a&&(c=m.return)&&(yield F(c.call(m)))}finally{if(u)throw u.error}}this.recordHistory(t,f)})}recordHistory(e,t,o){let r=[];t.length>0&&t.every(l=>l.role!==void 0)?r=t:r.push({role:"model",parts:[]}),o&&o.length>0?this.history.push(...rt(o)):this.history.push(e),this.history.push(...r)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class _e extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,_e.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Ls(n){const e={},t=i(n,["file"]);return t!=null&&s(e,["file"],t),e}function Fs(n){const e={},t=i(n,["sdkHttpResponse"]);return t!=null&&s(e,["sdkHttpResponse"],t),e}function Gs(n){const e={},t=i(n,["name"]);return t!=null&&s(e,["_url","file"],wt(t)),e}function Vs(n){const e={},t=i(n,["sdkHttpResponse"]);return t!=null&&s(e,["sdkHttpResponse"],t),e}function qs(n){const e={},t=i(n,["name"]);return t!=null&&s(e,["_url","file"],wt(t)),e}function bs(n,e){const t={},o=i(n,["pageSize"]);e!==void 0&&o!=null&&s(e,["_query","pageSize"],o);const r=i(n,["pageToken"]);return e!==void 0&&r!=null&&s(e,["_query","pageToken"],r),t}function Hs(n){const e={},t=i(n,["config"]);return t!=null&&bs(t,e),e}function Bs(n){const e={},t=i(n,["sdkHttpResponse"]);t!=null&&s(e,["sdkHttpResponse"],t);const o=i(n,["nextPageToken"]);o!=null&&s(e,["nextPageToken"],o);const r=i(n,["files"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(a=>a)),s(e,["files"],l)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Js extends X{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new oe(Z.PAGED_ITEM_FILES,o=>this.listInternal(o),await this.listInternal(t),t)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(t=>t)}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var t,o;let r,l="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=Hs(e);return l=E("files",u._url),a=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json().then(d=>{const f=d;return f.sdkHttpResponse={headers:c.headers},f})),r.then(c=>{const d=Bs(c),f=new Ko;return Object.assign(f,d),f})}}async createInternal(e){var t,o;let r,l="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=Ls(e);return l=E("upload/v1beta/files",u._url),a=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json()),r.then(c=>{const d=Fs(c),f=new zo;return Object.assign(f,d),f})}}async get(e){var t,o;let r,l="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=qs(e);return l=E("files/{file}",u._url),a=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json()),r.then(c=>c)}}async delete(e){var t,o;let r,l="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=Gs(e);return l=E("files/{file}",u._url),a=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json().then(d=>{const f=d;return f.sdkHttpResponse={headers:c.headers},f})),r.then(c=>{const d=Vs(c),f=new Oo;return Object.assign(f,d),f})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function he(n){const e={},t=i(n,["data"]);if(t!=null&&s(e,["data"],t),i(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=i(n,["mimeType"]);return o!=null&&s(e,["mimeType"],o),e}function $s(n){const e={},t=i(n,["parts"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(l=>rr(l))),s(e,["parts"],r)}const o=i(n,["role"]);return o!=null&&s(e,["role"],o),e}function Ys(n){const e={};if(i(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=i(n,["fileUri"]);t!=null&&s(e,["fileUri"],t);const o=i(n,["mimeType"]);return o!=null&&s(e,["mimeType"],o),e}function Ws(n){const e={},t=i(n,["id"]);t!=null&&s(e,["id"],t);const o=i(n,["args"]);o!=null&&s(e,["args"],o);const r=i(n,["name"]);if(r!=null&&s(e,["name"],r),i(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(i(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function Ks(n){const e={};if(i(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const t=i(n,["description"]);t!=null&&s(e,["description"],t);const o=i(n,["name"]);o!=null&&s(e,["name"],o);const r=i(n,["parameters"]);r!=null&&s(e,["parameters"],r);const l=i(n,["parametersJsonSchema"]);l!=null&&s(e,["parametersJsonSchema"],l);const a=i(n,["response"]);a!=null&&s(e,["response"],a);const u=i(n,["responseJsonSchema"]);return u!=null&&s(e,["responseJsonSchema"],u),e}function zs(n){const e={},t=i(n,["modelSelectionConfig"]);t!=null&&s(e,["modelConfig"],t);const o=i(n,["responseJsonSchema"]);o!=null&&s(e,["responseJsonSchema"],o);const r=i(n,["audioTimestamp"]);r!=null&&s(e,["audioTimestamp"],r);const l=i(n,["candidateCount"]);l!=null&&s(e,["candidateCount"],l);const a=i(n,["enableAffectiveDialog"]);a!=null&&s(e,["enableAffectiveDialog"],a);const u=i(n,["frequencyPenalty"]);u!=null&&s(e,["frequencyPenalty"],u);const c=i(n,["logprobs"]);c!=null&&s(e,["logprobs"],c);const d=i(n,["maxOutputTokens"]);d!=null&&s(e,["maxOutputTokens"],d);const f=i(n,["mediaResolution"]);f!=null&&s(e,["mediaResolution"],f);const p=i(n,["presencePenalty"]);p!=null&&s(e,["presencePenalty"],p);const m=i(n,["responseLogprobs"]);m!=null&&s(e,["responseLogprobs"],m);const h=i(n,["responseMimeType"]);h!=null&&s(e,["responseMimeType"],h);const y=i(n,["responseModalities"]);y!=null&&s(e,["responseModalities"],y);const T=i(n,["responseSchema"]);T!=null&&s(e,["responseSchema"],T);const I=i(n,["routingConfig"]);I!=null&&s(e,["routingConfig"],I);const S=i(n,["seed"]);S!=null&&s(e,["seed"],S);const _=i(n,["speechConfig"]);_!=null&&s(e,["speechConfig"],Vt(_));const C=i(n,["stopSequences"]);C!=null&&s(e,["stopSequences"],C);const A=i(n,["temperature"]);A!=null&&s(e,["temperature"],A);const N=i(n,["thinkingConfig"]);N!=null&&s(e,["thinkingConfig"],N);const P=i(n,["topK"]);P!=null&&s(e,["topK"],P);const w=i(n,["topP"]);if(w!=null&&s(e,["topP"],w),i(n,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function Os(n){const e={};if(i(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=i(n,["enableWidget"]);return t!=null&&s(e,["enableWidget"],t),e}function Zs(n){const e={};if(i(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(i(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=i(n,["timeRangeFilter"]);return t!=null&&s(e,["timeRangeFilter"],t),e}function Xs(n,e){const t={},o=i(n,["generationConfig"]);e!==void 0&&o!=null&&s(e,["setup","generationConfig"],o);const r=i(n,["responseModalities"]);e!==void 0&&r!=null&&s(e,["setup","generationConfig","responseModalities"],r);const l=i(n,["temperature"]);e!==void 0&&l!=null&&s(e,["setup","generationConfig","temperature"],l);const a=i(n,["topP"]);e!==void 0&&a!=null&&s(e,["setup","generationConfig","topP"],a);const u=i(n,["topK"]);e!==void 0&&u!=null&&s(e,["setup","generationConfig","topK"],u);const c=i(n,["maxOutputTokens"]);e!==void 0&&c!=null&&s(e,["setup","generationConfig","maxOutputTokens"],c);const d=i(n,["mediaResolution"]);e!==void 0&&d!=null&&s(e,["setup","generationConfig","mediaResolution"],d);const f=i(n,["seed"]);e!==void 0&&f!=null&&s(e,["setup","generationConfig","seed"],f);const p=i(n,["speechConfig"]);e!==void 0&&p!=null&&s(e,["setup","generationConfig","speechConfig"],Be(p));const m=i(n,["thinkingConfig"]);e!==void 0&&m!=null&&s(e,["setup","generationConfig","thinkingConfig"],m);const h=i(n,["enableAffectiveDialog"]);e!==void 0&&h!=null&&s(e,["setup","generationConfig","enableAffectiveDialog"],h);const y=i(n,["systemInstruction"]);e!==void 0&&y!=null&&s(e,["setup","systemInstruction"],$s(J(y)));const T=i(n,["tools"]);if(e!==void 0&&T!=null){let P=de(T);Array.isArray(P)&&(P=P.map(w=>ar(ue(w)))),s(e,["setup","tools"],P)}const I=i(n,["sessionResumption"]);e!==void 0&&I!=null&&s(e,["setup","sessionResumption"],lr(I));const S=i(n,["inputAudioTranscription"]);e!==void 0&&S!=null&&s(e,["setup","inputAudioTranscription"],S);const _=i(n,["outputAudioTranscription"]);e!==void 0&&_!=null&&s(e,["setup","outputAudioTranscription"],_);const C=i(n,["realtimeInputConfig"]);e!==void 0&&C!=null&&s(e,["setup","realtimeInputConfig"],C);const A=i(n,["contextWindowCompression"]);e!==void 0&&A!=null&&s(e,["setup","contextWindowCompression"],A);const N=i(n,["proactivity"]);return e!==void 0&&N!=null&&s(e,["setup","proactivity"],N),t}function Qs(n,e){const t={},o=i(n,["generationConfig"]);e!==void 0&&o!=null&&s(e,["setup","generationConfig"],zs(o));const r=i(n,["responseModalities"]);e!==void 0&&r!=null&&s(e,["setup","generationConfig","responseModalities"],r);const l=i(n,["temperature"]);e!==void 0&&l!=null&&s(e,["setup","generationConfig","temperature"],l);const a=i(n,["topP"]);e!==void 0&&a!=null&&s(e,["setup","generationConfig","topP"],a);const u=i(n,["topK"]);e!==void 0&&u!=null&&s(e,["setup","generationConfig","topK"],u);const c=i(n,["maxOutputTokens"]);e!==void 0&&c!=null&&s(e,["setup","generationConfig","maxOutputTokens"],c);const d=i(n,["mediaResolution"]);e!==void 0&&d!=null&&s(e,["setup","generationConfig","mediaResolution"],d);const f=i(n,["seed"]);e!==void 0&&f!=null&&s(e,["setup","generationConfig","seed"],f);const p=i(n,["speechConfig"]);e!==void 0&&p!=null&&s(e,["setup","generationConfig","speechConfig"],Vt(Be(p)));const m=i(n,["thinkingConfig"]);e!==void 0&&m!=null&&s(e,["setup","generationConfig","thinkingConfig"],m);const h=i(n,["enableAffectiveDialog"]);e!==void 0&&h!=null&&s(e,["setup","generationConfig","enableAffectiveDialog"],h);const y=i(n,["systemInstruction"]);e!==void 0&&y!=null&&s(e,["setup","systemInstruction"],J(y));const T=i(n,["tools"]);if(e!==void 0&&T!=null){let P=de(T);Array.isArray(P)&&(P=P.map(w=>ur(ue(w)))),s(e,["setup","tools"],P)}const I=i(n,["sessionResumption"]);e!==void 0&&I!=null&&s(e,["setup","sessionResumption"],I);const S=i(n,["inputAudioTranscription"]);e!==void 0&&S!=null&&s(e,["setup","inputAudioTranscription"],S);const _=i(n,["outputAudioTranscription"]);e!==void 0&&_!=null&&s(e,["setup","outputAudioTranscription"],_);const C=i(n,["realtimeInputConfig"]);e!==void 0&&C!=null&&s(e,["setup","realtimeInputConfig"],C);const A=i(n,["contextWindowCompression"]);e!==void 0&&A!=null&&s(e,["setup","contextWindowCompression"],A);const N=i(n,["proactivity"]);return e!==void 0&&N!=null&&s(e,["setup","proactivity"],N),t}function js(n,e){const t={},o=i(e,["model"]);o!=null&&s(t,["setup","model"],D(n,o));const r=i(e,["config"]);return r!=null&&s(t,["config"],Xs(r,t)),t}function er(n,e){const t={},o=i(e,["model"]);o!=null&&s(t,["setup","model"],D(n,o));const r=i(e,["config"]);return r!=null&&s(t,["config"],Qs(r,t)),t}function nr(n){const e={},t=i(n,["musicGenerationConfig"]);return t!=null&&s(e,["musicGenerationConfig"],t),e}function tr(n){const e={},t=i(n,["weightedPrompts"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(r=>r)),s(e,["weightedPrompts"],o)}return e}function or(n){const e={},t=i(n,["media"]);if(t!=null){let d=At(t);Array.isArray(d)&&(d=d.map(f=>he(f))),s(e,["mediaChunks"],d)}const o=i(n,["audio"]);o!=null&&s(e,["audio"],he(xt(o)));const r=i(n,["audioStreamEnd"]);r!=null&&s(e,["audioStreamEnd"],r);const l=i(n,["video"]);l!=null&&s(e,["video"],he(Rt(l)));const a=i(n,["text"]);a!=null&&s(e,["text"],a);const u=i(n,["activityStart"]);u!=null&&s(e,["activityStart"],u);const c=i(n,["activityEnd"]);return c!=null&&s(e,["activityEnd"],c),e}function ir(n){const e={},t=i(n,["media"]);if(t!=null){let d=At(t);Array.isArray(d)&&(d=d.map(f=>f)),s(e,["mediaChunks"],d)}const o=i(n,["audio"]);o!=null&&s(e,["audio"],xt(o));const r=i(n,["audioStreamEnd"]);r!=null&&s(e,["audioStreamEnd"],r);const l=i(n,["video"]);l!=null&&s(e,["video"],Rt(l));const a=i(n,["text"]);a!=null&&s(e,["text"],a);const u=i(n,["activityStart"]);u!=null&&s(e,["activityStart"],u);const c=i(n,["activityEnd"]);return c!=null&&s(e,["activityEnd"],c),e}function sr(n){const e={},t=i(n,["setupComplete"]);t!=null&&s(e,["setupComplete"],t);const o=i(n,["serverContent"]);o!=null&&s(e,["serverContent"],o);const r=i(n,["toolCall"]);r!=null&&s(e,["toolCall"],r);const l=i(n,["toolCallCancellation"]);l!=null&&s(e,["toolCallCancellation"],l);const a=i(n,["usageMetadata"]);a!=null&&s(e,["usageMetadata"],dr(a));const u=i(n,["goAway"]);u!=null&&s(e,["goAway"],u);const c=i(n,["sessionResumptionUpdate"]);return c!=null&&s(e,["sessionResumptionUpdate"],c),e}function rr(n){const e={},t=i(n,["mediaResolution"]);t!=null&&s(e,["mediaResolution"],t);const o=i(n,["codeExecutionResult"]);o!=null&&s(e,["codeExecutionResult"],o);const r=i(n,["executableCode"]);r!=null&&s(e,["executableCode"],r);const l=i(n,["fileData"]);l!=null&&s(e,["fileData"],Ys(l));const a=i(n,["functionCall"]);a!=null&&s(e,["functionCall"],Ws(a));const u=i(n,["functionResponse"]);u!=null&&s(e,["functionResponse"],u);const c=i(n,["inlineData"]);c!=null&&s(e,["inlineData"],he(c));const d=i(n,["text"]);d!=null&&s(e,["text"],d);const f=i(n,["thought"]);f!=null&&s(e,["thought"],f);const p=i(n,["thoughtSignature"]);p!=null&&s(e,["thoughtSignature"],p);const m=i(n,["videoMetadata"]);return m!=null&&s(e,["videoMetadata"],m),e}function lr(n){const e={},t=i(n,["handle"]);if(t!=null&&s(e,["handle"],t),i(n,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function Vt(n){const e={},t=i(n,["languageCode"]);t!=null&&s(e,["languageCode"],t);const o=i(n,["voiceConfig"]);if(o!=null&&s(e,["voiceConfig"],o),i(n,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");return e}function ar(n){const e={},t=i(n,["functionDeclarations"]);if(t!=null){let f=t;Array.isArray(f)&&(f=f.map(p=>p)),s(e,["functionDeclarations"],f)}if(i(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const o=i(n,["googleSearchRetrieval"]);o!=null&&s(e,["googleSearchRetrieval"],o);const r=i(n,["computerUse"]);r!=null&&s(e,["computerUse"],r);const l=i(n,["fileSearch"]);l!=null&&s(e,["fileSearch"],l);const a=i(n,["codeExecution"]);if(a!=null&&s(e,["codeExecution"],a),i(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const u=i(n,["googleMaps"]);u!=null&&s(e,["googleMaps"],Os(u));const c=i(n,["googleSearch"]);c!=null&&s(e,["googleSearch"],Zs(c));const d=i(n,["urlContext"]);return d!=null&&s(e,["urlContext"],d),e}function ur(n){const e={},t=i(n,["functionDeclarations"]);if(t!=null){let p=t;Array.isArray(p)&&(p=p.map(m=>Ks(m))),s(e,["functionDeclarations"],p)}const o=i(n,["retrieval"]);o!=null&&s(e,["retrieval"],o);const r=i(n,["googleSearchRetrieval"]);r!=null&&s(e,["googleSearchRetrieval"],r);const l=i(n,["computerUse"]);if(l!=null&&s(e,["computerUse"],l),i(n,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const a=i(n,["codeExecution"]);a!=null&&s(e,["codeExecution"],a);const u=i(n,["enterpriseWebSearch"]);u!=null&&s(e,["enterpriseWebSearch"],u);const c=i(n,["googleMaps"]);c!=null&&s(e,["googleMaps"],c);const d=i(n,["googleSearch"]);d!=null&&s(e,["googleSearch"],d);const f=i(n,["urlContext"]);return f!=null&&s(e,["urlContext"],f),e}function dr(n){const e={},t=i(n,["promptTokenCount"]);t!=null&&s(e,["promptTokenCount"],t);const o=i(n,["cachedContentTokenCount"]);o!=null&&s(e,["cachedContentTokenCount"],o);const r=i(n,["candidatesTokenCount"]);r!=null&&s(e,["responseTokenCount"],r);const l=i(n,["toolUsePromptTokenCount"]);l!=null&&s(e,["toolUsePromptTokenCount"],l);const a=i(n,["thoughtsTokenCount"]);a!=null&&s(e,["thoughtsTokenCount"],a);const u=i(n,["totalTokenCount"]);u!=null&&s(e,["totalTokenCount"],u);const c=i(n,["promptTokensDetails"]);if(c!=null){let h=c;Array.isArray(h)&&(h=h.map(y=>y)),s(e,["promptTokensDetails"],h)}const d=i(n,["cacheTokensDetails"]);if(d!=null){let h=d;Array.isArray(h)&&(h=h.map(y=>y)),s(e,["cacheTokensDetails"],h)}const f=i(n,["candidatesTokensDetails"]);if(f!=null){let h=f;Array.isArray(h)&&(h=h.map(y=>y)),s(e,["responseTokensDetails"],h)}const p=i(n,["toolUsePromptTokensDetails"]);if(p!=null){let h=p;Array.isArray(h)&&(h=h.map(y=>y)),s(e,["toolUsePromptTokensDetails"],h)}const m=i(n,["trafficType"]);return m!=null&&s(e,["trafficType"],m),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function cr(n){const e={},t=i(n,["data"]);if(t!=null&&s(e,["data"],t),i(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=i(n,["mimeType"]);return o!=null&&s(e,["mimeType"],o),e}function fr(n){const e={},t=i(n,["content"]);t!=null&&s(e,["content"],t);const o=i(n,["citationMetadata"]);o!=null&&s(e,["citationMetadata"],pr(o));const r=i(n,["tokenCount"]);r!=null&&s(e,["tokenCount"],r);const l=i(n,["finishReason"]);l!=null&&s(e,["finishReason"],l);const a=i(n,["avgLogprobs"]);a!=null&&s(e,["avgLogprobs"],a);const u=i(n,["groundingMetadata"]);u!=null&&s(e,["groundingMetadata"],u);const c=i(n,["index"]);c!=null&&s(e,["index"],c);const d=i(n,["logprobsResult"]);d!=null&&s(e,["logprobsResult"],d);const f=i(n,["safetyRatings"]);if(f!=null){let m=f;Array.isArray(m)&&(m=m.map(h=>h)),s(e,["safetyRatings"],m)}const p=i(n,["urlContextMetadata"]);return p!=null&&s(e,["urlContextMetadata"],p),e}function pr(n){const e={},t=i(n,["citationSources"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(r=>r)),s(e,["citations"],o)}return e}function mr(n,e){const t={},o=i(e,["model"]);o!=null&&s(t,["_url","model"],D(n,o));const r=i(e,["contents"]);if(r!=null){let l=K(r);Array.isArray(l)&&(l=l.map(a=>a)),s(t,["contents"],l)}return t}function hr(n){const e={},t=i(n,["sdkHttpResponse"]);t!=null&&s(e,["sdkHttpResponse"],t);const o=i(n,["tokensInfo"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(l=>l)),s(e,["tokensInfo"],r)}return e}function gr(n){const e={},t=i(n,["values"]);t!=null&&s(e,["values"],t);const o=i(n,["statistics"]);return o!=null&&s(e,["statistics"],yr(o)),e}function yr(n){const e={},t=i(n,["truncated"]);t!=null&&s(e,["truncated"],t);const o=i(n,["token_count"]);return o!=null&&s(e,["tokenCount"],o),e}function Ie(n){const e={},t=i(n,["parts"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(l=>Rl(l))),s(e,["parts"],r)}const o=i(n,["role"]);return o!=null&&s(e,["role"],o),e}function Tr(n){const e={},t=i(n,["controlType"]);t!=null&&s(e,["controlType"],t);const o=i(n,["enableControlImageComputation"]);return o!=null&&s(e,["computeControl"],o),e}function Er(n){const e={};if(i(n,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(i(n,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(i(n,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function Cr(n,e){const t={},o=i(n,["systemInstruction"]);e!==void 0&&o!=null&&s(e,["systemInstruction"],J(o));const r=i(n,["tools"]);if(e!==void 0&&r!=null){let a=r;Array.isArray(a)&&(a=a.map(u=>Jt(u))),s(e,["tools"],a)}const l=i(n,["generationConfig"]);return e!==void 0&&l!=null&&s(e,["generationConfig"],cl(l)),t}function _r(n,e){const t={},o=i(e,["model"]);o!=null&&s(t,["_url","model"],D(n,o));const r=i(e,["contents"]);if(r!=null){let a=K(r);Array.isArray(a)&&(a=a.map(u=>Ie(u))),s(t,["contents"],a)}const l=i(e,["config"]);return l!=null&&Er(l),t}function Ir(n,e){const t={},o=i(e,["model"]);o!=null&&s(t,["_url","model"],D(n,o));const r=i(e,["contents"]);if(r!=null){let a=K(r);Array.isArray(a)&&(a=a.map(u=>u)),s(t,["contents"],a)}const l=i(e,["config"]);return l!=null&&Cr(l,t),t}function vr(n){const e={},t=i(n,["sdkHttpResponse"]);t!=null&&s(e,["sdkHttpResponse"],t);const o=i(n,["totalTokens"]);o!=null&&s(e,["totalTokens"],o);const r=i(n,["cachedContentTokenCount"]);return r!=null&&s(e,["cachedContentTokenCount"],r),e}function Sr(n){const e={},t=i(n,["sdkHttpResponse"]);t!=null&&s(e,["sdkHttpResponse"],t);const o=i(n,["totalTokens"]);return o!=null&&s(e,["totalTokens"],o),e}function Ar(n,e){const t={},o=i(e,["model"]);return o!=null&&s(t,["_url","name"],D(n,o)),t}function Rr(n,e){const t={},o=i(e,["model"]);return o!=null&&s(t,["_url","name"],D(n,o)),t}function xr(n){const e={},t=i(n,["sdkHttpResponse"]);return t!=null&&s(e,["sdkHttpResponse"],t),e}function Nr(n){const e={},t=i(n,["sdkHttpResponse"]);return t!=null&&s(e,["sdkHttpResponse"],t),e}function Pr(n,e){const t={},o=i(n,["outputGcsUri"]);e!==void 0&&o!=null&&s(e,["parameters","storageUri"],o);const r=i(n,["negativePrompt"]);e!==void 0&&r!=null&&s(e,["parameters","negativePrompt"],r);const l=i(n,["numberOfImages"]);e!==void 0&&l!=null&&s(e,["parameters","sampleCount"],l);const a=i(n,["aspectRatio"]);e!==void 0&&a!=null&&s(e,["parameters","aspectRatio"],a);const u=i(n,["guidanceScale"]);e!==void 0&&u!=null&&s(e,["parameters","guidanceScale"],u);const c=i(n,["seed"]);e!==void 0&&c!=null&&s(e,["parameters","seed"],c);const d=i(n,["safetyFilterLevel"]);e!==void 0&&d!=null&&s(e,["parameters","safetySetting"],d);const f=i(n,["personGeneration"]);e!==void 0&&f!=null&&s(e,["parameters","personGeneration"],f);const p=i(n,["includeSafetyAttributes"]);e!==void 0&&p!=null&&s(e,["parameters","includeSafetyAttributes"],p);const m=i(n,["includeRaiReason"]);e!==void 0&&m!=null&&s(e,["parameters","includeRaiReason"],m);const h=i(n,["language"]);e!==void 0&&h!=null&&s(e,["parameters","language"],h);const y=i(n,["outputMimeType"]);e!==void 0&&y!=null&&s(e,["parameters","outputOptions","mimeType"],y);const T=i(n,["outputCompressionQuality"]);e!==void 0&&T!=null&&s(e,["parameters","outputOptions","compressionQuality"],T);const I=i(n,["addWatermark"]);e!==void 0&&I!=null&&s(e,["parameters","addWatermark"],I);const S=i(n,["labels"]);e!==void 0&&S!=null&&s(e,["labels"],S);const _=i(n,["editMode"]);e!==void 0&&_!=null&&s(e,["parameters","editMode"],_);const C=i(n,["baseSteps"]);return e!==void 0&&C!=null&&s(e,["parameters","editConfig","baseSteps"],C),t}function wr(n,e){const t={},o=i(e,["model"]);o!=null&&s(t,["_url","model"],D(n,o));const r=i(e,["prompt"]);r!=null&&s(t,["instances[0]","prompt"],r);const l=i(e,["referenceImages"]);if(l!=null){let u=l;Array.isArray(u)&&(u=u.map(c=>Dl(c))),s(t,["instances[0]","referenceImages"],u)}const a=i(e,["config"]);return a!=null&&Pr(a,t),t}function Mr(n){const e={},t=i(n,["sdkHttpResponse"]);t!=null&&s(e,["sdkHttpResponse"],t);const o=i(n,["predictions"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(l=>ve(l))),s(e,["generatedImages"],r)}return e}function Dr(n,e){const t={},o=i(n,["taskType"]);e!==void 0&&o!=null&&s(e,["requests[]","taskType"],o);const r=i(n,["title"]);e!==void 0&&r!=null&&s(e,["requests[]","title"],r);const l=i(n,["outputDimensionality"]);if(e!==void 0&&l!=null&&s(e,["requests[]","outputDimensionality"],l),i(n,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(i(n,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return t}function Ur(n,e){const t={},o=i(n,["taskType"]);e!==void 0&&o!=null&&s(e,["instances[]","task_type"],o);const r=i(n,["title"]);e!==void 0&&r!=null&&s(e,["instances[]","title"],r);const l=i(n,["outputDimensionality"]);e!==void 0&&l!=null&&s(e,["parameters","outputDimensionality"],l);const a=i(n,["mimeType"]);e!==void 0&&a!=null&&s(e,["instances[]","mimeType"],a);const u=i(n,["autoTruncate"]);return e!==void 0&&u!=null&&s(e,["parameters","autoTruncate"],u),t}function kr(n,e){const t={},o=i(e,["model"]);o!=null&&s(t,["_url","model"],D(n,o));const r=i(e,["contents"]);if(r!=null){let u=qe(n,r);Array.isArray(u)&&(u=u.map(c=>c)),s(t,["requests[]","content"],u)}const l=i(e,["config"]);l!=null&&Dr(l,t);const a=i(e,["model"]);return a!==void 0&&s(t,["requests[]","model"],D(n,a)),t}function Lr(n,e){const t={},o=i(e,["model"]);o!=null&&s(t,["_url","model"],D(n,o));const r=i(e,["contents"]);if(r!=null){let a=qe(n,r);Array.isArray(a)&&(a=a.map(u=>u)),s(t,["instances[]","content"],a)}const l=i(e,["config"]);return l!=null&&Ur(l,t),t}function Fr(n){const e={},t=i(n,["sdkHttpResponse"]);t!=null&&s(e,["sdkHttpResponse"],t);const o=i(n,["embeddings"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(a=>a)),s(e,["embeddings"],l)}const r=i(n,["metadata"]);return r!=null&&s(e,["metadata"],r),e}function Gr(n){const e={},t=i(n,["sdkHttpResponse"]);t!=null&&s(e,["sdkHttpResponse"],t);const o=i(n,["predictions[]","embeddings"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(a=>gr(a))),s(e,["embeddings"],l)}const r=i(n,["metadata"]);return r!=null&&s(e,["metadata"],r),e}function Vr(n){const e={},t=i(n,["endpoint"]);t!=null&&s(e,["name"],t);const o=i(n,["deployedModelId"]);return o!=null&&s(e,["deployedModelId"],o),e}function qr(n){const e={};if(i(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=i(n,["fileUri"]);t!=null&&s(e,["fileUri"],t);const o=i(n,["mimeType"]);return o!=null&&s(e,["mimeType"],o),e}function br(n){const e={},t=i(n,["id"]);t!=null&&s(e,["id"],t);const o=i(n,["args"]);o!=null&&s(e,["args"],o);const r=i(n,["name"]);if(r!=null&&s(e,["name"],r),i(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(i(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function Hr(n){const e={},t=i(n,["mode"]);t!=null&&s(e,["mode"],t);const o=i(n,["allowedFunctionNames"]);if(o!=null&&s(e,["allowedFunctionNames"],o),i(n,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function Br(n){const e={};if(i(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const t=i(n,["description"]);t!=null&&s(e,["description"],t);const o=i(n,["name"]);o!=null&&s(e,["name"],o);const r=i(n,["parameters"]);r!=null&&s(e,["parameters"],r);const l=i(n,["parametersJsonSchema"]);l!=null&&s(e,["parametersJsonSchema"],l);const a=i(n,["response"]);a!=null&&s(e,["response"],a);const u=i(n,["responseJsonSchema"]);return u!=null&&s(e,["responseJsonSchema"],u),e}function Jr(n,e,t){const o={},r=i(e,["systemInstruction"]);t!==void 0&&r!=null&&s(t,["systemInstruction"],Ie(J(r)));const l=i(e,["temperature"]);l!=null&&s(o,["temperature"],l);const a=i(e,["topP"]);a!=null&&s(o,["topP"],a);const u=i(e,["topK"]);u!=null&&s(o,["topK"],u);const c=i(e,["candidateCount"]);c!=null&&s(o,["candidateCount"],c);const d=i(e,["maxOutputTokens"]);d!=null&&s(o,["maxOutputTokens"],d);const f=i(e,["stopSequences"]);f!=null&&s(o,["stopSequences"],f);const p=i(e,["responseLogprobs"]);p!=null&&s(o,["responseLogprobs"],p);const m=i(e,["logprobs"]);m!=null&&s(o,["logprobs"],m);const h=i(e,["presencePenalty"]);h!=null&&s(o,["presencePenalty"],h);const y=i(e,["frequencyPenalty"]);y!=null&&s(o,["frequencyPenalty"],y);const T=i(e,["seed"]);T!=null&&s(o,["seed"],T);const I=i(e,["responseMimeType"]);I!=null&&s(o,["responseMimeType"],I);const S=i(e,["responseSchema"]);S!=null&&s(o,["responseSchema"],be(S));const _=i(e,["responseJsonSchema"]);if(_!=null&&s(o,["responseJsonSchema"],_),i(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(i(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const C=i(e,["safetySettings"]);if(t!==void 0&&C!=null){let L=C;Array.isArray(L)&&(L=L.map($=>Ul($))),s(t,["safetySettings"],L)}const A=i(e,["tools"]);if(t!==void 0&&A!=null){let L=de(A);Array.isArray(L)&&(L=L.map($=>bl(ue($)))),s(t,["tools"],L)}const N=i(e,["toolConfig"]);if(t!==void 0&&N!=null&&s(t,["toolConfig"],ql(N)),i(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const P=i(e,["cachedContent"]);t!==void 0&&P!=null&&s(t,["cachedContent"],Q(n,P));const w=i(e,["responseModalities"]);w!=null&&s(o,["responseModalities"],w);const b=i(e,["mediaResolution"]);b!=null&&s(o,["mediaResolution"],b);const R=i(e,["speechConfig"]);if(R!=null&&s(o,["speechConfig"],He(R)),i(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const U=i(e,["thinkingConfig"]);U!=null&&s(o,["thinkingConfig"],U);const q=i(e,["imageConfig"]);return q!=null&&s(o,["imageConfig"],gl(q)),o}function $r(n,e,t){const o={},r=i(e,["systemInstruction"]);t!==void 0&&r!=null&&s(t,["systemInstruction"],J(r));const l=i(e,["temperature"]);l!=null&&s(o,["temperature"],l);const a=i(e,["topP"]);a!=null&&s(o,["topP"],a);const u=i(e,["topK"]);u!=null&&s(o,["topK"],u);const c=i(e,["candidateCount"]);c!=null&&s(o,["candidateCount"],c);const d=i(e,["maxOutputTokens"]);d!=null&&s(o,["maxOutputTokens"],d);const f=i(e,["stopSequences"]);f!=null&&s(o,["stopSequences"],f);const p=i(e,["responseLogprobs"]);p!=null&&s(o,["responseLogprobs"],p);const m=i(e,["logprobs"]);m!=null&&s(o,["logprobs"],m);const h=i(e,["presencePenalty"]);h!=null&&s(o,["presencePenalty"],h);const y=i(e,["frequencyPenalty"]);y!=null&&s(o,["frequencyPenalty"],y);const T=i(e,["seed"]);T!=null&&s(o,["seed"],T);const I=i(e,["responseMimeType"]);I!=null&&s(o,["responseMimeType"],I);const S=i(e,["responseSchema"]);S!=null&&s(o,["responseSchema"],be(S));const _=i(e,["responseJsonSchema"]);_!=null&&s(o,["responseJsonSchema"],_);const C=i(e,["routingConfig"]);C!=null&&s(o,["routingConfig"],C);const A=i(e,["modelSelectionConfig"]);A!=null&&s(o,["modelConfig"],A);const N=i(e,["safetySettings"]);if(t!==void 0&&N!=null){let W=N;Array.isArray(W)&&(W=W.map(O=>O)),s(t,["safetySettings"],W)}const P=i(e,["tools"]);if(t!==void 0&&P!=null){let W=de(P);Array.isArray(W)&&(W=W.map(O=>Jt(ue(O)))),s(t,["tools"],W)}const w=i(e,["toolConfig"]);t!==void 0&&w!=null&&s(t,["toolConfig"],w);const b=i(e,["labels"]);t!==void 0&&b!=null&&s(t,["labels"],b);const R=i(e,["cachedContent"]);t!==void 0&&R!=null&&s(t,["cachedContent"],Q(n,R));const U=i(e,["responseModalities"]);U!=null&&s(o,["responseModalities"],U);const q=i(e,["mediaResolution"]);q!=null&&s(o,["mediaResolution"],q);const L=i(e,["speechConfig"]);L!=null&&s(o,["speechConfig"],Bt(He(L)));const $=i(e,["audioTimestamp"]);$!=null&&s(o,["audioTimestamp"],$);const ie=i(e,["thinkingConfig"]);ie!=null&&s(o,["thinkingConfig"],ie);const j=i(e,["imageConfig"]);return j!=null&&s(o,["imageConfig"],yl(j)),o}function lt(n,e){const t={},o=i(e,["model"]);o!=null&&s(t,["_url","model"],D(n,o));const r=i(e,["contents"]);if(r!=null){let a=K(r);Array.isArray(a)&&(a=a.map(u=>Ie(u))),s(t,["contents"],a)}const l=i(e,["config"]);return l!=null&&s(t,["generationConfig"],Jr(n,l,t)),t}function at(n,e){const t={},o=i(e,["model"]);o!=null&&s(t,["_url","model"],D(n,o));const r=i(e,["contents"]);if(r!=null){let a=K(r);Array.isArray(a)&&(a=a.map(u=>u)),s(t,["contents"],a)}const l=i(e,["config"]);return l!=null&&s(t,["generationConfig"],$r(n,l,t)),t}function ut(n){const e={},t=i(n,["sdkHttpResponse"]);t!=null&&s(e,["sdkHttpResponse"],t);const o=i(n,["candidates"]);if(o!=null){let c=o;Array.isArray(c)&&(c=c.map(d=>fr(d))),s(e,["candidates"],c)}const r=i(n,["modelVersion"]);r!=null&&s(e,["modelVersion"],r);const l=i(n,["promptFeedback"]);l!=null&&s(e,["promptFeedback"],l);const a=i(n,["responseId"]);a!=null&&s(e,["responseId"],a);const u=i(n,["usageMetadata"]);return u!=null&&s(e,["usageMetadata"],u),e}function dt(n){const e={},t=i(n,["sdkHttpResponse"]);t!=null&&s(e,["sdkHttpResponse"],t);const o=i(n,["candidates"]);if(o!=null){let d=o;Array.isArray(d)&&(d=d.map(f=>f)),s(e,["candidates"],d)}const r=i(n,["createTime"]);r!=null&&s(e,["createTime"],r);const l=i(n,["modelVersion"]);l!=null&&s(e,["modelVersion"],l);const a=i(n,["promptFeedback"]);a!=null&&s(e,["promptFeedback"],a);const u=i(n,["responseId"]);u!=null&&s(e,["responseId"],u);const c=i(n,["usageMetadata"]);return c!=null&&s(e,["usageMetadata"],c),e}function Yr(n,e){const t={};if(i(n,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(i(n,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const o=i(n,["numberOfImages"]);e!==void 0&&o!=null&&s(e,["parameters","sampleCount"],o);const r=i(n,["aspectRatio"]);e!==void 0&&r!=null&&s(e,["parameters","aspectRatio"],r);const l=i(n,["guidanceScale"]);if(e!==void 0&&l!=null&&s(e,["parameters","guidanceScale"],l),i(n,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const a=i(n,["safetyFilterLevel"]);e!==void 0&&a!=null&&s(e,["parameters","safetySetting"],a);const u=i(n,["personGeneration"]);e!==void 0&&u!=null&&s(e,["parameters","personGeneration"],u);const c=i(n,["includeSafetyAttributes"]);e!==void 0&&c!=null&&s(e,["parameters","includeSafetyAttributes"],c);const d=i(n,["includeRaiReason"]);e!==void 0&&d!=null&&s(e,["parameters","includeRaiReason"],d);const f=i(n,["language"]);e!==void 0&&f!=null&&s(e,["parameters","language"],f);const p=i(n,["outputMimeType"]);e!==void 0&&p!=null&&s(e,["parameters","outputOptions","mimeType"],p);const m=i(n,["outputCompressionQuality"]);if(e!==void 0&&m!=null&&s(e,["parameters","outputOptions","compressionQuality"],m),i(n,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(i(n,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const h=i(n,["imageSize"]);if(e!==void 0&&h!=null&&s(e,["parameters","sampleImageSize"],h),i(n,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return t}function Wr(n,e){const t={},o=i(n,["outputGcsUri"]);e!==void 0&&o!=null&&s(e,["parameters","storageUri"],o);const r=i(n,["negativePrompt"]);e!==void 0&&r!=null&&s(e,["parameters","negativePrompt"],r);const l=i(n,["numberOfImages"]);e!==void 0&&l!=null&&s(e,["parameters","sampleCount"],l);const a=i(n,["aspectRatio"]);e!==void 0&&a!=null&&s(e,["parameters","aspectRatio"],a);const u=i(n,["guidanceScale"]);e!==void 0&&u!=null&&s(e,["parameters","guidanceScale"],u);const c=i(n,["seed"]);e!==void 0&&c!=null&&s(e,["parameters","seed"],c);const d=i(n,["safetyFilterLevel"]);e!==void 0&&d!=null&&s(e,["parameters","safetySetting"],d);const f=i(n,["personGeneration"]);e!==void 0&&f!=null&&s(e,["parameters","personGeneration"],f);const p=i(n,["includeSafetyAttributes"]);e!==void 0&&p!=null&&s(e,["parameters","includeSafetyAttributes"],p);const m=i(n,["includeRaiReason"]);e!==void 0&&m!=null&&s(e,["parameters","includeRaiReason"],m);const h=i(n,["language"]);e!==void 0&&h!=null&&s(e,["parameters","language"],h);const y=i(n,["outputMimeType"]);e!==void 0&&y!=null&&s(e,["parameters","outputOptions","mimeType"],y);const T=i(n,["outputCompressionQuality"]);e!==void 0&&T!=null&&s(e,["parameters","outputOptions","compressionQuality"],T);const I=i(n,["addWatermark"]);e!==void 0&&I!=null&&s(e,["parameters","addWatermark"],I);const S=i(n,["labels"]);e!==void 0&&S!=null&&s(e,["labels"],S);const _=i(n,["imageSize"]);e!==void 0&&_!=null&&s(e,["parameters","sampleImageSize"],_);const C=i(n,["enhancePrompt"]);return e!==void 0&&C!=null&&s(e,["parameters","enhancePrompt"],C),t}function Kr(n,e){const t={},o=i(e,["model"]);o!=null&&s(t,["_url","model"],D(n,o));const r=i(e,["prompt"]);r!=null&&s(t,["instances[0]","prompt"],r);const l=i(e,["config"]);return l!=null&&Yr(l,t),t}function zr(n,e){const t={},o=i(e,["model"]);o!=null&&s(t,["_url","model"],D(n,o));const r=i(e,["prompt"]);r!=null&&s(t,["instances[0]","prompt"],r);const l=i(e,["config"]);return l!=null&&Wr(l,t),t}function Or(n){const e={},t=i(n,["sdkHttpResponse"]);t!=null&&s(e,["sdkHttpResponse"],t);const o=i(n,["predictions"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(a=>ll(a))),s(e,["generatedImages"],l)}const r=i(n,["positivePromptSafetyAttributes"]);return r!=null&&s(e,["positivePromptSafetyAttributes"],bt(r)),e}function Zr(n){const e={},t=i(n,["sdkHttpResponse"]);t!=null&&s(e,["sdkHttpResponse"],t);const o=i(n,["predictions"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(a=>ve(a))),s(e,["generatedImages"],l)}const r=i(n,["positivePromptSafetyAttributes"]);return r!=null&&s(e,["positivePromptSafetyAttributes"],Ht(r)),e}function Xr(n,e){const t={},o=i(n,["numberOfVideos"]);if(e!==void 0&&o!=null&&s(e,["parameters","sampleCount"],o),i(n,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(i(n,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const r=i(n,["durationSeconds"]);if(e!==void 0&&r!=null&&s(e,["parameters","durationSeconds"],r),i(n,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const l=i(n,["aspectRatio"]);e!==void 0&&l!=null&&s(e,["parameters","aspectRatio"],l);const a=i(n,["resolution"]);e!==void 0&&a!=null&&s(e,["parameters","resolution"],a);const u=i(n,["personGeneration"]);if(e!==void 0&&u!=null&&s(e,["parameters","personGeneration"],u),i(n,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const c=i(n,["negativePrompt"]);e!==void 0&&c!=null&&s(e,["parameters","negativePrompt"],c);const d=i(n,["enhancePrompt"]);if(e!==void 0&&d!=null&&s(e,["parameters","enhancePrompt"],d),i(n,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");const f=i(n,["lastFrame"]);e!==void 0&&f!=null&&s(e,["instances[0]","lastFrame"],Se(f));const p=i(n,["referenceImages"]);if(e!==void 0&&p!=null){let m=p;Array.isArray(m)&&(m=m.map(h=>jl(h))),s(e,["instances[0]","referenceImages"],m)}if(i(n,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(i(n,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return t}function Qr(n,e){const t={},o=i(n,["numberOfVideos"]);e!==void 0&&o!=null&&s(e,["parameters","sampleCount"],o);const r=i(n,["outputGcsUri"]);e!==void 0&&r!=null&&s(e,["parameters","storageUri"],r);const l=i(n,["fps"]);e!==void 0&&l!=null&&s(e,["parameters","fps"],l);const a=i(n,["durationSeconds"]);e!==void 0&&a!=null&&s(e,["parameters","durationSeconds"],a);const u=i(n,["seed"]);e!==void 0&&u!=null&&s(e,["parameters","seed"],u);const c=i(n,["aspectRatio"]);e!==void 0&&c!=null&&s(e,["parameters","aspectRatio"],c);const d=i(n,["resolution"]);e!==void 0&&d!=null&&s(e,["parameters","resolution"],d);const f=i(n,["personGeneration"]);e!==void 0&&f!=null&&s(e,["parameters","personGeneration"],f);const p=i(n,["pubsubTopic"]);e!==void 0&&p!=null&&s(e,["parameters","pubsubTopic"],p);const m=i(n,["negativePrompt"]);e!==void 0&&m!=null&&s(e,["parameters","negativePrompt"],m);const h=i(n,["enhancePrompt"]);e!==void 0&&h!=null&&s(e,["parameters","enhancePrompt"],h);const y=i(n,["generateAudio"]);e!==void 0&&y!=null&&s(e,["parameters","generateAudio"],y);const T=i(n,["lastFrame"]);e!==void 0&&T!=null&&s(e,["instances[0]","lastFrame"],z(T));const I=i(n,["referenceImages"]);if(e!==void 0&&I!=null){let C=I;Array.isArray(C)&&(C=C.map(A=>ea(A))),s(e,["instances[0]","referenceImages"],C)}const S=i(n,["mask"]);e!==void 0&&S!=null&&s(e,["instances[0]","mask"],Ql(S));const _=i(n,["compressionQuality"]);return e!==void 0&&_!=null&&s(e,["parameters","compressionQuality"],_),t}function jr(n){const e={},t=i(n,["name"]);t!=null&&s(e,["name"],t);const o=i(n,["metadata"]);o!=null&&s(e,["metadata"],o);const r=i(n,["done"]);r!=null&&s(e,["done"],r);const l=i(n,["error"]);l!=null&&s(e,["error"],l);const a=i(n,["response","generateVideoResponse"]);return a!=null&&s(e,["response"],ol(a)),e}function el(n){const e={},t=i(n,["name"]);t!=null&&s(e,["name"],t);const o=i(n,["metadata"]);o!=null&&s(e,["metadata"],o);const r=i(n,["done"]);r!=null&&s(e,["done"],r);const l=i(n,["error"]);l!=null&&s(e,["error"],l);const a=i(n,["response"]);return a!=null&&s(e,["response"],il(a)),e}function nl(n,e){const t={},o=i(e,["model"]);o!=null&&s(t,["_url","model"],D(n,o));const r=i(e,["prompt"]);r!=null&&s(t,["instances[0]","prompt"],r);const l=i(e,["image"]);l!=null&&s(t,["instances[0]","image"],Se(l));const a=i(e,["video"]);a!=null&&s(t,["instances[0]","video"],$t(a));const u=i(e,["source"]);u!=null&&sl(u,t);const c=i(e,["config"]);return c!=null&&Xr(c,t),t}function tl(n,e){const t={},o=i(e,["model"]);o!=null&&s(t,["_url","model"],D(n,o));const r=i(e,["prompt"]);r!=null&&s(t,["instances[0]","prompt"],r);const l=i(e,["image"]);l!=null&&s(t,["instances[0]","image"],z(l));const a=i(e,["video"]);a!=null&&s(t,["instances[0]","video"],Yt(a));const u=i(e,["source"]);u!=null&&rl(u,t);const c=i(e,["config"]);return c!=null&&Qr(c,t),t}function ol(n){const e={},t=i(n,["generatedSamples"]);if(t!=null){let l=t;Array.isArray(l)&&(l=l.map(a=>ul(a))),s(e,["generatedVideos"],l)}const o=i(n,["raiMediaFilteredCount"]);o!=null&&s(e,["raiMediaFilteredCount"],o);const r=i(n,["raiMediaFilteredReasons"]);return r!=null&&s(e,["raiMediaFilteredReasons"],r),e}function il(n){const e={},t=i(n,["videos"]);if(t!=null){let l=t;Array.isArray(l)&&(l=l.map(a=>dl(a))),s(e,["generatedVideos"],l)}const o=i(n,["raiMediaFilteredCount"]);o!=null&&s(e,["raiMediaFilteredCount"],o);const r=i(n,["raiMediaFilteredReasons"]);return r!=null&&s(e,["raiMediaFilteredReasons"],r),e}function sl(n,e){const t={},o=i(n,["prompt"]);e!==void 0&&o!=null&&s(e,["instances[0]","prompt"],o);const r=i(n,["image"]);e!==void 0&&r!=null&&s(e,["instances[0]","image"],Se(r));const l=i(n,["video"]);return e!==void 0&&l!=null&&s(e,["instances[0]","video"],$t(l)),t}function rl(n,e){const t={},o=i(n,["prompt"]);e!==void 0&&o!=null&&s(e,["instances[0]","prompt"],o);const r=i(n,["image"]);e!==void 0&&r!=null&&s(e,["instances[0]","image"],z(r));const l=i(n,["video"]);return e!==void 0&&l!=null&&s(e,["instances[0]","video"],Yt(l)),t}function ll(n){const e={},t=i(n,["_self"]);t!=null&&s(e,["image"],Tl(t));const o=i(n,["raiFilteredReason"]);o!=null&&s(e,["raiFilteredReason"],o);const r=i(n,["_self"]);return r!=null&&s(e,["safetyAttributes"],bt(r)),e}function ve(n){const e={},t=i(n,["_self"]);t!=null&&s(e,["image"],qt(t));const o=i(n,["raiFilteredReason"]);o!=null&&s(e,["raiFilteredReason"],o);const r=i(n,["_self"]);r!=null&&s(e,["safetyAttributes"],Ht(r));const l=i(n,["prompt"]);return l!=null&&s(e,["enhancedPrompt"],l),e}function al(n){const e={},t=i(n,["_self"]);t!=null&&s(e,["mask"],qt(t));const o=i(n,["labels"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(l=>l)),s(e,["labels"],r)}return e}function ul(n){const e={},t=i(n,["video"]);return t!=null&&s(e,["video"],Zl(t)),e}function dl(n){const e={},t=i(n,["_self"]);return t!=null&&s(e,["video"],Xl(t)),e}function cl(n){const e={},t=i(n,["modelSelectionConfig"]);t!=null&&s(e,["modelConfig"],t);const o=i(n,["responseJsonSchema"]);o!=null&&s(e,["responseJsonSchema"],o);const r=i(n,["audioTimestamp"]);r!=null&&s(e,["audioTimestamp"],r);const l=i(n,["candidateCount"]);l!=null&&s(e,["candidateCount"],l);const a=i(n,["enableAffectiveDialog"]);a!=null&&s(e,["enableAffectiveDialog"],a);const u=i(n,["frequencyPenalty"]);u!=null&&s(e,["frequencyPenalty"],u);const c=i(n,["logprobs"]);c!=null&&s(e,["logprobs"],c);const d=i(n,["maxOutputTokens"]);d!=null&&s(e,["maxOutputTokens"],d);const f=i(n,["mediaResolution"]);f!=null&&s(e,["mediaResolution"],f);const p=i(n,["presencePenalty"]);p!=null&&s(e,["presencePenalty"],p);const m=i(n,["responseLogprobs"]);m!=null&&s(e,["responseLogprobs"],m);const h=i(n,["responseMimeType"]);h!=null&&s(e,["responseMimeType"],h);const y=i(n,["responseModalities"]);y!=null&&s(e,["responseModalities"],y);const T=i(n,["responseSchema"]);T!=null&&s(e,["responseSchema"],T);const I=i(n,["routingConfig"]);I!=null&&s(e,["routingConfig"],I);const S=i(n,["seed"]);S!=null&&s(e,["seed"],S);const _=i(n,["speechConfig"]);_!=null&&s(e,["speechConfig"],Bt(_));const C=i(n,["stopSequences"]);C!=null&&s(e,["stopSequences"],C);const A=i(n,["temperature"]);A!=null&&s(e,["temperature"],A);const N=i(n,["thinkingConfig"]);N!=null&&s(e,["thinkingConfig"],N);const P=i(n,["topK"]);P!=null&&s(e,["topK"],P);const w=i(n,["topP"]);if(w!=null&&s(e,["topP"],w),i(n,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function fl(n,e){const t={},o=i(e,["model"]);return o!=null&&s(t,["_url","name"],D(n,o)),t}function pl(n,e){const t={},o=i(e,["model"]);return o!=null&&s(t,["_url","name"],D(n,o)),t}function ml(n){const e={};if(i(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=i(n,["enableWidget"]);return t!=null&&s(e,["enableWidget"],t),e}function hl(n){const e={};if(i(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(i(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=i(n,["timeRangeFilter"]);return t!=null&&s(e,["timeRangeFilter"],t),e}function gl(n){const e={},t=i(n,["aspectRatio"]);t!=null&&s(e,["aspectRatio"],t);const o=i(n,["imageSize"]);if(o!=null&&s(e,["imageSize"],o),i(n,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(i(n,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function yl(n){const e={},t=i(n,["aspectRatio"]);t!=null&&s(e,["aspectRatio"],t);const o=i(n,["imageSize"]);o!=null&&s(e,["imageSize"],o);const r=i(n,["outputMimeType"]);r!=null&&s(e,["imageOutputOptions","mimeType"],r);const l=i(n,["outputCompressionQuality"]);return l!=null&&s(e,["imageOutputOptions","compressionQuality"],l),e}function Tl(n){const e={},t=i(n,["bytesBase64Encoded"]);t!=null&&s(e,["imageBytes"],te(t));const o=i(n,["mimeType"]);return o!=null&&s(e,["mimeType"],o),e}function qt(n){const e={},t=i(n,["gcsUri"]);t!=null&&s(e,["gcsUri"],t);const o=i(n,["bytesBase64Encoded"]);o!=null&&s(e,["imageBytes"],te(o));const r=i(n,["mimeType"]);return r!=null&&s(e,["mimeType"],r),e}function Se(n){const e={};if(i(n,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const t=i(n,["imageBytes"]);t!=null&&s(e,["bytesBase64Encoded"],te(t));const o=i(n,["mimeType"]);return o!=null&&s(e,["mimeType"],o),e}function z(n){const e={},t=i(n,["gcsUri"]);t!=null&&s(e,["gcsUri"],t);const o=i(n,["imageBytes"]);o!=null&&s(e,["bytesBase64Encoded"],te(o));const r=i(n,["mimeType"]);return r!=null&&s(e,["mimeType"],r),e}function El(n,e,t){const o={},r=i(e,["pageSize"]);t!==void 0&&r!=null&&s(t,["_query","pageSize"],r);const l=i(e,["pageToken"]);t!==void 0&&l!=null&&s(t,["_query","pageToken"],l);const a=i(e,["filter"]);t!==void 0&&a!=null&&s(t,["_query","filter"],a);const u=i(e,["queryBase"]);return t!==void 0&&u!=null&&s(t,["_url","models_url"],Mt(n,u)),o}function Cl(n,e,t){const o={},r=i(e,["pageSize"]);t!==void 0&&r!=null&&s(t,["_query","pageSize"],r);const l=i(e,["pageToken"]);t!==void 0&&l!=null&&s(t,["_query","pageToken"],l);const a=i(e,["filter"]);t!==void 0&&a!=null&&s(t,["_query","filter"],a);const u=i(e,["queryBase"]);return t!==void 0&&u!=null&&s(t,["_url","models_url"],Mt(n,u)),o}function _l(n,e){const t={},o=i(e,["config"]);return o!=null&&El(n,o,t),t}function Il(n,e){const t={},o=i(e,["config"]);return o!=null&&Cl(n,o,t),t}function vl(n){const e={},t=i(n,["sdkHttpResponse"]);t!=null&&s(e,["sdkHttpResponse"],t);const o=i(n,["nextPageToken"]);o!=null&&s(e,["nextPageToken"],o);const r=i(n,["_self"]);if(r!=null){let l=Dt(r);Array.isArray(l)&&(l=l.map(a=>De(a))),s(e,["models"],l)}return e}function Sl(n){const e={},t=i(n,["sdkHttpResponse"]);t!=null&&s(e,["sdkHttpResponse"],t);const o=i(n,["nextPageToken"]);o!=null&&s(e,["nextPageToken"],o);const r=i(n,["_self"]);if(r!=null){let l=Dt(r);Array.isArray(l)&&(l=l.map(a=>Ue(a))),s(e,["models"],l)}return e}function Al(n){const e={},t=i(n,["maskMode"]);t!=null&&s(e,["maskMode"],t);const o=i(n,["segmentationClasses"]);o!=null&&s(e,["maskClasses"],o);const r=i(n,["maskDilation"]);return r!=null&&s(e,["dilation"],r),e}function De(n){const e={},t=i(n,["name"]);t!=null&&s(e,["name"],t);const o=i(n,["displayName"]);o!=null&&s(e,["displayName"],o);const r=i(n,["description"]);r!=null&&s(e,["description"],r);const l=i(n,["version"]);l!=null&&s(e,["version"],l);const a=i(n,["_self"]);a!=null&&s(e,["tunedModelInfo"],Hl(a));const u=i(n,["inputTokenLimit"]);u!=null&&s(e,["inputTokenLimit"],u);const c=i(n,["outputTokenLimit"]);c!=null&&s(e,["outputTokenLimit"],c);const d=i(n,["supportedGenerationMethods"]);d!=null&&s(e,["supportedActions"],d);const f=i(n,["temperature"]);f!=null&&s(e,["temperature"],f);const p=i(n,["maxTemperature"]);p!=null&&s(e,["maxTemperature"],p);const m=i(n,["topP"]);m!=null&&s(e,["topP"],m);const h=i(n,["topK"]);h!=null&&s(e,["topK"],h);const y=i(n,["thinking"]);return y!=null&&s(e,["thinking"],y),e}function Ue(n){const e={},t=i(n,["name"]);t!=null&&s(e,["name"],t);const o=i(n,["displayName"]);o!=null&&s(e,["displayName"],o);const r=i(n,["description"]);r!=null&&s(e,["description"],r);const l=i(n,["versionId"]);l!=null&&s(e,["version"],l);const a=i(n,["deployedModels"]);if(a!=null){let p=a;Array.isArray(p)&&(p=p.map(m=>Vr(m))),s(e,["endpoints"],p)}const u=i(n,["labels"]);u!=null&&s(e,["labels"],u);const c=i(n,["_self"]);c!=null&&s(e,["tunedModelInfo"],Bl(c));const d=i(n,["defaultCheckpointId"]);d!=null&&s(e,["defaultCheckpointId"],d);const f=i(n,["checkpoints"]);if(f!=null){let p=f;Array.isArray(p)&&(p=p.map(m=>m)),s(e,["checkpoints"],p)}return e}function Rl(n){const e={},t=i(n,["mediaResolution"]);t!=null&&s(e,["mediaResolution"],t);const o=i(n,["codeExecutionResult"]);o!=null&&s(e,["codeExecutionResult"],o);const r=i(n,["executableCode"]);r!=null&&s(e,["executableCode"],r);const l=i(n,["fileData"]);l!=null&&s(e,["fileData"],qr(l));const a=i(n,["functionCall"]);a!=null&&s(e,["functionCall"],br(a));const u=i(n,["functionResponse"]);u!=null&&s(e,["functionResponse"],u);const c=i(n,["inlineData"]);c!=null&&s(e,["inlineData"],cr(c));const d=i(n,["text"]);d!=null&&s(e,["text"],d);const f=i(n,["thought"]);f!=null&&s(e,["thought"],f);const p=i(n,["thoughtSignature"]);p!=null&&s(e,["thoughtSignature"],p);const m=i(n,["videoMetadata"]);return m!=null&&s(e,["videoMetadata"],m),e}function xl(n){const e={},t=i(n,["productImage"]);return t!=null&&s(e,["image"],z(t)),e}function Nl(n,e){const t={},o=i(n,["numberOfImages"]);e!==void 0&&o!=null&&s(e,["parameters","sampleCount"],o);const r=i(n,["baseSteps"]);e!==void 0&&r!=null&&s(e,["parameters","baseSteps"],r);const l=i(n,["outputGcsUri"]);e!==void 0&&l!=null&&s(e,["parameters","storageUri"],l);const a=i(n,["seed"]);e!==void 0&&a!=null&&s(e,["parameters","seed"],a);const u=i(n,["safetyFilterLevel"]);e!==void 0&&u!=null&&s(e,["parameters","safetySetting"],u);const c=i(n,["personGeneration"]);e!==void 0&&c!=null&&s(e,["parameters","personGeneration"],c);const d=i(n,["addWatermark"]);e!==void 0&&d!=null&&s(e,["parameters","addWatermark"],d);const f=i(n,["outputMimeType"]);e!==void 0&&f!=null&&s(e,["parameters","outputOptions","mimeType"],f);const p=i(n,["outputCompressionQuality"]);e!==void 0&&p!=null&&s(e,["parameters","outputOptions","compressionQuality"],p);const m=i(n,["enhancePrompt"]);e!==void 0&&m!=null&&s(e,["parameters","enhancePrompt"],m);const h=i(n,["labels"]);return e!==void 0&&h!=null&&s(e,["labels"],h),t}function Pl(n,e){const t={},o=i(e,["model"]);o!=null&&s(t,["_url","model"],D(n,o));const r=i(e,["source"]);r!=null&&Ml(r,t);const l=i(e,["config"]);return l!=null&&Nl(l,t),t}function wl(n){const e={},t=i(n,["predictions"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(r=>ve(r))),s(e,["generatedImages"],o)}return e}function Ml(n,e){const t={},o=i(n,["prompt"]);e!==void 0&&o!=null&&s(e,["instances[0]","prompt"],o);const r=i(n,["personImage"]);e!==void 0&&r!=null&&s(e,["instances[0]","personImage","image"],z(r));const l=i(n,["productImages"]);if(e!==void 0&&l!=null){let a=l;Array.isArray(a)&&(a=a.map(u=>xl(u))),s(e,["instances[0]","productImages"],a)}return t}function Dl(n){const e={},t=i(n,["referenceImage"]);t!=null&&s(e,["referenceImage"],z(t));const o=i(n,["referenceId"]);o!=null&&s(e,["referenceId"],o);const r=i(n,["referenceType"]);r!=null&&s(e,["referenceType"],r);const l=i(n,["maskImageConfig"]);l!=null&&s(e,["maskImageConfig"],Al(l));const a=i(n,["controlImageConfig"]);a!=null&&s(e,["controlImageConfig"],Tr(a));const u=i(n,["styleImageConfig"]);u!=null&&s(e,["styleImageConfig"],u);const c=i(n,["subjectImageConfig"]);return c!=null&&s(e,["subjectImageConfig"],c),e}function bt(n){const e={},t=i(n,["safetyAttributes","categories"]);t!=null&&s(e,["categories"],t);const o=i(n,["safetyAttributes","scores"]);o!=null&&s(e,["scores"],o);const r=i(n,["contentType"]);return r!=null&&s(e,["contentType"],r),e}function Ht(n){const e={},t=i(n,["safetyAttributes","categories"]);t!=null&&s(e,["categories"],t);const o=i(n,["safetyAttributes","scores"]);o!=null&&s(e,["scores"],o);const r=i(n,["contentType"]);return r!=null&&s(e,["contentType"],r),e}function Ul(n){const e={},t=i(n,["category"]);if(t!=null&&s(e,["category"],t),i(n,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const o=i(n,["threshold"]);return o!=null&&s(e,["threshold"],o),e}function kl(n){const e={},t=i(n,["image"]);return t!=null&&s(e,["image"],z(t)),e}function Ll(n,e){const t={},o=i(n,["mode"]);e!==void 0&&o!=null&&s(e,["parameters","mode"],o);const r=i(n,["maxPredictions"]);e!==void 0&&r!=null&&s(e,["parameters","maxPredictions"],r);const l=i(n,["confidenceThreshold"]);e!==void 0&&l!=null&&s(e,["parameters","confidenceThreshold"],l);const a=i(n,["maskDilation"]);e!==void 0&&a!=null&&s(e,["parameters","maskDilation"],a);const u=i(n,["binaryColorThreshold"]);e!==void 0&&u!=null&&s(e,["parameters","binaryColorThreshold"],u);const c=i(n,["labels"]);return e!==void 0&&c!=null&&s(e,["labels"],c),t}function Fl(n,e){const t={},o=i(e,["model"]);o!=null&&s(t,["_url","model"],D(n,o));const r=i(e,["source"]);r!=null&&Vl(r,t);const l=i(e,["config"]);return l!=null&&Ll(l,t),t}function Gl(n){const e={},t=i(n,["predictions"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(r=>al(r))),s(e,["generatedMasks"],o)}return e}function Vl(n,e){const t={},o=i(n,["prompt"]);e!==void 0&&o!=null&&s(e,["instances[0]","prompt"],o);const r=i(n,["image"]);e!==void 0&&r!=null&&s(e,["instances[0]","image"],z(r));const l=i(n,["scribbleImage"]);return e!==void 0&&l!=null&&s(e,["instances[0]","scribble"],kl(l)),t}function Bt(n){const e={},t=i(n,["languageCode"]);t!=null&&s(e,["languageCode"],t);const o=i(n,["voiceConfig"]);if(o!=null&&s(e,["voiceConfig"],o),i(n,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");return e}function ql(n){const e={},t=i(n,["functionCallingConfig"]);t!=null&&s(e,["functionCallingConfig"],Hr(t));const o=i(n,["retrievalConfig"]);return o!=null&&s(e,["retrievalConfig"],o),e}function bl(n){const e={},t=i(n,["functionDeclarations"]);if(t!=null){let f=t;Array.isArray(f)&&(f=f.map(p=>p)),s(e,["functionDeclarations"],f)}if(i(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const o=i(n,["googleSearchRetrieval"]);o!=null&&s(e,["googleSearchRetrieval"],o);const r=i(n,["computerUse"]);r!=null&&s(e,["computerUse"],r);const l=i(n,["fileSearch"]);l!=null&&s(e,["fileSearch"],l);const a=i(n,["codeExecution"]);if(a!=null&&s(e,["codeExecution"],a),i(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const u=i(n,["googleMaps"]);u!=null&&s(e,["googleMaps"],ml(u));const c=i(n,["googleSearch"]);c!=null&&s(e,["googleSearch"],hl(c));const d=i(n,["urlContext"]);return d!=null&&s(e,["urlContext"],d),e}function Jt(n){const e={},t=i(n,["functionDeclarations"]);if(t!=null){let p=t;Array.isArray(p)&&(p=p.map(m=>Br(m))),s(e,["functionDeclarations"],p)}const o=i(n,["retrieval"]);o!=null&&s(e,["retrieval"],o);const r=i(n,["googleSearchRetrieval"]);r!=null&&s(e,["googleSearchRetrieval"],r);const l=i(n,["computerUse"]);if(l!=null&&s(e,["computerUse"],l),i(n,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const a=i(n,["codeExecution"]);a!=null&&s(e,["codeExecution"],a);const u=i(n,["enterpriseWebSearch"]);u!=null&&s(e,["enterpriseWebSearch"],u);const c=i(n,["googleMaps"]);c!=null&&s(e,["googleMaps"],c);const d=i(n,["googleSearch"]);d!=null&&s(e,["googleSearch"],d);const f=i(n,["urlContext"]);return f!=null&&s(e,["urlContext"],f),e}function Hl(n){const e={},t=i(n,["baseModel"]);t!=null&&s(e,["baseModel"],t);const o=i(n,["createTime"]);o!=null&&s(e,["createTime"],o);const r=i(n,["updateTime"]);return r!=null&&s(e,["updateTime"],r),e}function Bl(n){const e={},t=i(n,["labels","google-vertex-llm-tuning-base-model-id"]);t!=null&&s(e,["baseModel"],t);const o=i(n,["createTime"]);o!=null&&s(e,["createTime"],o);const r=i(n,["updateTime"]);return r!=null&&s(e,["updateTime"],r),e}function Jl(n,e){const t={},o=i(n,["displayName"]);e!==void 0&&o!=null&&s(e,["displayName"],o);const r=i(n,["description"]);e!==void 0&&r!=null&&s(e,["description"],r);const l=i(n,["defaultCheckpointId"]);return e!==void 0&&l!=null&&s(e,["defaultCheckpointId"],l),t}function $l(n,e){const t={},o=i(n,["displayName"]);e!==void 0&&o!=null&&s(e,["displayName"],o);const r=i(n,["description"]);e!==void 0&&r!=null&&s(e,["description"],r);const l=i(n,["defaultCheckpointId"]);return e!==void 0&&l!=null&&s(e,["defaultCheckpointId"],l),t}function Yl(n,e){const t={},o=i(e,["model"]);o!=null&&s(t,["_url","name"],D(n,o));const r=i(e,["config"]);return r!=null&&Jl(r,t),t}function Wl(n,e){const t={},o=i(e,["model"]);o!=null&&s(t,["_url","model"],D(n,o));const r=i(e,["config"]);return r!=null&&$l(r,t),t}function Kl(n,e){const t={},o=i(n,["outputGcsUri"]);e!==void 0&&o!=null&&s(e,["parameters","storageUri"],o);const r=i(n,["safetyFilterLevel"]);e!==void 0&&r!=null&&s(e,["parameters","safetySetting"],r);const l=i(n,["personGeneration"]);e!==void 0&&l!=null&&s(e,["parameters","personGeneration"],l);const a=i(n,["includeRaiReason"]);e!==void 0&&a!=null&&s(e,["parameters","includeRaiReason"],a);const u=i(n,["outputMimeType"]);e!==void 0&&u!=null&&s(e,["parameters","outputOptions","mimeType"],u);const c=i(n,["outputCompressionQuality"]);e!==void 0&&c!=null&&s(e,["parameters","outputOptions","compressionQuality"],c);const d=i(n,["enhanceInputImage"]);e!==void 0&&d!=null&&s(e,["parameters","upscaleConfig","enhanceInputImage"],d);const f=i(n,["imagePreservationFactor"]);e!==void 0&&f!=null&&s(e,["parameters","upscaleConfig","imagePreservationFactor"],f);const p=i(n,["labels"]);e!==void 0&&p!=null&&s(e,["labels"],p);const m=i(n,["numberOfImages"]);e!==void 0&&m!=null&&s(e,["parameters","sampleCount"],m);const h=i(n,["mode"]);return e!==void 0&&h!=null&&s(e,["parameters","mode"],h),t}function zl(n,e){const t={},o=i(e,["model"]);o!=null&&s(t,["_url","model"],D(n,o));const r=i(e,["image"]);r!=null&&s(t,["instances[0]","image"],z(r));const l=i(e,["upscaleFactor"]);l!=null&&s(t,["parameters","upscaleConfig","upscaleFactor"],l);const a=i(e,["config"]);return a!=null&&Kl(a,t),t}function Ol(n){const e={},t=i(n,["sdkHttpResponse"]);t!=null&&s(e,["sdkHttpResponse"],t);const o=i(n,["predictions"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(l=>ve(l))),s(e,["generatedImages"],r)}return e}function Zl(n){const e={},t=i(n,["uri"]);t!=null&&s(e,["uri"],t);const o=i(n,["encodedVideo"]);o!=null&&s(e,["videoBytes"],te(o));const r=i(n,["encoding"]);return r!=null&&s(e,["mimeType"],r),e}function Xl(n){const e={},t=i(n,["gcsUri"]);t!=null&&s(e,["uri"],t);const o=i(n,["bytesBase64Encoded"]);o!=null&&s(e,["videoBytes"],te(o));const r=i(n,["mimeType"]);return r!=null&&s(e,["mimeType"],r),e}function Ql(n){const e={},t=i(n,["image"]);t!=null&&s(e,["_self"],z(t));const o=i(n,["maskMode"]);return o!=null&&s(e,["maskMode"],o),e}function jl(n){const e={},t=i(n,["image"]);t!=null&&s(e,["image"],Se(t));const o=i(n,["referenceType"]);return o!=null&&s(e,["referenceType"],o),e}function ea(n){const e={},t=i(n,["image"]);t!=null&&s(e,["image"],z(t));const o=i(n,["referenceType"]);return o!=null&&s(e,["referenceType"],o),e}function $t(n){const e={},t=i(n,["uri"]);t!=null&&s(e,["uri"],t);const o=i(n,["videoBytes"]);o!=null&&s(e,["encodedVideo"],te(o));const r=i(n,["mimeType"]);return r!=null&&s(e,["encoding"],r),e}function Yt(n){const e={},t=i(n,["uri"]);t!=null&&s(e,["gcsUri"],t);const o=i(n,["videoBytes"]);o!=null&&s(e,["bytesBase64Encoded"],te(o));const r=i(n,["mimeType"]);return r!=null&&s(e,["mimeType"],r),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const na="Content-Type",ta="X-Server-Timeout",oa="User-Agent",ke="x-goog-api-client",ia="1.30.0",sa=`google-genai-sdk/${ia}`,ra="v1beta1",la="v1beta",ct=/^\s*data: (.*)(?:\n\n|\r\r|\r\n\r\n)/;class aa{constructor(e){var t,o;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});const r={};this.clientOptions.vertexai?(r.apiVersion=(t=this.clientOptions.apiVersion)!==null&&t!==void 0?t:ra,r.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(r.apiVersion=(o=this.clientOptions.apiVersion)!==null&&o!==void 0?o:la,r.baseUrl="https://generativelanguage.googleapis.com/"),r.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=r,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(r,e.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const o=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&o.push(e.apiVersion),o.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),t=new URL(e);return t.protocol=t.protocol=="http:"?"ws":"wss",t.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,t,o){const r=[this.getRequestUrlInternal(t)];return o&&r.push(this.getBaseResourcePath()),e!==""&&r.push(e),new URL(`${r.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let t=this.clientOptions.httpOptions;e.httpOptions&&(t=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const o=this.shouldPrependVertexProjectPath(e),r=this.constructUrl(e.path,t,o);if(e.queryParams)for(const[a,u]of Object.entries(e.queryParams))r.searchParams.append(a,String(u));let l={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else l.body=e.body;return l=await this.includeExtraHttpOptionsToRequestInit(l,t,r.toString(),e.abortSignal),this.unaryApiCall(r,l,e.httpMethod)}patchHttpOptions(e,t){const o=JSON.parse(JSON.stringify(e));for(const[r,l]of Object.entries(t))typeof l=="object"?o[r]=Object.assign(Object.assign({},o[r]),l):l!==void 0&&(o[r]=l);return o}async requestStream(e){let t=this.clientOptions.httpOptions;e.httpOptions&&(t=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const o=this.shouldPrependVertexProjectPath(e),r=this.constructUrl(e.path,t,o);(!r.searchParams.has("alt")||r.searchParams.get("alt")!=="sse")&&r.searchParams.set("alt","sse");let l={};return l.body=e.body,l=await this.includeExtraHttpOptionsToRequestInit(l,t,r.toString(),e.abortSignal),this.streamApiCall(r,l,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,t,o,r){if(t&&t.timeout||r){const l=new AbortController,a=l.signal;if(t.timeout&&t?.timeout>0){const u=setTimeout(()=>l.abort(),t.timeout);u&&typeof u.unref=="function"&&u.unref()}r&&r.addEventListener("abort",()=>{l.abort()}),e.signal=a}return t&&t.extraBody!==null&&ua(e,t.extraBody),e.headers=await this.getHeadersInternal(t,o),e}async unaryApiCall(e,t,o){return this.apiCall(e.toString(),Object.assign(Object.assign({},t),{method:o})).then(async r=>(await ft(r),new Pe(r))).catch(r=>{throw r instanceof Error?r:new Error(JSON.stringify(r))})}async streamApiCall(e,t,o){return this.apiCall(e.toString(),Object.assign(Object.assign({},t),{method:o})).then(async r=>(await ft(r),this.processStreamResponse(r))).catch(r=>{throw r instanceof Error?r:new Error(JSON.stringify(r))})}processStreamResponse(e){var t;return le(this,arguments,function*(){const r=(t=e?.body)===null||t===void 0?void 0:t.getReader(),l=new TextDecoder("utf-8");if(!r)throw new Error("Response body is empty");try{let a="";for(;;){const{done:u,value:c}=yield F(r.read());if(u){if(a.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const d=l.decode(c,{stream:!0});try{const p=JSON.parse(d);if("error"in p){const m=JSON.parse(JSON.stringify(p.error)),h=m.status,y=m.code,T=`got status: ${h}. ${JSON.stringify(p)}`;if(y>=400&&y<600)throw new _e({message:T,status:y})}}catch(p){if(p.name==="ApiError")throw p}a+=d;let f=a.match(ct);for(;f;){const p=f[1];try{const m=new Response(p,{headers:e?.headers,status:e?.status,statusText:e?.statusText});yield yield F(new Pe(m)),a=a.slice(f[0].length),f=a.match(ct)}catch(m){throw new Error(`exception parsing stream chunk ${p}. ${m}`)}}}}finally{r.releaseLock()}})}async apiCall(e,t){return fetch(e,t).catch(o=>{throw new Error(`exception ${o} sending request`)})}getDefaultHeaders(){const e={},t=sa+" "+this.clientOptions.userAgentExtra;return e[oa]=t,e[ke]=t,e[na]="application/json",e}async getHeadersInternal(e,t){const o=new Headers;if(e&&e.headers){for(const[r,l]of Object.entries(e.headers))o.append(r,l);e.timeout&&e.timeout>0&&o.append(ta,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(o,t),o}getFileName(e){var t;let o="";return typeof e=="string"&&(o=e.replace(/[/\\]+$/,""),o=(t=o.split(/[/\\]/).pop())!==null&&t!==void 0?t:""),o}async uploadFile(e,t){var o;const r={};t!=null&&(r.mimeType=t.mimeType,r.name=t.name,r.displayName=t.displayName),r.name&&!r.name.startsWith("files/")&&(r.name=`files/${r.name}`);const l=this.clientOptions.uploader,a=await l.stat(e);r.sizeBytes=String(a.size);const u=(o=t?.mimeType)!==null&&o!==void 0?o:a.type;if(u===void 0||u==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");r.mimeType=u;const c={file:r},d=this.getFileName(e),f=E("upload/v1beta/files",c._url),p=await this.fetchUploadUrl(f,r.sizeBytes,r.mimeType,d,c,t?.httpOptions);return l.upload(e,p,this)}async uploadFileToFileSearchStore(e,t,o){var r;const l=this.clientOptions.uploader,a=await l.stat(t),u=String(a.size),c=(r=o?.mimeType)!==null&&r!==void 0?r:a.type;if(c===void 0||c==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");const d=`upload/v1beta/${e}:uploadToFileSearchStore`,f=this.getFileName(t),p={};o?.customMetadata&&(p.customMetadata=o.customMetadata),o?.chunkingConfig&&(p.chunkingConfig=o.chunkingConfig);const m=await this.fetchUploadUrl(d,u,c,f,p,o?.httpOptions);return l.uploadToFileSearchStore(t,m,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,t,o,r,l,a){var u;let c={};a?c=a:c={apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${t}`,"X-Goog-Upload-Header-Content-Type":`${o}`},r?{"X-Goog-Upload-File-Name":r}:{})};const d=await this.request({path:e,body:JSON.stringify(l),httpMethod:"POST",httpOptions:c});if(!d||!d?.headers)throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const f=(u=d?.headers)===null||u===void 0?void 0:u["x-goog-upload-url"];if(f===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return f}}async function ft(n){var e;if(n===void 0)throw new Error("response is undefined");if(!n.ok){const t=n.status;let o;!((e=n.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?o=await n.json():o={error:{message:await n.text(),code:n.status,status:n.statusText}};const r=JSON.stringify(o);throw t>=400&&t<600?new _e({message:r,status:t}):new Error(r)}}function ua(n,e){if(!e||Object.keys(e).length===0)return;if(n.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let t={};if(typeof n.body=="string"&&n.body.length>0)try{const l=JSON.parse(n.body);if(typeof l=="object"&&l!==null&&!Array.isArray(l))t=l;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function o(l,a){const u=Object.assign({},l);for(const c in a)if(Object.prototype.hasOwnProperty.call(a,c)){const d=a[c],f=u[c];d&&typeof d=="object"&&!Array.isArray(d)&&f&&typeof f=="object"&&!Array.isArray(f)?u[c]=o(f,d):(f&&d&&typeof f!=typeof d&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${c}". Original type: ${typeof f}, New type: ${typeof d}. Overwriting.`),u[c]=d)}return u}const r=o(t,e);n.body=JSON.stringify(r)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const da="mcp_used/unknown";let ca=!1;function Wt(n){for(const e of n)if(fa(e)||typeof e=="object"&&"inputSchema"in e)return!0;return ca}function Kt(n){var e;const t=(e=n[ke])!==null&&e!==void 0?e:"";n[ke]=(t+` ${da}`).trimStart()}function fa(n){return n!==null&&typeof n=="object"&&n instanceof Je}function pa(n,e=100){return le(this,arguments,function*(){let o,r=0;for(;r<e;){const l=yield F(n.listTools({cursor:o}));for(const a of l.tools)yield yield F(a),r++;if(!l.nextCursor)break;o=l.nextCursor}})}class Je{constructor(e=[],t){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=t}static create(e,t){return new Je(e,t)}async initialize(){var e,t,o,r;if(this.mcpTools.length>0)return;const l={},a=[];for(const f of this.mcpClients)try{for(var u=!0,c=(t=void 0,pe(pa(f))),d;d=await c.next(),e=d.done,!e;u=!0){r=d.value,u=!1;const p=r;a.push(p);const m=p.name;if(l[m])throw new Error(`Duplicate function name ${m} found in MCP tools. Please ensure function names are unique.`);l[m]=f}}catch(p){t={error:p}}finally{try{!u&&!e&&(o=c.return)&&await o.call(c)}finally{if(t)throw t.error}}this.mcpTools=a,this.functionNameToMcpClient=l}async tool(){return await this.initialize(),si(this.mcpTools,this.config)}async callTool(e){await this.initialize();const t=[];for(const o of e)if(o.name in this.functionNameToMcpClient){const r=this.functionNameToMcpClient[o.name];let l;this.config.timeout&&(l={timeout:this.config.timeout});const a=await r.callTool({name:o.name,arguments:o.args},void 0,l);t.push({functionResponse:{name:o.name,response:a.isError?{error:a}:a}})}return t}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function ma(n,e,t){const o=new Xo;let r;t.data instanceof Blob?r=JSON.parse(await t.data.text()):r=JSON.parse(t.data),Object.assign(o,r),e(o)}class ha{constructor(e,t,o){this.apiClient=e,this.auth=t,this.webSocketFactory=o}async connect(e){var t,o;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const r=this.apiClient.getWebsocketBaseUrl(),l=this.apiClient.getApiVersion(),a=Ta(this.apiClient.getDefaultHeaders()),u=this.apiClient.getApiKey(),c=`${r}/ws/google.ai.generativelanguage.${l}.GenerativeService.BidiGenerateMusic?key=${u}`;let d=()=>{};const f=new Promise(C=>{d=C}),p=e.callbacks,m=function(){d({})},h=this.apiClient,y={onopen:m,onmessage:C=>{ma(h,p.onmessage,C)},onerror:(t=p?.onerror)!==null&&t!==void 0?t:function(C){},onclose:(o=p?.onclose)!==null&&o!==void 0?o:function(C){}},T=this.webSocketFactory.create(c,ya(a),y);T.connect(),await f;const _={setup:{model:D(this.apiClient,e.model)}};return T.send(JSON.stringify(_)),new ga(T,this.apiClient)}}class ga{constructor(e,t){this.conn=e,this.apiClient=t}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const t=tr(e);this.conn.send(JSON.stringify({clientContent:t}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const t=nr(e);this.conn.send(JSON.stringify(t))}sendPlaybackControl(e){const t={playbackControl:e};this.conn.send(JSON.stringify(t))}play(){this.sendPlaybackControl(se.PLAY)}pause(){this.sendPlaybackControl(se.PAUSE)}stop(){this.sendPlaybackControl(se.STOP)}resetContext(){this.sendPlaybackControl(se.RESET_CONTEXT)}close(){this.conn.close()}}function ya(n){const e={};return n.forEach((t,o)=>{e[o]=t}),e}function Ta(n){const e=new Headers;for(const[t,o]of Object.entries(n))e.append(t,o);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Ea="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function Ca(n,e,t){const o=new Zo;let r;t.data instanceof Blob?r=await t.data.text():t.data instanceof ArrayBuffer?r=new TextDecoder().decode(t.data):r=t.data;const l=JSON.parse(r);if(n.isVertexAI()){const a=sr(l);Object.assign(o,a)}else Object.assign(o,l);e(o)}class _a{constructor(e,t,o){this.apiClient=e,this.auth=t,this.webSocketFactory=o,this.music=new ha(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var t,o,r,l,a,u;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const c=this.apiClient.getWebsocketBaseUrl(),d=this.apiClient.getApiVersion();let f;const p=this.apiClient.getHeaders();e.config&&e.config.tools&&Wt(e.config.tools)&&Kt(p);const m=Aa(p);if(this.apiClient.isVertexAI())f=`${c}/ws/google.cloud.aiplatform.${d}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(m,f);else{const R=this.apiClient.getApiKey();let U="BidiGenerateContent",q="key";R?.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),d!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),U="BidiGenerateContentConstrained",q="access_token"),f=`${c}/ws/google.ai.generativelanguage.${d}.GenerativeService.${U}?${q}=${R}`}let h=()=>{};const y=new Promise(R=>{h=R}),T=e.callbacks,I=function(){var R;(R=T?.onopen)===null||R===void 0||R.call(T),h({})},S=this.apiClient,_={onopen:I,onmessage:R=>{Ca(S,T.onmessage,R)},onerror:(t=T?.onerror)!==null&&t!==void 0?t:function(R){},onclose:(o=T?.onclose)!==null&&o!==void 0?o:function(R){}},C=this.webSocketFactory.create(f,Sa(m),_);C.connect(),await y;let A=D(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&A.startsWith("publishers/")){const R=this.apiClient.getProject(),U=this.apiClient.getLocation();A=`projects/${R}/locations/${U}/`+A}let N={};this.apiClient.isVertexAI()&&((r=e.config)===null||r===void 0?void 0:r.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[ge.AUDIO]}:e.config.responseModalities=[ge.AUDIO]),!((l=e.config)===null||l===void 0)&&l.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const P=(u=(a=e.config)===null||a===void 0?void 0:a.tools)!==null&&u!==void 0?u:[],w=[];for(const R of P)if(this.isCallableTool(R)){const U=R;w.push(await U.tool())}else w.push(R);w.length>0&&(e.config.tools=w);const b={model:A,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?N=er(this.apiClient,b):N=js(this.apiClient,b),delete N.config,C.send(JSON.stringify(N)),new va(C,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const Ia={turnComplete:!0};class va{constructor(e,t){this.conn=e,this.apiClient=t}tLiveClientContent(e,t){if(t.turns!==null&&t.turns!==void 0){let o=[];try{o=K(t.turns),e.isVertexAI()||(o=o.map(r=>Ie(r)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof t.turns}'`)}return{clientContent:{turns:o,turnComplete:t.turnComplete}}}return{clientContent:{turnComplete:t.turnComplete}}}tLiveClienttToolResponse(e,t){let o=[];if(t.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(t.functionResponses)?o=t.functionResponses:o=[t.functionResponses],o.length===0)throw new Error("functionResponses is required.");for(const l of o){if(typeof l!="object"||l===null||!("name"in l)||!("response"in l))throw new Error(`Could not parse function response, type '${typeof l}'.`);if(!e.isVertexAI()&&!("id"in l))throw new Error(Ea)}return{toolResponse:{functionResponses:o}}}sendClientContent(e){e=Object.assign(Object.assign({},Ia),e);const t=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(t))}sendRealtimeInput(e){let t={};this.apiClient.isVertexAI()?t={realtimeInput:ir(e)}:t={realtimeInput:or(e)},this.conn.send(JSON.stringify(t))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const t=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(t))}close(){this.conn.close()}}function Sa(n){const e={};return n.forEach((t,o)=>{e[o]=t}),e}function Aa(n){const e=new Headers;for(const[t,o]of Object.entries(n))e.append(t,o);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const pt=10;function mt(n){var e,t,o;if(!((e=n?.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let r=!1;for(const a of(t=n?.tools)!==null&&t!==void 0?t:[])if(ae(a)){r=!0;break}if(!r)return!0;const l=(o=n?.automaticFunctionCalling)===null||o===void 0?void 0:o.maximumRemoteCalls;return l&&(l<0||!Number.isInteger(l))||l==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",l),!0):!1}function ae(n){return"callTool"in n&&typeof n.callTool=="function"}function Ra(n){var e,t,o;return(o=(t=(e=n.config)===null||e===void 0?void 0:e.tools)===null||t===void 0?void 0:t.some(r=>ae(r)))!==null&&o!==void 0?o:!1}function ht(n){var e;const t=[];return!((e=n?.config)===null||e===void 0)&&e.tools&&n.config.tools.forEach((o,r)=>{if(ae(o))return;const l=o;l.functionDeclarations&&l.functionDeclarations.length>0&&t.push(r)}),t}function gt(n){var e;return!(!((e=n?.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class xa extends X{constructor(e){super(),this.apiClient=e,this.generateContent=async t=>{var o,r,l,a,u;const c=await this.processParamsMaybeAddMcpUsage(t);if(this.maybeMoveToResponseJsonSchem(t),!Ra(t)||mt(t.config))return await this.generateContentInternal(c);const d=ht(t);if(d.length>0){const T=d.map(I=>`tools[${I}]`).join(", ");throw new Error(`Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations is not yet supported. Incompatible tools found at ${T}.`)}let f,p;const m=K(c.contents),h=(l=(r=(o=c.config)===null||o===void 0?void 0:o.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls)!==null&&l!==void 0?l:pt;let y=0;for(;y<h&&(f=await this.generateContentInternal(c),!(!f.functionCalls||f.functionCalls.length===0));){const T=f.candidates[0].content,I=[];for(const S of(u=(a=t.config)===null||a===void 0?void 0:a.tools)!==null&&u!==void 0?u:[])if(ae(S)){const C=await S.callTool(f.functionCalls);I.push(...C)}y++,p={role:"user",parts:I},c.contents=K(c.contents),c.contents.push(T),c.contents.push(p),gt(c.config)&&(m.push(T),m.push(p))}return gt(c.config)&&(f.automaticFunctionCallingHistory=m),f},this.generateContentStream=async t=>{var o,r,l,a,u;if(this.maybeMoveToResponseJsonSchem(t),mt(t.config)){const p=await this.processParamsMaybeAddMcpUsage(t);return await this.generateContentStreamInternal(p)}const c=ht(t);if(c.length>0){const p=c.map(m=>`tools[${m}]`).join(", ");throw new Error(`Incompatible tools found at ${p}. Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations" is not yet supported.`)}const d=(l=(r=(o=t?.config)===null||o===void 0?void 0:o.toolConfig)===null||r===void 0?void 0:r.functionCallingConfig)===null||l===void 0?void 0:l.streamFunctionCallArguments,f=(u=(a=t?.config)===null||a===void 0?void 0:a.automaticFunctionCalling)===null||u===void 0?void 0:u.disable;if(d&&!f)throw new Error("Running in streaming mode with 'streamFunctionCallArguments' enabled, this feature is not compatible with automatic function calling (AFC). Please set 'config.automaticFunctionCalling.disable' to true to disable AFC or leave 'config.toolConfig.functionCallingConfig.streamFunctionCallArguments' to be undefined or set to false to disable streaming function call arguments feature.");return await this.processAfcStream(t)},this.generateImages=async t=>await this.generateImagesInternal(t).then(o=>{var r;let l;const a=[];if(o?.generatedImages)for(const c of o.generatedImages)c&&c?.safetyAttributes&&((r=c?.safetyAttributes)===null||r===void 0?void 0:r.contentType)==="Positive Prompt"?l=c?.safetyAttributes:a.push(c);let u;return l?u={generatedImages:a,positivePromptSafetyAttributes:l,sdkHttpResponse:o.sdkHttpResponse}:u={generatedImages:a,sdkHttpResponse:o.sdkHttpResponse},u}),this.list=async t=>{var o;const a={config:Object.assign(Object.assign({},{queryBase:!0}),t?.config)};if(this.apiClient.isVertexAI()&&!a.config.queryBase){if(!((o=a.config)===null||o===void 0)&&o.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");a.config.filter="labels.tune-type:*"}return new oe(Z.PAGED_ITEM_MODELS,u=>this.listInternal(u),await this.listInternal(a),a)},this.editImage=async t=>{const o={model:t.model,prompt:t.prompt,referenceImages:[],config:t.config};return t.referenceImages&&t.referenceImages&&(o.referenceImages=t.referenceImages.map(r=>r.toReferenceImageAPI())),await this.editImageInternal(o)},this.upscaleImage=async t=>{let o={numberOfImages:1,mode:"upscale"};t.config&&(o=Object.assign(Object.assign({},o),t.config));const r={model:t.model,image:t.image,upscaleFactor:t.upscaleFactor,config:o};return await this.upscaleImageInternal(r)},this.generateVideos=async t=>{var o,r,l,a,u,c;if((t.prompt||t.image||t.video)&&t.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((o=t.video)===null||o===void 0)&&o.uri&&(!((r=t.video)===null||r===void 0)&&r.videoBytes)?t.video={uri:t.video.uri,mimeType:t.video.mimeType}:!((a=(l=t.source)===null||l===void 0?void 0:l.video)===null||a===void 0)&&a.uri&&(!((c=(u=t.source)===null||u===void 0?void 0:u.video)===null||c===void 0)&&c.videoBytes)&&(t.source.video={uri:t.source.video.uri,mimeType:t.source.video.mimeType})),await this.generateVideosInternal(t)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var t,o,r;const l=(t=e.config)===null||t===void 0?void 0:t.tools;if(!l)return e;const a=await Promise.all(l.map(async c=>ae(c)?await c.tool():c)),u={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:a})};if(u.config.tools=a,e.config&&e.config.tools&&Wt(e.config.tools)){const c=(r=(o=e.config.httpOptions)===null||o===void 0?void 0:o.headers)!==null&&r!==void 0?r:{};let d=Object.assign({},c);Object.keys(d).length===0&&(d=this.apiClient.getDefaultHeaders()),Kt(d),u.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:d})}return u}async initAfcToolsMap(e){var t,o,r;const l=new Map;for(const a of(o=(t=e.config)===null||t===void 0?void 0:t.tools)!==null&&o!==void 0?o:[])if(ae(a)){const u=a,c=await u.tool();for(const d of(r=c.functionDeclarations)!==null&&r!==void 0?r:[]){if(!d.name)throw new Error("Function declaration name is required.");if(l.has(d.name))throw new Error(`Duplicate tool declaration name: ${d.name}`);l.set(d.name,u)}}return l}async processAfcStream(e){var t,o,r;const l=(r=(o=(t=e.config)===null||t===void 0?void 0:t.automaticFunctionCalling)===null||o===void 0?void 0:o.maximumRemoteCalls)!==null&&r!==void 0?r:pt;let a=!1,u=0;const c=await this.initAfcToolsMap(e);return function(d,f,p){var m,h;return le(this,arguments,function*(){for(var y,T,I,S;u<l;){a&&(u++,a=!1);const N=yield F(d.processParamsMaybeAddMcpUsage(p)),P=yield F(d.generateContentStreamInternal(N)),w=[],b=[];try{for(var _=!0,C=(T=void 0,pe(P)),A;A=yield F(C.next()),y=A.done,!y;_=!0){S=A.value,_=!1;const R=S;if(yield yield F(R),R.candidates&&(!((m=R.candidates[0])===null||m===void 0)&&m.content)){b.push(R.candidates[0].content);for(const U of(h=R.candidates[0].content.parts)!==null&&h!==void 0?h:[])if(u<l&&U.functionCall){if(!U.functionCall.name)throw new Error("Function call name was not returned by the model.");if(f.has(U.functionCall.name)){const q=yield F(f.get(U.functionCall.name).callTool([U.functionCall]));w.push(...q)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${f.keys()}, mising tool: ${U.functionCall.name}`)}}}}catch(R){T={error:R}}finally{try{!_&&!y&&(I=C.return)&&(yield F(I.call(C)))}finally{if(T)throw T.error}}if(w.length>0){a=!0;const R=new fe;R.candidates=[{content:{role:"user",parts:w}}],yield yield F(R);const U=[];U.push(...b),U.push({role:"user",parts:w});const q=K(p.contents).concat(U);p.contents=q}else break}})}(this,c,e)}async generateContentInternal(e){var t,o,r,l;let a,u="",c={};if(this.apiClient.isVertexAI()){const d=at(this.apiClient,e);return u=E("{model}:generateContent",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:f.headers},m})),a.then(f=>{const p=dt(f),m=new fe;return Object.assign(m,p),m})}else{const d=lt(this.apiClient,e);return u=E("{model}:generateContent",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(f=>f.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:f.headers},m})),a.then(f=>{const p=ut(f),m=new fe;return Object.assign(m,p),m})}}async generateContentStreamInternal(e){var t,o,r,l;let a,u="",c={};if(this.apiClient.isVertexAI()){const d=at(this.apiClient,e);return u=E("{model}:streamGenerateContent?alt=sse",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.requestStream({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}),a.then(function(p){return le(this,arguments,function*(){var m,h,y,T;try{for(var I=!0,S=pe(p),_;_=yield F(S.next()),m=_.done,!m;I=!0){T=_.value,I=!1;const C=T,A=dt(yield F(C.json()));A.sdkHttpResponse={headers:C.headers};const N=new fe;Object.assign(N,A),yield yield F(N)}}catch(C){h={error:C}}finally{try{!I&&!m&&(y=S.return)&&(yield F(y.call(S)))}finally{if(h)throw h.error}}})})}else{const d=lt(this.apiClient,e);return u=E("{model}:streamGenerateContent?alt=sse",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.requestStream({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}),a.then(function(p){return le(this,arguments,function*(){var m,h,y,T;try{for(var I=!0,S=pe(p),_;_=yield F(S.next()),m=_.done,!m;I=!0){T=_.value,I=!1;const C=T,A=ut(yield F(C.json()));A.sdkHttpResponse={headers:C.headers};const N=new fe;Object.assign(N,A),yield yield F(N)}}catch(C){h={error:C}}finally{try{!I&&!m&&(y=S.return)&&(yield F(y.call(S)))}finally{if(h)throw h.error}}})})}}async embedContent(e){var t,o,r,l;let a,u="",c={};if(this.apiClient.isVertexAI()){const d=Lr(this.apiClient,e);return u=E("{model}:predict",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:f.headers},m})),a.then(f=>{const p=Gr(f),m=new Yn;return Object.assign(m,p),m})}else{const d=kr(this.apiClient,e);return u=E("{model}:batchEmbedContents",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(f=>f.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:f.headers},m})),a.then(f=>{const p=Fr(f),m=new Yn;return Object.assign(m,p),m})}}async generateImagesInternal(e){var t,o,r,l;let a,u="",c={};if(this.apiClient.isVertexAI()){const d=zr(this.apiClient,e);return u=E("{model}:predict",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:f.headers},m})),a.then(f=>{const p=Zr(f),m=new Wn;return Object.assign(m,p),m})}else{const d=Kr(this.apiClient,e);return u=E("{model}:predict",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(f=>f.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:f.headers},m})),a.then(f=>{const p=Or(f),m=new Wn;return Object.assign(m,p),m})}}async editImageInternal(e){var t,o;let r,l="",a={};if(this.apiClient.isVertexAI()){const u=wr(this.apiClient,e);return l=E("{model}:predict",u._url),a=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json().then(d=>{const f=d;return f.sdkHttpResponse={headers:c.headers},f})),r.then(c=>{const d=Mr(c),f=new qo;return Object.assign(f,d),f})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var t,o;let r,l="",a={};if(this.apiClient.isVertexAI()){const u=zl(this.apiClient,e);return l=E("{model}:predict",u._url),a=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json().then(d=>{const f=d;return f.sdkHttpResponse={headers:c.headers},f})),r.then(c=>{const d=Ol(c),f=new bo;return Object.assign(f,d),f})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var t,o;let r,l="",a={};if(this.apiClient.isVertexAI()){const u=Pl(this.apiClient,e);return l=E("{model}:predict",u._url),a=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json()),r.then(c=>{const d=wl(c),f=new Ho;return Object.assign(f,d),f})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var t,o;let r,l="",a={};if(this.apiClient.isVertexAI()){const u=Fl(this.apiClient,e);return l=E("{model}:predict",u._url),a=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json()),r.then(c=>{const d=Gl(c),f=new Bo;return Object.assign(f,d),f})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var t,o,r,l;let a,u="",c={};if(this.apiClient.isVertexAI()){const d=pl(this.apiClient,e);return u=E("{name}",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),a.then(f=>Ue(f))}else{const d=fl(this.apiClient,e);return u=E("{name}",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(f=>f.json()),a.then(f=>De(f))}}async listInternal(e){var t,o,r,l;let a,u="",c={};if(this.apiClient.isVertexAI()){const d=Il(this.apiClient,e);return u=E("{models_url}",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:f.headers},m})),a.then(f=>{const p=Sl(f),m=new Kn;return Object.assign(m,p),m})}else{const d=_l(this.apiClient,e);return u=E("{models_url}",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(f=>f.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:f.headers},m})),a.then(f=>{const p=vl(f),m=new Kn;return Object.assign(m,p),m})}}async update(e){var t,o,r,l;let a,u="",c={};if(this.apiClient.isVertexAI()){const d=Wl(this.apiClient,e);return u=E("{model}",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"PATCH",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),a.then(f=>Ue(f))}else{const d=Yl(this.apiClient,e);return u=E("{name}",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"PATCH",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(f=>f.json()),a.then(f=>De(f))}}async delete(e){var t,o,r,l;let a,u="",c={};if(this.apiClient.isVertexAI()){const d=Rr(this.apiClient,e);return u=E("{name}",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:f.headers},m})),a.then(f=>{const p=Nr(f),m=new zn;return Object.assign(m,p),m})}else{const d=Ar(this.apiClient,e);return u=E("{name}",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(f=>f.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:f.headers},m})),a.then(f=>{const p=xr(f),m=new zn;return Object.assign(m,p),m})}}async countTokens(e){var t,o,r,l;let a,u="",c={};if(this.apiClient.isVertexAI()){const d=Ir(this.apiClient,e);return u=E("{model}:countTokens",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:f.headers},m})),a.then(f=>{const p=Sr(f),m=new On;return Object.assign(m,p),m})}else{const d=_r(this.apiClient,e);return u=E("{model}:countTokens",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(f=>f.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:f.headers},m})),a.then(f=>{const p=vr(f),m=new On;return Object.assign(m,p),m})}}async computeTokens(e){var t,o;let r,l="",a={};if(this.apiClient.isVertexAI()){const u=mr(this.apiClient,e);return l=E("{model}:computeTokens",u._url),a=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json().then(d=>{const f=d;return f.sdkHttpResponse={headers:c.headers},f})),r.then(c=>{const d=hr(c),f=new Jo;return Object.assign(f,d),f})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var t,o,r,l;let a,u="",c={};if(this.apiClient.isVertexAI()){const d=tl(this.apiClient,e);return u=E("{model}:predictLongRunning",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),a.then(f=>{const p=el(f),m=new ye;return Object.assign(m,p),m})}else{const d=nl(this.apiClient,e);return u=E("{model}:predictLongRunning",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(f=>f.json()),a.then(f=>{const p=jr(f),m=new ye;return Object.assign(m,p),m})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Na extends X{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const t=e.operation,o=e.config;if(t.name===void 0||t.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const r=t.name.split("/operations/")[0];let l;o&&"httpOptions"in o&&(l=o.httpOptions);const a=await this.fetchPredictVideosOperationInternal({operationName:t.name,resourceName:r,config:{httpOptions:l}});return t._fromAPIResponse({apiResponse:a,_isVertexAI:!0})}else{const r=await this.getVideosOperationInternal({operationName:t.name,config:o});return t._fromAPIResponse({apiResponse:r,_isVertexAI:!1})}}async get(e){const t=e.operation,o=e.config;if(t.name===void 0||t.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const r=t.name.split("/operations/")[0];let l;o&&"httpOptions"in o&&(l=o.httpOptions);const a=await this.fetchPredictVideosOperationInternal({operationName:t.name,resourceName:r,config:{httpOptions:l}});return t._fromAPIResponse({apiResponse:a,_isVertexAI:!0})}else{const r=await this.getVideosOperationInternal({operationName:t.name,config:o});return t._fromAPIResponse({apiResponse:r,_isVertexAI:!1})}}async getVideosOperationInternal(e){var t,o,r,l;let a,u="",c={};if(this.apiClient.isVertexAI()){const d=Uo(e);return u=E("{operationName}",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),a}else{const d=Do(e);return u=E("{operationName}",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(f=>f.json()),a}}async fetchPredictVideosOperationInternal(e){var t,o;let r,l="",a={};if(this.apiClient.isVertexAI()){const u=Ao(e);return l=E("{resourceName}:fetchPredictOperation",u._url),a=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json()),r}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Pa(n){const e={},t=i(n,["data"]);if(t!=null&&s(e,["data"],t),i(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=i(n,["mimeType"]);return o!=null&&s(e,["mimeType"],o),e}function wa(n){const e={},t=i(n,["parts"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(l=>qa(l))),s(e,["parts"],r)}const o=i(n,["role"]);return o!=null&&s(e,["role"],o),e}function Ma(n,e,t){const o={},r=i(e,["expireTime"]);t!==void 0&&r!=null&&s(t,["expireTime"],r);const l=i(e,["newSessionExpireTime"]);t!==void 0&&l!=null&&s(t,["newSessionExpireTime"],l);const a=i(e,["uses"]);t!==void 0&&a!=null&&s(t,["uses"],a);const u=i(e,["liveConnectConstraints"]);t!==void 0&&u!=null&&s(t,["bidiGenerateContentSetup"],Va(n,u));const c=i(e,["lockAdditionalFields"]);return t!==void 0&&c!=null&&s(t,["fieldMask"],c),o}function Da(n,e){const t={},o=i(e,["config"]);return o!=null&&s(t,["config"],Ma(n,o,t)),t}function Ua(n){const e={};if(i(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=i(n,["fileUri"]);t!=null&&s(e,["fileUri"],t);const o=i(n,["mimeType"]);return o!=null&&s(e,["mimeType"],o),e}function ka(n){const e={},t=i(n,["id"]);t!=null&&s(e,["id"],t);const o=i(n,["args"]);o!=null&&s(e,["args"],o);const r=i(n,["name"]);if(r!=null&&s(e,["name"],r),i(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(i(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function La(n){const e={};if(i(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=i(n,["enableWidget"]);return t!=null&&s(e,["enableWidget"],t),e}function Fa(n){const e={};if(i(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(i(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=i(n,["timeRangeFilter"]);return t!=null&&s(e,["timeRangeFilter"],t),e}function Ga(n,e){const t={},o=i(n,["generationConfig"]);e!==void 0&&o!=null&&s(e,["setup","generationConfig"],o);const r=i(n,["responseModalities"]);e!==void 0&&r!=null&&s(e,["setup","generationConfig","responseModalities"],r);const l=i(n,["temperature"]);e!==void 0&&l!=null&&s(e,["setup","generationConfig","temperature"],l);const a=i(n,["topP"]);e!==void 0&&a!=null&&s(e,["setup","generationConfig","topP"],a);const u=i(n,["topK"]);e!==void 0&&u!=null&&s(e,["setup","generationConfig","topK"],u);const c=i(n,["maxOutputTokens"]);e!==void 0&&c!=null&&s(e,["setup","generationConfig","maxOutputTokens"],c);const d=i(n,["mediaResolution"]);e!==void 0&&d!=null&&s(e,["setup","generationConfig","mediaResolution"],d);const f=i(n,["seed"]);e!==void 0&&f!=null&&s(e,["setup","generationConfig","seed"],f);const p=i(n,["speechConfig"]);e!==void 0&&p!=null&&s(e,["setup","generationConfig","speechConfig"],Be(p));const m=i(n,["thinkingConfig"]);e!==void 0&&m!=null&&s(e,["setup","generationConfig","thinkingConfig"],m);const h=i(n,["enableAffectiveDialog"]);e!==void 0&&h!=null&&s(e,["setup","generationConfig","enableAffectiveDialog"],h);const y=i(n,["systemInstruction"]);e!==void 0&&y!=null&&s(e,["setup","systemInstruction"],wa(J(y)));const T=i(n,["tools"]);if(e!==void 0&&T!=null){let P=de(T);Array.isArray(P)&&(P=P.map(w=>Ha(ue(w)))),s(e,["setup","tools"],P)}const I=i(n,["sessionResumption"]);e!==void 0&&I!=null&&s(e,["setup","sessionResumption"],ba(I));const S=i(n,["inputAudioTranscription"]);e!==void 0&&S!=null&&s(e,["setup","inputAudioTranscription"],S);const _=i(n,["outputAudioTranscription"]);e!==void 0&&_!=null&&s(e,["setup","outputAudioTranscription"],_);const C=i(n,["realtimeInputConfig"]);e!==void 0&&C!=null&&s(e,["setup","realtimeInputConfig"],C);const A=i(n,["contextWindowCompression"]);e!==void 0&&A!=null&&s(e,["setup","contextWindowCompression"],A);const N=i(n,["proactivity"]);return e!==void 0&&N!=null&&s(e,["setup","proactivity"],N),t}function Va(n,e){const t={},o=i(e,["model"]);o!=null&&s(t,["setup","model"],D(n,o));const r=i(e,["config"]);return r!=null&&s(t,["config"],Ga(r,t)),t}function qa(n){const e={},t=i(n,["mediaResolution"]);t!=null&&s(e,["mediaResolution"],t);const o=i(n,["codeExecutionResult"]);o!=null&&s(e,["codeExecutionResult"],o);const r=i(n,["executableCode"]);r!=null&&s(e,["executableCode"],r);const l=i(n,["fileData"]);l!=null&&s(e,["fileData"],Ua(l));const a=i(n,["functionCall"]);a!=null&&s(e,["functionCall"],ka(a));const u=i(n,["functionResponse"]);u!=null&&s(e,["functionResponse"],u);const c=i(n,["inlineData"]);c!=null&&s(e,["inlineData"],Pa(c));const d=i(n,["text"]);d!=null&&s(e,["text"],d);const f=i(n,["thought"]);f!=null&&s(e,["thought"],f);const p=i(n,["thoughtSignature"]);p!=null&&s(e,["thoughtSignature"],p);const m=i(n,["videoMetadata"]);return m!=null&&s(e,["videoMetadata"],m),e}function ba(n){const e={},t=i(n,["handle"]);if(t!=null&&s(e,["handle"],t),i(n,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function Ha(n){const e={},t=i(n,["functionDeclarations"]);if(t!=null){let f=t;Array.isArray(f)&&(f=f.map(p=>p)),s(e,["functionDeclarations"],f)}if(i(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const o=i(n,["googleSearchRetrieval"]);o!=null&&s(e,["googleSearchRetrieval"],o);const r=i(n,["computerUse"]);r!=null&&s(e,["computerUse"],r);const l=i(n,["fileSearch"]);l!=null&&s(e,["fileSearch"],l);const a=i(n,["codeExecution"]);if(a!=null&&s(e,["codeExecution"],a),i(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const u=i(n,["googleMaps"]);u!=null&&s(e,["googleMaps"],La(u));const c=i(n,["googleSearch"]);c!=null&&s(e,["googleSearch"],Fa(c));const d=i(n,["urlContext"]);return d!=null&&s(e,["urlContext"],d),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Ba(n){const e=[];for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t)){const o=n[t];if(typeof o=="object"&&o!=null&&Object.keys(o).length>0){const r=Object.keys(o).map(l=>`${t}.${l}`);e.push(...r)}else e.push(t)}return e.join(",")}function Ja(n,e){let t=null;const o=n.bidiGenerateContentSetup;if(typeof o=="object"&&o!==null&&"setup"in o){const l=o.setup;typeof l=="object"&&l!==null?(n.bidiGenerateContentSetup=l,t=l):delete n.bidiGenerateContentSetup}else o!==void 0&&delete n.bidiGenerateContentSetup;const r=n.fieldMask;if(t){const l=Ba(t);if(Array.isArray(e?.lockAdditionalFields)&&e?.lockAdditionalFields.length===0)l?n.fieldMask=l:delete n.fieldMask;else if(e?.lockAdditionalFields&&e.lockAdditionalFields.length>0&&r!==null&&Array.isArray(r)&&r.length>0){const a=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let u=[];r.length>0&&(u=r.map(d=>a.includes(d)?`generationConfig.${d}`:d));const c=[];l&&c.push(l),u.length>0&&c.push(...u),c.length>0?n.fieldMask=c.join(","):delete n.fieldMask}else delete n.fieldMask}else r!==null&&Array.isArray(r)&&r.length>0?n.fieldMask=r.join(","):delete n.fieldMask;return n}class $a extends X{constructor(e){super(),this.apiClient=e}async create(e){var t,o;let r,l="",a={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const u=Da(this.apiClient,e);l=E("auth_tokens",u._url),a=u._query,delete u.config,delete u._url,delete u._query;const c=Ja(u,e.config);return r=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json()),r.then(d=>d)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Ya(n,e){const t={},o=i(n,["displayName"]);return e!==void 0&&o!=null&&s(e,["displayName"],o),t}function Wa(n){const e={},t=i(n,["config"]);return t!=null&&Ya(t,e),e}function Ka(n,e){const t={},o=i(n,["force"]);return e!==void 0&&o!=null&&s(e,["_query","force"],o),t}function za(n){const e={},t=i(n,["name"]);t!=null&&s(e,["_url","name"],t);const o=i(n,["config"]);return o!=null&&Ka(o,e),e}function Oa(n){const e={},t=i(n,["name"]);return t!=null&&s(e,["_url","name"],t),e}function Za(n,e){const t={},o=i(n,["customMetadata"]);if(e!==void 0&&o!=null){let l=o;Array.isArray(l)&&(l=l.map(a=>a)),s(e,["customMetadata"],l)}const r=i(n,["chunkingConfig"]);return e!==void 0&&r!=null&&s(e,["chunkingConfig"],r),t}function Xa(n){const e={},t=i(n,["name"]);t!=null&&s(e,["name"],t);const o=i(n,["metadata"]);o!=null&&s(e,["metadata"],o);const r=i(n,["done"]);r!=null&&s(e,["done"],r);const l=i(n,["error"]);l!=null&&s(e,["error"],l);const a=i(n,["response"]);return a!=null&&s(e,["response"],ja(a)),e}function Qa(n){const e={},t=i(n,["fileSearchStoreName"]);t!=null&&s(e,["_url","file_search_store_name"],t);const o=i(n,["fileName"]);o!=null&&s(e,["fileName"],o);const r=i(n,["config"]);return r!=null&&Za(r,e),e}function ja(n){const e={},t=i(n,["sdkHttpResponse"]);t!=null&&s(e,["sdkHttpResponse"],t);const o=i(n,["parent"]);o!=null&&s(e,["parent"],o);const r=i(n,["documentName"]);return r!=null&&s(e,["documentName"],r),e}function eu(n,e){const t={},o=i(n,["pageSize"]);e!==void 0&&o!=null&&s(e,["_query","pageSize"],o);const r=i(n,["pageToken"]);return e!==void 0&&r!=null&&s(e,["_query","pageToken"],r),t}function nu(n){const e={},t=i(n,["config"]);return t!=null&&eu(t,e),e}function tu(n){const e={},t=i(n,["sdkHttpResponse"]);t!=null&&s(e,["sdkHttpResponse"],t);const o=i(n,["nextPageToken"]);o!=null&&s(e,["nextPageToken"],o);const r=i(n,["fileSearchStores"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(a=>a)),s(e,["fileSearchStores"],l)}return e}function ou(n,e){const t={},o=i(n,["mimeType"]);e!==void 0&&o!=null&&s(e,["mimeType"],o);const r=i(n,["displayName"]);e!==void 0&&r!=null&&s(e,["displayName"],r);const l=i(n,["customMetadata"]);if(e!==void 0&&l!=null){let u=l;Array.isArray(u)&&(u=u.map(c=>c)),s(e,["customMetadata"],u)}const a=i(n,["chunkingConfig"]);return e!==void 0&&a!=null&&s(e,["chunkingConfig"],a),t}function iu(n){const e={},t=i(n,["fileSearchStoreName"]);t!=null&&s(e,["_url","file_search_store_name"],t);const o=i(n,["config"]);return o!=null&&ou(o,e),e}function su(n){const e={},t=i(n,["sdkHttpResponse"]);return t!=null&&s(e,["sdkHttpResponse"],t),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function ru(n,e){const t={},o=i(n,["force"]);return e!==void 0&&o!=null&&s(e,["_query","force"],o),t}function lu(n){const e={},t=i(n,["name"]);t!=null&&s(e,["_url","name"],t);const o=i(n,["config"]);return o!=null&&ru(o,e),e}function au(n){const e={},t=i(n,["name"]);return t!=null&&s(e,["_url","name"],t),e}function uu(n,e){const t={},o=i(n,["pageSize"]);e!==void 0&&o!=null&&s(e,["_query","pageSize"],o);const r=i(n,["pageToken"]);return e!==void 0&&r!=null&&s(e,["_query","pageToken"],r),t}function du(n){const e={},t=i(n,["parent"]);t!=null&&s(e,["_url","parent"],t);const o=i(n,["config"]);return o!=null&&uu(o,e),e}function cu(n){const e={},t=i(n,["sdkHttpResponse"]);t!=null&&s(e,["sdkHttpResponse"],t);const o=i(n,["nextPageToken"]);o!=null&&s(e,["nextPageToken"],o);const r=i(n,["documents"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(a=>a)),s(e,["documents"],l)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class fu extends X{constructor(e){super(),this.apiClient=e,this.list=async t=>new oe(Z.PAGED_ITEM_DOCUMENTS,o=>this.listInternal({parent:t.parent,config:o.config}),await this.listInternal(t),t)}async get(e){var t,o;let r,l="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=au(e);return l=E("{name}",u._url),a=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json()),r.then(c=>c)}}async delete(e){var t,o;let r="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=lu(e);r=E("{name}",a._url),l=a._query,delete a._url,delete a._query,await this.apiClient.request({path:r,queryParams:l,body:JSON.stringify(a),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal})}}async listInternal(e){var t,o;let r,l="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=du(e);return l=E("{parent}/documents",u._url),a=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json()),r.then(c=>{const d=cu(c),f=new $o;return Object.assign(f,d),f})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class pu extends X{constructor(e,t=new fu(e)){super(),this.apiClient=e,this.documents=t,this.list=async(o={})=>new oe(Z.PAGED_ITEM_FILE_SEARCH_STORES,r=>this.listInternal(r),await this.listInternal(o),o)}async uploadToFileSearchStore(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files to a file search store.");return this.apiClient.uploadFileToFileSearchStore(e.fileSearchStoreName,e.file,e.config)}async create(e){var t,o;let r,l="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=Wa(e);return l=E("fileSearchStores",u._url),a=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json()),r.then(c=>c)}}async get(e){var t,o;let r,l="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=Oa(e);return l=E("{name}",u._url),a=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json()),r.then(c=>c)}}async delete(e){var t,o;let r="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=za(e);r=E("{name}",a._url),l=a._query,delete a._url,delete a._query,await this.apiClient.request({path:r,queryParams:l,body:JSON.stringify(a),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal})}}async listInternal(e){var t,o;let r,l="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=nu(e);return l=E("fileSearchStores",u._url),a=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json()),r.then(c=>{const d=tu(c),f=new Yo;return Object.assign(f,d),f})}}async uploadToFileSearchStoreInternal(e){var t,o;let r,l="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=iu(e);return l=E("upload/v1beta/{file_search_store_name}:uploadToFileSearchStore",u._url),a=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json()),r.then(c=>{const d=su(c),f=new Wo;return Object.assign(f,d),f})}}async importFile(e){var t,o;let r,l="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=Qa(e);return l=E("{file_search_store_name}:importFile",u._url),a=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json()),r.then(c=>{const d=Xa(c),f=new Ge;return Object.assign(f,d),f})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function mu(n,e){const t={},o=i(n,["name"]);return o!=null&&s(t,["_url","name"],o),t}function hu(n,e){const t={},o=i(n,["name"]);return o!=null&&s(t,["_url","name"],o),t}function gu(n,e,t){const o={};if(i(n,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const r=i(n,["tunedModelDisplayName"]);if(e!==void 0&&r!=null&&s(e,["displayName"],r),i(n,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const l=i(n,["epochCount"]);e!==void 0&&l!=null&&s(e,["tuningTask","hyperparameters","epochCount"],l);const a=i(n,["learningRateMultiplier"]);if(a!=null&&s(o,["tuningTask","hyperparameters","learningRateMultiplier"],a),i(n,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(i(n,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(i(n,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const u=i(n,["batchSize"]);e!==void 0&&u!=null&&s(e,["tuningTask","hyperparameters","batchSize"],u);const c=i(n,["learningRate"]);if(e!==void 0&&c!=null&&s(e,["tuningTask","hyperparameters","learningRate"],c),i(n,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");if(i(n,["beta"])!==void 0)throw new Error("beta parameter is not supported in Gemini API.");return o}function yu(n,e,t){const o={};let r=i(t,["config","method"]);if(r===void 0&&(r="SUPERVISED_FINE_TUNING"),r==="SUPERVISED_FINE_TUNING"){const h=i(n,["validationDataset"]);e!==void 0&&h!=null&&s(e,["supervisedTuningSpec"],yt(h))}else if(r==="PREFERENCE_TUNING"){const h=i(n,["validationDataset"]);e!==void 0&&h!=null&&s(e,["preferenceOptimizationSpec"],yt(h))}const l=i(n,["tunedModelDisplayName"]);e!==void 0&&l!=null&&s(e,["tunedModelDisplayName"],l);const a=i(n,["description"]);e!==void 0&&a!=null&&s(e,["description"],a);let u=i(t,["config","method"]);if(u===void 0&&(u="SUPERVISED_FINE_TUNING"),u==="SUPERVISED_FINE_TUNING"){const h=i(n,["epochCount"]);e!==void 0&&h!=null&&s(e,["supervisedTuningSpec","hyperParameters","epochCount"],h)}else if(u==="PREFERENCE_TUNING"){const h=i(n,["epochCount"]);e!==void 0&&h!=null&&s(e,["preferenceOptimizationSpec","hyperParameters","epochCount"],h)}let c=i(t,["config","method"]);if(c===void 0&&(c="SUPERVISED_FINE_TUNING"),c==="SUPERVISED_FINE_TUNING"){const h=i(n,["learningRateMultiplier"]);e!==void 0&&h!=null&&s(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],h)}else if(c==="PREFERENCE_TUNING"){const h=i(n,["learningRateMultiplier"]);e!==void 0&&h!=null&&s(e,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],h)}let d=i(t,["config","method"]);if(d===void 0&&(d="SUPERVISED_FINE_TUNING"),d==="SUPERVISED_FINE_TUNING"){const h=i(n,["exportLastCheckpointOnly"]);e!==void 0&&h!=null&&s(e,["supervisedTuningSpec","exportLastCheckpointOnly"],h)}else if(d==="PREFERENCE_TUNING"){const h=i(n,["exportLastCheckpointOnly"]);e!==void 0&&h!=null&&s(e,["preferenceOptimizationSpec","exportLastCheckpointOnly"],h)}let f=i(t,["config","method"]);if(f===void 0&&(f="SUPERVISED_FINE_TUNING"),f==="SUPERVISED_FINE_TUNING"){const h=i(n,["adapterSize"]);e!==void 0&&h!=null&&s(e,["supervisedTuningSpec","hyperParameters","adapterSize"],h)}else if(f==="PREFERENCE_TUNING"){const h=i(n,["adapterSize"]);e!==void 0&&h!=null&&s(e,["preferenceOptimizationSpec","hyperParameters","adapterSize"],h)}if(i(n,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(i(n,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");const p=i(n,["labels"]);e!==void 0&&p!=null&&s(e,["labels"],p);const m=i(n,["beta"]);return e!==void 0&&m!=null&&s(e,["preferenceOptimizationSpec","hyperParameters","beta"],m),o}function Tu(n,e){const t={},o=i(n,["baseModel"]);o!=null&&s(t,["baseModel"],o);const r=i(n,["preTunedModel"]);r!=null&&s(t,["preTunedModel"],r);const l=i(n,["trainingDataset"]);l!=null&&Pu(l);const a=i(n,["config"]);return a!=null&&gu(a,t),t}function Eu(n,e){const t={},o=i(n,["baseModel"]);o!=null&&s(t,["baseModel"],o);const r=i(n,["preTunedModel"]);r!=null&&s(t,["preTunedModel"],r);const l=i(n,["trainingDataset"]);l!=null&&wu(l,t,e);const a=i(n,["config"]);return a!=null&&yu(a,t,e),t}function Cu(n,e){const t={},o=i(n,["name"]);return o!=null&&s(t,["_url","name"],o),t}function _u(n,e){const t={},o=i(n,["name"]);return o!=null&&s(t,["_url","name"],o),t}function Iu(n,e,t){const o={},r=i(n,["pageSize"]);e!==void 0&&r!=null&&s(e,["_query","pageSize"],r);const l=i(n,["pageToken"]);e!==void 0&&l!=null&&s(e,["_query","pageToken"],l);const a=i(n,["filter"]);return e!==void 0&&a!=null&&s(e,["_query","filter"],a),o}function vu(n,e,t){const o={},r=i(n,["pageSize"]);e!==void 0&&r!=null&&s(e,["_query","pageSize"],r);const l=i(n,["pageToken"]);e!==void 0&&l!=null&&s(e,["_query","pageToken"],l);const a=i(n,["filter"]);return e!==void 0&&a!=null&&s(e,["_query","filter"],a),o}function Su(n,e){const t={},o=i(n,["config"]);return o!=null&&Iu(o,t),t}function Au(n,e){const t={},o=i(n,["config"]);return o!=null&&vu(o,t),t}function Ru(n,e){const t={},o=i(n,["sdkHttpResponse"]);o!=null&&s(t,["sdkHttpResponse"],o);const r=i(n,["nextPageToken"]);r!=null&&s(t,["nextPageToken"],r);const l=i(n,["tunedModels"]);if(l!=null){let a=l;Array.isArray(a)&&(a=a.map(u=>zt(u))),s(t,["tuningJobs"],a)}return t}function xu(n,e){const t={},o=i(n,["sdkHttpResponse"]);o!=null&&s(t,["sdkHttpResponse"],o);const r=i(n,["nextPageToken"]);r!=null&&s(t,["nextPageToken"],r);const l=i(n,["tuningJobs"]);if(l!=null){let a=l;Array.isArray(a)&&(a=a.map(u=>Le(u))),s(t,["tuningJobs"],a)}return t}function Nu(n,e){const t={},o=i(n,["name"]);o!=null&&s(t,["model"],o);const r=i(n,["name"]);return r!=null&&s(t,["endpoint"],r),t}function Pu(n,e){const t={};if(i(n,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(i(n,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const o=i(n,["examples"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(l=>l)),s(t,["examples","examples"],r)}return t}function wu(n,e,t){const o={};let r=i(t,["config","method"]);if(r===void 0&&(r="SUPERVISED_FINE_TUNING"),r==="SUPERVISED_FINE_TUNING"){const a=i(n,["gcsUri"]);e!==void 0&&a!=null&&s(e,["supervisedTuningSpec","trainingDatasetUri"],a)}else if(r==="PREFERENCE_TUNING"){const a=i(n,["gcsUri"]);e!==void 0&&a!=null&&s(e,["preferenceOptimizationSpec","trainingDatasetUri"],a)}let l=i(t,["config","method"]);if(l===void 0&&(l="SUPERVISED_FINE_TUNING"),l==="SUPERVISED_FINE_TUNING"){const a=i(n,["vertexDatasetResource"]);e!==void 0&&a!=null&&s(e,["supervisedTuningSpec","trainingDatasetUri"],a)}else if(l==="PREFERENCE_TUNING"){const a=i(n,["vertexDatasetResource"]);e!==void 0&&a!=null&&s(e,["preferenceOptimizationSpec","trainingDatasetUri"],a)}if(i(n,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return o}function zt(n,e){const t={},o=i(n,["sdkHttpResponse"]);o!=null&&s(t,["sdkHttpResponse"],o);const r=i(n,["name"]);r!=null&&s(t,["name"],r);const l=i(n,["state"]);l!=null&&s(t,["state"],Pt(l));const a=i(n,["createTime"]);a!=null&&s(t,["createTime"],a);const u=i(n,["tuningTask","startTime"]);u!=null&&s(t,["startTime"],u);const c=i(n,["tuningTask","completeTime"]);c!=null&&s(t,["endTime"],c);const d=i(n,["updateTime"]);d!=null&&s(t,["updateTime"],d);const f=i(n,["description"]);f!=null&&s(t,["description"],f);const p=i(n,["baseModel"]);p!=null&&s(t,["baseModel"],p);const m=i(n,["_self"]);return m!=null&&s(t,["tunedModel"],Nu(m)),t}function Le(n,e){const t={},o=i(n,["sdkHttpResponse"]);o!=null&&s(t,["sdkHttpResponse"],o);const r=i(n,["name"]);r!=null&&s(t,["name"],r);const l=i(n,["state"]);l!=null&&s(t,["state"],Pt(l));const a=i(n,["createTime"]);a!=null&&s(t,["createTime"],a);const u=i(n,["startTime"]);u!=null&&s(t,["startTime"],u);const c=i(n,["endTime"]);c!=null&&s(t,["endTime"],c);const d=i(n,["updateTime"]);d!=null&&s(t,["updateTime"],d);const f=i(n,["error"]);f!=null&&s(t,["error"],f);const p=i(n,["description"]);p!=null&&s(t,["description"],p);const m=i(n,["baseModel"]);m!=null&&s(t,["baseModel"],m);const h=i(n,["tunedModel"]);h!=null&&s(t,["tunedModel"],h);const y=i(n,["preTunedModel"]);y!=null&&s(t,["preTunedModel"],y);const T=i(n,["supervisedTuningSpec"]);T!=null&&s(t,["supervisedTuningSpec"],T);const I=i(n,["preferenceOptimizationSpec"]);I!=null&&s(t,["preferenceOptimizationSpec"],I);const S=i(n,["tuningDataStats"]);S!=null&&s(t,["tuningDataStats"],S);const _=i(n,["encryptionSpec"]);_!=null&&s(t,["encryptionSpec"],_);const C=i(n,["partnerModelTuningSpec"]);C!=null&&s(t,["partnerModelTuningSpec"],C);const A=i(n,["customBaseModel"]);A!=null&&s(t,["customBaseModel"],A);const N=i(n,["experiment"]);N!=null&&s(t,["experiment"],N);const P=i(n,["labels"]);P!=null&&s(t,["labels"],P);const w=i(n,["outputUri"]);w!=null&&s(t,["outputUri"],w);const b=i(n,["pipelineJob"]);b!=null&&s(t,["pipelineJob"],b);const R=i(n,["serviceAccount"]);R!=null&&s(t,["serviceAccount"],R);const U=i(n,["tunedModelDisplayName"]);U!=null&&s(t,["tunedModelDisplayName"],U);const q=i(n,["veoTuningSpec"]);return q!=null&&s(t,["veoTuningSpec"],q),t}function Mu(n,e){const t={},o=i(n,["sdkHttpResponse"]);o!=null&&s(t,["sdkHttpResponse"],o);const r=i(n,["name"]);r!=null&&s(t,["name"],r);const l=i(n,["metadata"]);l!=null&&s(t,["metadata"],l);const a=i(n,["done"]);a!=null&&s(t,["done"],a);const u=i(n,["error"]);return u!=null&&s(t,["error"],u),t}function yt(n,e){const t={},o=i(n,["gcsUri"]);o!=null&&s(t,["validationDatasetUri"],o);const r=i(n,["vertexDatasetResource"]);return r!=null&&s(t,["validationDatasetUri"],r),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Du extends X{constructor(e){super(),this.apiClient=e,this.get=async t=>await this.getInternal(t),this.list=async(t={})=>new oe(Z.PAGED_ITEM_TUNING_JOBS,o=>this.listInternal(o),await this.listInternal(t),t),this.tune=async t=>{var o;if(this.apiClient.isVertexAI())if(t.baseModel.startsWith("projects/")){const r={tunedModelName:t.baseModel};!((o=t.config)===null||o===void 0)&&o.preTunedModelCheckpointId&&(r.checkpointId=t.config.preTunedModelCheckpointId);const l=Object.assign(Object.assign({},t),{preTunedModel:r});return l.baseModel=void 0,await this.tuneInternal(l)}else{const r=Object.assign({},t);return await this.tuneInternal(r)}else{const r=Object.assign({},t),l=await this.tuneMldevInternal(r);let a="";return l.metadata!==void 0&&l.metadata.tunedModel!==void 0?a=l.metadata.tunedModel:l.name!==void 0&&l.name.includes("/operations/")&&(a=l.name.split("/operations/")[0]),{name:a,state:Ne.JOB_STATE_QUEUED}}}}async getInternal(e){var t,o,r,l;let a,u="",c={};if(this.apiClient.isVertexAI()){const d=_u(e);return u=E("{name}",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:f.headers},m})),a.then(f=>Le(f))}else{const d=Cu(e);return u=E("{name}",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(f=>f.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:f.headers},m})),a.then(f=>zt(f))}}async listInternal(e){var t,o,r,l;let a,u="",c={};if(this.apiClient.isVertexAI()){const d=Au(e);return u=E("tuningJobs",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:f.headers},m})),a.then(f=>{const p=xu(f),m=new Zn;return Object.assign(m,p),m})}else{const d=Su(e);return u=E("tunedModels",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(f=>f.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:f.headers},m})),a.then(f=>{const p=Ru(f),m=new Zn;return Object.assign(m,p),m})}}async cancel(e){var t,o,r,l;let a="",u={};if(this.apiClient.isVertexAI()){const c=hu(e);a=E("{name}:cancel",c._url),u=c._query,delete c._url,delete c._query,await this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal})}else{const c=mu(e);a=E("{name}:cancel",c._url),u=c._query,delete c._url,delete c._query,await this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal})}}async tuneInternal(e){var t,o;let r,l="",a={};if(this.apiClient.isVertexAI()){const u=Eu(e,e);return l=E("tuningJobs",u._url),a=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json().then(d=>{const f=d;return f.sdkHttpResponse={headers:c.headers},f})),r.then(c=>Le(c))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var t,o;let r,l="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=Tu(e);return l=E("tunedModels",u._url),a=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json().then(d=>{const f=d;return f.sdkHttpResponse={headers:c.headers},f})),r.then(c=>Mu(c))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Uu{async download(e,t){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const ku=1024*1024*8,Lu=3,Fu=1e3,Gu=2,Ee="x-goog-upload-status";async function Vu(n,e,t){var o;const r=await Ot(n,e,t),l=await r?.json();if(((o=r?.headers)===null||o===void 0?void 0:o[Ee])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return l.file}async function qu(n,e,t){var o;const r=await Ot(n,e,t),l=await r?.json();if(((o=r?.headers)===null||o===void 0?void 0:o[Ee])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");const a=vt(l),u=new Ve;return Object.assign(u,a),u}async function Ot(n,e,t){var o,r;let l=0,a=0,u=new Pe(new Response),c="upload";for(l=n.size;a<l;){const d=Math.min(ku,l-a),f=n.slice(a,a+d);a+d>=l&&(c+=", finalize");let p=0,m=Fu;for(;p<Lu&&(u=await t.request({path:"",body:f,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":c,"X-Goog-Upload-Offset":String(a),"Content-Length":String(d)}}}),!(!((o=u?.headers)===null||o===void 0)&&o[Ee]));)p++,await Hu(m),m=m*Gu;if(a+=d,((r=u?.headers)===null||r===void 0?void 0:r[Ee])!=="active")break;if(l<=a)throw new Error("All content has been uploaded, but the upload status is not finalized.")}return u}async function bu(n){return{size:n.size,type:n.type}}function Hu(n){return new Promise(e=>setTimeout(e,n))}class Bu{async upload(e,t,o){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await Vu(e,t,o)}async uploadToFileSearchStore(e,t,o){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await qu(e,t,o)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await bu(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Ju{create(e,t,o){return new $u(e,t,o)}}class $u{constructor(e,t,o){this.url=e,this.headers=t,this.callbacks=o}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Tt="x-goog-api-key";class Yu{constructor(e){this.apiKey=e}async addAuthHeaders(e,t){if(e.get(Tt)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(Tt,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Wu="gl-node/";class Ku{constructor(e){var t;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(t=e.vertexai)!==null&&t!==void 0?t:!1,this.apiKey=e.apiKey;const o=vo(e.httpOptions,e.vertexai,void 0,void 0);o&&(e.httpOptions?e.httpOptions.baseUrl=o:e.httpOptions={baseUrl:o}),this.apiVersion=e.apiVersion;const r=new Yu(this.apiKey);this.apiClient=new aa({auth:r,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:e.httpOptions,userAgentExtra:Wu+"web",uploader:new Bu,downloader:new Uu}),this.models=new xa(this.apiClient),this.live=new _a(this.apiClient,r,new Ju),this.batches=new Qi(this.apiClient),this.chats=new Us(this.models,this.apiClient),this.caches=new ws(this.apiClient),this.files=new Js(this.apiClient),this.operations=new Na(this.apiClient),this.authTokens=new $a(this.apiClient),this.tunings=new Du(this.apiClient),this.fileSearchStores=new pu(this.apiClient)}}var zu={};const Zt=new Ku({apiKey:zu.API_KEY}),Ou=async n=>{try{const t=(await Zt.models.generateImages({model:"imagen-4.0-generate-001",prompt:`A realistic, high-quality veterinary medical image: ${n}. Plain background, clear clinical presentation.`,config:{numberOfImages:1,outputMimeType:"image/jpeg",aspectRatio:"4:3"}})).generatedImages?.[0]?.image?.imageBytes;return t?`data:image/jpeg;base64,${t}`:void 0}catch(e){console.warn("Failed to generate image for clue:",n,e);return}},Et=async(n=[])=>{const e="gemini-2.5-flash",t={type:H.OBJECT,properties:{categories:{type:H.ARRAY,items:{type:H.OBJECT,properties:{title:{type:H.STRING,description:"Category name"},clues:{type:H.ARRAY,items:{type:H.OBJECT,properties:{value:{type:H.INTEGER},question:{type:H.STRING,description:"The clue text. If using an image, keep this brief e.g. 'Identify this condition'."},answer:{type:H.STRING},imageUrl:{type:H.STRING,description:"The URL of the image if provided in the input data. Do not generate a new URL, just preserve the input."},imagePrompt:{type:H.STRING,description:"Optional: A detailed visual description of a medical image (X-ray, cytology, skin lesion) to accompany this clue. Only use for the 'Visual Diagnosis' category or if specifically needed."}},required:["value","question","answer"]}}},required:["title","clues"]}}},required:["categories"]};let o=`
    Create a rigorous Veterinary Medicine Jeopardy game board.
    Generate 6 distinct categories. 
    
    Standard Rules:
    For EACH category, generate exactly 5 clues with values: 200, 400, 600, 800, 1000.
    Ensure the facts are medically accurate and suitable for veterinary students or professionals.
  `;n.length>0?o+=`
    
    IMPORTANT - HYBRID MODE:
    The user has provided some existing game board data (categories and clues).
    You MUST include the provided categories and clues EXACTLY as they appear in the provided JSON. Do not alter their text, values, or image URLs.
    
    YOUR TASKS:
    1. Analyze the PROVIDED DATA below.
    2. If a provided category has fewer than 5 clues, generate the missing clues to complete the set (ensure values 200, 400, 600, 800, 1000 are all present).
    3. If there are fewer than 6 categories total in the provided data, generate completely NEW distinct veterinary categories to reach a total of 6.
    4. For any NEW categories you generate, ensure one is 'Visual Diagnosis' if it doesn't already exist, and include 'imagePrompt' for its clues.
    
    PROVIDED DATA: ${JSON.stringify(n)}
    `:o+=`
    One category MUST be named 'Visual Diagnosis'. 
    For 'Visual Diagnosis', every clue MUST include an 'imagePrompt' describing a specific medical image (e.g., 'Lateral thoracic radiograph showing an enlarged heart pattern'). 
    The other 5 categories can be standard text-based topics.
    `;try{const l=(await Zt.models.generateContent({model:e,contents:o,config:{responseMimeType:"application/json",responseSchema:t,temperature:.7}})).text;if(!l)throw new Error("No content generated");const a=JSON.parse(l),u=[],c=async d=>{for(const f of d.clues)f.imagePrompt&&!f.imageUrl&&u.push((async()=>{const p=await Ou(f.imagePrompt);p&&(f.imageUrl=p),delete f.imagePrompt})())};for(const d of a.categories)await c(d);return await Promise.all(u),a}catch(r){throw console.error("Gemini Generation Error:",r),r}},Xt=({categories:n,onClueClick:e,readOnly:t=!1})=>g.jsx("div",{className:"w-full max-w-7xl mx-auto p-4 md:p-8",children:g.jsx("div",{className:"overflow-x-auto pb-4 scrollbar-hide",children:g.jsxs("div",{className:"min-w-[900px] grid grid-cols-6 gap-2 md:gap-4",children:[n.map(o=>g.jsx("div",{className:"bg-jeopardy-blue aspect-[4/3] flex items-center justify-center p-2 text-center border-2 border-black/30 shadow-lg rounded-sm",children:g.jsx("h2",{className:"text-white font-bold text-sm md:text-lg uppercase tracking-wide drop-shadow-md font-display",children:o.title})},o.id)),[0,1,2,3,4].map(o=>g.jsx(po.Fragment,{children:n.map(r=>{const l=r.clues[o];return g.jsx("button",{onClick:()=>!t&&!l.isAnswered&&e(l),disabled:t||l.isAnswered,className:`
                      aspect-[4/3] flex items-center justify-center 
                      border-2 border-black/30 rounded-sm shadow-md transition-all duration-200
                      ${l.isAnswered?"bg-jeopardy-blue/40 cursor-default":t?"bg-jeopardy-blue cursor-default":"bg-jeopardy-blue hover:bg-blue-800 hover:brightness-110 hover:scale-[1.02] cursor-pointer"}
                    `,children:!l.isAnswered&&g.jsxs("span",{className:"text-jeopardy-gold font-display font-bold text-2xl md:text-4xl drop-shadow-sm",children:["$",l.value]})},l.id)})},`row-${o}`))]})})}),Zu=({clue:n,players:e,onClose:t,onAwardPoints:o,buzzerState:r,onArmBuzzers:l,onResetBuzzers:a})=>{const[u,c]=G.useState(n.isDailyDouble?"DAILY_DOUBLE_WAGER":"CLUE"),[d,f]=G.useState(0),[p,m]=G.useState(""),h=n.isDailyDouble?d:n.value,y=e.find(_=>_.id===r.buzzedPlayerId),T=_=>{_.preventDefault();const C=parseInt(p,10);!isNaN(C)&&C>=0&&(f(C),c("CLUE"))},I=(_,C)=>{o(_,C),C<0&&!n.isDailyDouble?a():t()},S=()=>{o(null,0),t()};return u==="DAILY_DOUBLE_WAGER"?g.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/90 backdrop-blur-md",children:g.jsxs("div",{className:"w-full max-w-2xl bg-gradient-to-b from-blue-900 to-jeopardy-dark border-4 border-jeopardy-gold rounded-xl shadow-2xl overflow-hidden flex flex-col items-center p-8 text-center animate-in zoom-in duration-300",children:[g.jsxs("div",{className:"mb-8 transform hover:scale-105 transition-transform duration-500",children:[g.jsx("h1",{className:"text-6xl md:text-8xl font-display font-bold text-jeopardy-gold drop-shadow-[0_4px_0_rgba(0,0,0,1)] tracking-tighter -rotate-2",children:"DAILY"}),g.jsx("h1",{className:"text-6xl md:text-8xl font-display font-bold text-jeopardy-gold drop-shadow-[0_4px_0_rgba(0,0,0,1)] tracking-tighter rotate-2",children:"DOUBLE"})]}),g.jsx("p",{className:"text-white/80 text-lg mb-6",children:"Enter your wager"}),g.jsxs("form",{onSubmit:T,className:"w-full max-w-sm flex flex-col gap-4",children:[g.jsxs("div",{className:"relative",children:[g.jsx("span",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-jeopardy-gold text-2xl font-bold",children:"$"}),g.jsx("input",{type:"number",value:p,onChange:_=>m(_.target.value),className:"w-full bg-black/40 border-2 border-jeopardy-gold/50 rounded-lg py-4 pl-10 pr-4 text-3xl text-white font-bold text-center focus:outline-none focus:border-jeopardy-gold transition-colors",placeholder:"0",autoFocus:!0,min:"0"})]}),g.jsx("button",{type:"submit",disabled:!p,className:"w-full py-4 bg-jeopardy-gold hover:bg-yellow-400 text-jeopardy-dark font-bold text-xl rounded-lg uppercase tracking-wider transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"Place Wager"})]})]})}):g.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/80 backdrop-blur-md transition-opacity duration-300",children:g.jsxs("div",{className:`
        w-full max-w-5xl bg-jeopardy-blue border-4 rounded-xl shadow-2xl overflow-hidden flex flex-col h-[90vh]
        ${n.isDailyDouble?"border-jeopardy-gold shadow-yellow-500/20":"border-white/20"}
      `,children:[g.jsxs("div",{className:"bg-blue-900/50 p-4 text-center border-b border-white/10 shrink-0 flex justify-between items-center",children:[g.jsx("span",{className:"w-8"}),g.jsxs("div",{className:"flex flex-col items-center",children:[n.isDailyDouble&&g.jsx("span",{className:"text-jeopardy-gold text-xs font-bold uppercase tracking-widest mb-1",children:"Daily Double"}),g.jsxs("span",{className:"text-jeopardy-gold text-4xl font-bold font-display drop-shadow-md",children:["$",h]})]}),g.jsx("button",{onClick:t,className:"text-white/50 hover:text-white transition-colors",title:"Close without scoring",children:g.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),g.jsxs("div",{className:"flex-grow flex flex-col items-center justify-center p-6 md:p-12 text-center relative overflow-hidden",children:[g.jsxs("div",{className:"z-10 max-w-4xl flex flex-col items-center gap-6",children:[n.imageUrl&&g.jsx("img",{src:n.imageUrl,alt:"Clue Visual",className:"max-h-[35vh] w-auto rounded-lg shadow-2xl border-2 border-white/20 object-contain bg-black/20"}),g.jsx("div",{className:"text-white text-3xl md:text-6xl font-bold uppercase leading-snug drop-shadow-lg tracking-wide font-display",children:n.question})]}),!n.isDailyDouble&&y&&u==="CLUE"&&g.jsxs("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm z-20 flex flex-col items-center justify-center animate-in fade-in duration-200",children:[g.jsx("span",{className:"text-white/80 uppercase tracking-widest mb-2",children:"Buzzed In"}),g.jsx("div",{className:"text-jeopardy-gold text-6xl font-display font-bold animate-bounce",children:y.name}),g.jsxs("div",{className:"mt-8 flex gap-4",children:[g.jsx("button",{onClick:()=>I(y.id,h),className:"bg-green-600 text-white px-8 py-4 rounded-lg font-bold text-xl hover:bg-green-500",children:"Correct (+)"}),g.jsx("button",{onClick:()=>I(y.id,-h),className:"bg-red-600 text-white px-8 py-4 rounded-lg font-bold text-xl hover:bg-red-500",children:"Incorrect (-)"})]}),g.jsx("button",{onClick:a,className:"mt-4 text-white/50 hover:text-white underline",children:"Ignore / Reset"})]}),u==="ANSWER"&&g.jsxs("div",{className:"mt-12 animate-in fade-in slide-in-from-bottom-4 duration-500 z-10",children:[g.jsx("div",{className:"text-jeopardy-gold text-xl uppercase font-bold mb-2",children:"Correct Response"}),g.jsx("div",{className:"text-white text-2xl md:text-4xl font-medium bg-black/30 p-6 rounded-lg border border-white/10 inline-block",children:n.answer})]})]}),g.jsxs("div",{className:"bg-black/20 p-6 border-t border-white/10 shrink-0",children:[!n.isDailyDouble&&u==="CLUE"&&g.jsxs("div",{className:"flex flex-col items-center gap-4",children:[r.status==="LOCKED"?g.jsx("button",{onClick:l,className:"w-full max-w-md py-4 bg-jeopardy-gold text-jeopardy-dark font-bold text-2xl rounded-lg uppercase tracking-widest shadow-lg hover:bg-yellow-300 active:scale-95 transition-all",children:"Open Buzzers"}):g.jsx("div",{className:"text-white text-xl font-mono animate-pulse",children:"--- BUZZERS OPEN ---"}),g.jsx("div",{className:"h-px w-full bg-white/10 my-2"}),g.jsx("button",{onClick:()=>c("ANSWER"),className:"px-8 py-2 bg-blue-800 text-white font-bold rounded-full text-sm hover:bg-blue-700 uppercase tracking-wider",children:"Reveal Answer (No Correct Buzz)"})]}),(u==="ANSWER"||n.isDailyDouble)&&g.jsxs("div",{className:"flex flex-col items-center gap-4",children:[g.jsx("h3",{className:"text-white/70 uppercase tracking-widest text-sm font-semibold",children:"Manual Adjustments"}),g.jsx("div",{className:"flex flex-wrap justify-center gap-4 w-full",children:e.map(_=>g.jsxs("div",{className:"flex flex-col gap-2 bg-blue-900/40 p-2 rounded-lg border border-white/10",children:[g.jsx("span",{className:"text-white font-bold text-center text-xs truncate max-w-[100px]",children:_.name}),g.jsxs("div",{className:"flex gap-1",children:[g.jsx("button",{onClick:()=>I(_.id,h),className:"flex-1 py-1 px-2 bg-green-600 text-white rounded text-xs",children:"+"}),g.jsx("button",{onClick:()=>I(_.id,-h),className:"flex-1 py-1 px-2 bg-red-600 text-white rounded text-xs",children:"-"})]})]},_.id))}),g.jsx("button",{onClick:S,className:"mt-2 text-white/50 text-sm hover:underline",children:"Finish Clue"})]})]})]})})},Xu=()=>g.jsxs("div",{className:"fixed inset-0 bg-jeopardy-dark flex flex-col items-center justify-center z-50 text-white",children:[g.jsxs("div",{className:"relative w-32 h-32 mb-8",children:[g.jsx("div",{className:"absolute inset-0 border-t-4 border-jeopardy-gold rounded-full animate-spin"}),g.jsx("div",{className:"absolute inset-4 border-r-4 border-jeopardy-blue rounded-full animate-spin animation-delay-200"}),g.jsx("div",{className:"absolute inset-8 border-b-4 border-white rounded-full animate-spin animation-delay-500"})]}),g.jsx("h2",{className:"text-3xl font-bold font-display tracking-wider mb-4 animate-pulse text-jeopardy-gold",children:"GENERATING BOARD"}),g.jsx("p",{className:"text-blue-200 max-w-md text-center px-4",children:"Consulting the AI Veterinary Board Specialists to prepare your exam..."})]}),Qu=({players:n})=>g.jsx("div",{className:"fixed bottom-0 left-0 right-0 bg-black/90 border-t border-white/10 p-2 md:p-4 backdrop-blur-md z-40",children:g.jsxs("div",{className:"max-w-7xl mx-auto flex flex-col md:flex-row items-center justify-between gap-4 px-4",children:[g.jsxs("div",{className:"flex items-center space-x-4 mb-2 md:mb-0",children:[g.jsx("div",{className:"h-10 w-10 bg-jeopardy-blue rounded-full flex items-center justify-center border border-white/20 shrink-0",children:g.jsx("span",{className:"text-xl",children:""})}),g.jsx("span",{className:"text-white/70 font-medium hidden md:inline",children:"VetMed Jeopardy"})]}),g.jsx("div",{className:"flex flex-wrap items-center justify-center gap-4 md:gap-8 overflow-x-auto",children:n.map(e=>g.jsxs("div",{className:"flex flex-col items-center min-w-[80px]",children:[g.jsxs("span",{className:"text-jeopardy-gold font-display font-bold text-2xl md:text-3xl drop-shadow-md",children:["$",e.score]}),g.jsx("span",{className:"text-white/80 text-sm font-medium uppercase tracking-wide truncate max-w-[120px]",children:e.name})]},e.id))})]})}),ju=({name:n,score:e,status:t,onBuzz:o,boardData:r,activeClue:l})=>{let a="bg-gray-600",u="WAIT",c=!0;return t==="ARMED"?(a="bg-green-600 hover:bg-green-500 active:bg-green-400",u="BUZZ!",c=!1):t==="BUZZED"?(a="bg-jeopardy-gold text-jeopardy-dark",u="LOCKED IN"):(a="bg-red-900/50",u="LOCKED"),g.jsxs("div",{className:"min-h-screen bg-jeopardy-dark flex flex-col",children:[g.jsxs("div",{className:"bg-blue-900 p-4 flex justify-between items-center border-b border-white/10 shrink-0 z-10 shadow-md",children:[g.jsx("span",{className:"text-white font-bold text-lg truncate max-w-[150px]",children:n}),g.jsxs("span",{className:"text-jeopardy-gold font-display font-bold text-2xl",children:["$",e]})]}),g.jsx("div",{className:"flex-grow flex flex-col relative overflow-hidden",children:l?g.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center p-6 bg-jeopardy-blue z-20 animate-in slide-in-from-bottom-4 duration-300",children:[g.jsxs("div",{className:"mb-8 text-center space-y-4 max-w-lg flex flex-col items-center",children:[g.jsxs("span",{className:"text-jeopardy-gold font-display font-bold text-4xl",children:["$",l.value]}),l.imageUrl&&g.jsx("img",{src:l.imageUrl,alt:"Clue Visual",className:"max-h-32 w-auto rounded shadow-md border border-white/20 mb-2"}),g.jsx("p",{className:"text-white font-medium text-xl md:text-2xl leading-relaxed uppercase font-display tracking-wide",children:l.question})]}),g.jsx("button",{onClick:o,disabled:c,className:`
                  w-48 h-48 md:w-64 md:h-64 rounded-full shadow-2xl border-8 border-white/10
                  flex items-center justify-center text-3xl md:text-5xl font-bold tracking-widest
                  transition-all duration-100 active:scale-95
                  ${a} text-white
                `,children:u}),g.jsx("div",{className:"mt-8 text-white/50 text-sm uppercase tracking-widest animate-pulse",children:t==="ARMED"?"Quick! Tap now!":"Waiting for Host..."})]}):g.jsx("div",{className:"flex-grow overflow-y-auto bg-jeopardy-dark",children:r?g.jsx("div",{className:"pointer-events-none opacity-100 origin-top scale-90 md:scale-100",children:g.jsx(Xt,{categories:r.categories,onClueClick:()=>{},readOnly:!0})}):g.jsx("div",{className:"flex h-full items-center justify-center text-white/30",children:"Waiting for game to start..."})})})]})},ed=()=>{const n="ABCDEFGHJKLMNPQRSTUVWXYZ";let e="";for(let t=0;t<4;t++)e+=n.charAt(Math.floor(Math.random()*n.length));return e},Ct="vetmed-jeopardy-v1-",td=()=>{const[n,e]=G.useState("LANDING"),[t,o]=G.useState(""),[r,l]=G.useState(ne.IDLE),[a,u]=G.useState(null),[c,d]=G.useState([]),[f,p]=G.useState(null),[m,h]=G.useState(null),[y,T]=G.useState("AI"),[I,S]=G.useState(""),[_,C]=G.useState(""),[A,N]=G.useState(""),[P,w]=G.useState(0),[b,R]=G.useState(null),[U,q]=G.useState(null),[L,$]=G.useState(""),[ie,j]=G.useState({status:"LOCKED",buzzedPlayerId:null}),W=G.useRef(null),O=G.useRef(new Map),Qt=()=>{e("HOST");const v=ed();o(v);const M=new window.Peer(`${Ct}${v}`);W.current=M,M.on("open",x=>{console.log("Host Peer ID:",x)}),M.on("connection",x=>{x.on("open",()=>{x.on("data",k=>{jt(x,k)})})}),M.on("error",x=>{console.error("Peer Error",x),h("Connection error. Try refreshing.")})},Ae=v=>({categories:v.categories.map(M=>({...M,clues:M.clues.map(x=>({...x,answer:"HIDDEN ON CLIENT"}))}))}),jt=(v,M)=>{switch(M.type){case"JOIN":const x={id:v.peer,name:M.payload.name.substring(0,12),score:0,isConnected:!0};d(k=>k.find(B=>B.id===x.id)?k:[...k,x]),O.current.set(v.peer,v),v.send({type:"WELCOME",payload:{score:0}}),a&&v.send({type:"BOARD_UPDATE",payload:Ae(a)}),f&&(v.send({type:"CLUE_SELECTED",payload:{...f,answer:"HIDDEN"}}),v.send({type:"BUZZER_STATUS",payload:ie}));break;case"BUZZ":j(k=>{if(k.status==="ARMED"){const V=v.peer;return ee({type:"BUZZER_STATUS",payload:{status:"BUZZED",buzzedPlayerId:V}}),{status:"BUZZED",buzzedPlayerId:V}}return k});break}},ee=v=>{O.current.forEach(M=>{M.open&&M.send(v)})},eo=(v,M)=>{const x=O.current.get(v);x&&x.open&&x.send({type:"UPDATE_PLAYERS",payload:{score:M}})},no=G.useCallback(async()=>{l(ne.LOADING),h(null);try{let v=[];if(y==="CSV"){if(!I.trim())throw new Error("Please paste CSV content.");const x=ro(I);if(x.length===0)throw new Error("Invalid CSV.");x.length===6&&x.every(V=>V.clues.length===5)?v=x:(console.log("CSV incomplete. Requesting AI completion (Hybrid Mode)."),v=(await Et(x)).categories)}else v=(await Et()).categories;const M=so(v);u(M),l(ne.PLAYING),ee({type:"BOARD_UPDATE",payload:Ae(M)})}catch(v){console.error(v),h(v.message||"Failed to initialize."),l(ne.IDLE)}},[y,I]),to=()=>{if(!_||!A){$("Name and Room Code required.");return}$("");const v=new window.Peer;W.current=v,v.on("open",()=>{const M=`${Ct}${A.toUpperCase()}`,x=v.connect(M);x.on("open",()=>{e("PLAYER"),x.send({type:"JOIN",payload:{name:_}}),x.on("data",k=>{oo(k)})}),x.on("error",()=>{$("Could not connect to host.")}),O.current.set("HOST",x)}),v.on("error",()=>{$("Connection failed.")})},oo=v=>{switch(v.type){case"WELCOME":case"UPDATE_PLAYERS":v.payload.score!==void 0&&w(v.payload.score);break;case"BOARD_UPDATE":R(v.payload);break;case"CLUE_SELECTED":q(v.payload);break;case"CLUE_CLOSED":q(null);break;case"BUZZER_STATUS":j({status:v.payload.status,buzzedPlayerId:v.payload.buzzedPlayerId});break}},io=()=>{const v=O.current.get("HOST");v&&v.send({type:"BUZZ",payload:{}})},so=v=>{let M=v.map((k,V)=>({...k,id:`cat-${V}`,clues:k.clues.map((B,Y)=>({...B,id:`clue-${V}-${Y}`,isAnswered:!1,isDailyDouble:!1})).sort((B,Y)=>B.value-Y.value)}));const x=[];if(M.forEach((k,V)=>{k.clues.forEach((B,Y)=>{x.push({catIdx:V,clueIdx:Y})})}),x.length>0){const k=x[Math.floor(Math.random()*x.length)];M[k.catIdx].clues[k.clueIdx].isDailyDouble=!0}return{categories:M}},ro=v=>{const M=v.split(`
`),x={};return M.forEach(k=>{if(!k.trim())return;const V=k.match(/(".*?"|[^",\s]+)(?=\s*,|\s*$)/g),B=V?V.map(Y=>Y.replace(/^"|"$/g,"").trim()):k.split(",").map(Y=>Y.trim());if(B.length>=4){const Y=B[0],We=parseInt(B[1],10),co=B[2],fo=B[3],Re=B.length>4?B[4]:void 0;x[Y]||(x[Y]=[]),isNaN(We)||x[Y].push({value:We,question:co,answer:fo,imageUrl:Re&&Re.startsWith("http")?Re:void 0})}}),Object.keys(x).map(k=>({id:"",title:k,clues:x[k]}))},lo=v=>{p(v),ee({type:"CLUE_SELECTED",payload:{...v,answer:"HIDDEN"}});const M={status:"LOCKED",buzzedPlayerId:null};j(M),ee({type:"BUZZER_STATUS",payload:M})},$e=()=>{const v={status:"ARMED",buzzedPlayerId:null};j(v),ee({type:"BUZZER_STATUS",payload:v})},ao=()=>{$e()},Ye=()=>{p(null),j({status:"LOCKED",buzzedPlayerId:null}),ee({type:"CLUE_CLOSED",payload:{}}),ee({type:"BUZZER_STATUS",payload:{status:"LOCKED",buzzedPlayerId:null}})},uo=(v,M)=>{if(a){if(v){let x=0;d(k=>k.map(V=>V.id===v?(x=V.score+M,{...V,score:x}):V)),eo(v,x)}if(M>=0||f?.isDailyDouble){const k={categories:a.categories.map(V=>({...V,clues:V.clues.map(B=>B.id===f?.id?{...B,isAnswered:!0,winnerId:v||void 0}:B)}))};u(k),ee({type:"BOARD_UPDATE",payload:Ae(k)}),Ye()}}};return n==="PLAYER"?g.jsx(ju,{name:_,score:P,status:ie.status,onBuzz:io,boardData:b,activeClue:U}):n==="LANDING"?g.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-900 to-black flex flex-col items-center justify-center p-6 text-white",children:[g.jsx("h1",{className:"text-4xl md:text-6xl font-display font-bold text-jeopardy-gold mb-12 text-center drop-shadow-lg",children:"VET MED JEOPARDY"}),g.jsxs("div",{className:"grid md:grid-cols-2 gap-8 w-full max-w-4xl",children:[g.jsxs("div",{className:"bg-white/10 backdrop-blur-md p-8 rounded-2xl border border-white/10 flex flex-col items-center hover:bg-white/15 transition-colors",children:[g.jsx("div",{className:"text-5xl mb-4",children:""}),g.jsx("h2",{className:"text-2xl font-bold mb-4",children:"HOST A GAME"}),g.jsx("p",{className:"text-white/60 text-center mb-8",children:"Create a game board on this screen. Players can join using their phones."}),g.jsx("button",{onClick:Qt,className:"px-8 py-3 bg-jeopardy-blue hover:bg-blue-600 text-white font-bold rounded-full shadow-lg transition-transform hover:scale-105 w-full",children:"START AS HOST"})]}),g.jsxs("div",{className:"bg-white/10 backdrop-blur-md p-8 rounded-2xl border border-white/10 flex flex-col items-center hover:bg-white/15 transition-colors",children:[g.jsx("div",{className:"text-5xl mb-4",children:""}),g.jsx("h2",{className:"text-2xl font-bold mb-4",children:"JOIN GAME"}),g.jsx("p",{className:"text-white/60 text-center mb-4",children:"Enter the Room Code displayed on the Host screen."}),g.jsxs("div",{className:"w-full space-y-4",children:[g.jsx("input",{type:"text",placeholder:"YOUR NAME",value:_,onChange:v=>C(v.target.value),className:"w-full bg-black/30 border border-white/30 rounded-lg px-4 py-3 text-center font-bold focus:border-jeopardy-gold outline-none"}),g.jsx("input",{type:"text",placeholder:"ROOM CODE (e.g. ABCD)",value:A,onChange:v=>N(v.target.value),maxLength:4,className:"w-full bg-black/30 border border-white/30 rounded-lg px-4 py-3 text-center font-bold uppercase tracking-widest focus:border-jeopardy-gold outline-none"}),L&&g.jsx("p",{className:"text-red-400 text-sm text-center",children:L}),g.jsx("button",{onClick:to,disabled:!_||A.length<4,className:"px-8 py-3 bg-jeopardy-gold text-blue-900 hover:bg-yellow-400 font-bold rounded-full shadow-lg transition-transform hover:scale-105 w-full disabled:opacity-50 disabled:scale-100",children:"JOIN"})]})]})]})]}):r===ne.IDLE?g.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-950 to-black flex flex-col items-center justify-center p-4 text-center overflow-y-auto",children:g.jsxs("div",{className:"max-w-4xl w-full space-y-8 animate-in fade-in zoom-in duration-700 py-10",children:[g.jsxs("div",{className:"space-y-2",children:[g.jsx("p",{className:"text-white/50 text-sm font-bold tracking-widest uppercase",children:"ROOM CODE"}),g.jsx("div",{className:"text-6xl font-mono font-bold text-jeopardy-gold bg-white/10 inline-block px-8 py-4 rounded-xl border-2 border-jeopardy-gold/50 tracking-[0.5em]",children:t}),g.jsx("p",{className:"text-white/30 text-xs",children:"Join at this URL on your phone"})]}),g.jsxs("div",{className:"grid md:grid-cols-2 gap-8 text-left",children:[g.jsxs("div",{className:"bg-white/5 backdrop-blur-md p-6 rounded-xl border border-white/10 shadow-xl",children:[g.jsxs("h3",{className:"text-xl text-white font-bold mb-4 uppercase tracking-widest flex items-center gap-2",children:[g.jsx("span",{children:""})," Players (",c.length,")"]}),g.jsxs("div",{className:"space-y-2 mb-6 max-h-64 overflow-y-auto custom-scrollbar",children:[c.length===0&&g.jsx("p",{className:"text-white/30 italic text-center py-8",children:"Waiting for players to join..."}),c.map(v=>g.jsxs("div",{className:"flex justify-between items-center bg-white/10 px-3 py-3 rounded animate-in fade-in slide-in-from-left-4",children:[g.jsx("span",{className:"text-white font-bold text-lg",children:v.name}),g.jsx("span",{className:"text-green-400 text-xs",children:"CONNECTED"})]},v.id))]})]}),g.jsxs("div",{className:"bg-white/5 backdrop-blur-md p-6 rounded-xl border border-white/10 shadow-xl flex flex-col",children:[g.jsxs("h3",{className:"text-xl text-white font-bold mb-4 uppercase tracking-widest flex items-center gap-2",children:[g.jsx("span",{children:""})," Game Data"]}),g.jsxs("div",{className:"flex bg-black/40 p-1 rounded-lg mb-4",children:[g.jsx("button",{onClick:()=>T("AI"),className:`flex-1 py-2 rounded-md font-bold text-sm transition-all ${y==="AI"?"bg-jeopardy-blue text-white shadow-md":"text-white/50 hover:text-white"}`,children:"AI Generator"}),g.jsx("button",{onClick:()=>T("CSV"),className:`flex-1 py-2 rounded-md font-bold text-sm transition-all ${y==="CSV"?"bg-jeopardy-blue text-white shadow-md":"text-white/50 hover:text-white"}`,children:"CSV Upload"})]}),y==="AI"?g.jsx("div",{className:"flex-1 flex items-center justify-center text-center p-4 border-2 border-dashed border-white/10 rounded-lg",children:g.jsx("p",{className:"text-white/60 text-sm",children:"The AI will automatically generate 6 categories."})}):g.jsx("div",{className:"flex-1 flex flex-col",children:g.jsx("textarea",{value:I,onChange:v=>S(v.target.value),placeholder:`Category, Value, Question, Answer, [ImageURL]

Tip: If you provide fewer than 6 categories, AI will fill in the rest!`,className:"flex-1 w-full bg-black/40 border border-white/20 rounded p-3 text-xs font-mono text-white/80 focus:outline-none focus:border-jeopardy-gold resize-none min-h-[150px]"})})]})]}),m&&g.jsx("div",{className:"p-4 bg-red-500/20 border border-red-500 text-red-200 rounded-lg max-w-2xl mx-auto",children:m}),g.jsxs("button",{onClick:no,disabled:c.length===0,className:"group relative inline-flex items-center justify-center px-16 py-5 overflow-hidden font-bold text-white rounded-full shadow-2xl transition-all duration-300 hover:scale-105 focus:outline-none disabled:opacity-50 disabled:scale-100 cursor-pointer disabled:cursor-not-allowed",children:[g.jsx("span",{className:"absolute inset-0 w-full h-full bg-gradient-to-br from-blue-600 to-blue-800 opacity-100 group-hover:opacity-90"}),g.jsx("span",{className:"relative text-2xl tracking-widest font-display",children:"START GAME"})]})]})}):r===ne.LOADING?g.jsx(Xu,{}):g.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-blue-900 to-slate-900 flex flex-col relative pb-32",children:[g.jsx("header",{className:"bg-blue-950/50 border-b border-white/5 p-4 shadow-lg",children:g.jsxs("div",{className:"max-w-7xl mx-auto flex justify-between items-center",children:[g.jsxs("div",{className:"flex items-center gap-4",children:[g.jsxs("div",{className:"bg-jeopardy-gold text-jeopardy-dark font-bold px-3 py-1 rounded text-sm",children:["CODE: ",t]}),g.jsx("h1",{className:"text-white font-display font-bold text-xl tracking-wide hidden md:block",children:"VET MED JEOPARDY"})]}),g.jsx("button",{onClick:()=>l(ne.IDLE),className:"text-xs text-blue-300 hover:text-white uppercase tracking-widest border border-blue-300/30 px-3 py-1 rounded hover:bg-blue-800 transition-colors",children:"End Game"})]})}),g.jsx("main",{className:"flex-grow flex items-center",children:a&&g.jsx(Xt,{categories:a.categories,onClueClick:lo})}),g.jsx(Qu,{players:c}),f&&g.jsx(Zu,{clue:f,players:c,onClose:Ye,onAwardPoints:uo,buzzerState:ie,onArmBuzzers:$e,onResetBuzzers:ao})]})};export{td as default};
